import{bk as y,M as p,bx as f,i as R,s as $}from"./index-Dp_94g6t.js";const g="list_page_params",I=u=>{const a=R(),c=$();let i={};const t=()=>{c.replace({...a,query:{}})},m=(s=!0)=>{const{query:e}=a,r={};e.limit&&(r.limit=Number(e.limit)),e.page&&(r.page=Number(e.page));const o=p.omit(e,["limit","page"]);return s&&t(),{pageParams:r,filterParams:o}},n=(s=!0)=>{const{query:e}=a,r={};e.cursor&&(r.cursor=e.cursor.toString()),e.page&&(r.page=Number(e.page));const o=p.omit(e,["limit","page"]);return s&&t(),{pageParams:r,filterParams:o}},l=(s,e)=>{const r=`${s}_cursor_map`,o=Object.fromEntries(e);sessionStorage.setItem(r,JSON.stringify(o))},b=s=>{const e=`${s}_cursor_map`,r=f(sessionStorage.getItem(e)),o=new Map([]);return r&&(Object.entries(r).forEach(([S,O])=>{o.set(Number(S),O)}),o.get(1)||o.set(1,void 0)),o},P=(s,e)=>{const r=m();s.value={...s.value,...r.pageParams},e.value=r.filterParams},q=s=>{i=s};return y((s,e,r)=>{s.name===u&&(e={...e,query:{...e.query,...i}},sessionStorage.setItem(g,JSON.stringify(i))),r()}),{checkParamsInQuery:m,checkNewCursorParamsInQuery:n,updateCursorMap:l,getCursorMap:b,resetRouteQuery:t,setParamsFromQuery:P,updateParams:q}},j=u=>Object.entries(u).map(([a,c])=>`${a}=${c}`).join("&"),N=u=>{let a={};const c=t=>{const m=f(sessionStorage.getItem(g));if(window.setTimeout(()=>{sessionStorage.removeItem(g)},3e3),a=m||{limit:20,page:1},typeof t=="string"){const n=j(a);return t.indexOf("?")>-1?`${t}${n}`:`${t}?${n}`}return{...t,query:{...t.query,...a}}};let i=!1;return y((t,m,n)=>{if(!i&&t.name===u&&(!t.query||Object.keys(t.query).length===0)){i=!0,n({...t,query:{...t.query,...a}});return}n()}),{getBackRoute:c}};export{I as a,N as u};
