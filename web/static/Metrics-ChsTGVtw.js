import{d as x,g as C,q as S,C as $,c as B,a as r,t as d,u as t,b as a,w as s,y as R,r as u,V as U,o as m,F as j,k as q,p as D,m as y,M as E,av as F}from"./index-F6_Zcexc.js";import{e as T,k as W}from"./common-ctHvRRmR.js";import"./http-BI9UuFDl.js";const z={class:"metrics app-wrapper"},I={class:"header-block"},P={class:"header-item"},G={class:"tip"},H={class:"header-item"},J={class:"raw-key"},Q={class:"desc"},X={class:"raw-key"},Y={class:"desc"},Z={class:"raw-key"},ee={class:"desc"},te={class:"raw-key"},ae={class:"desc"},se=x({name:"Metrics"}),ne=x({...se,setup(le){const V=C([]),K="cluster",b=C(K),h=C(!0),f=C({}),{tl:i}=S("Dashboard"),M=async()=>{try{h.value=!0;const l=b.value===K?void 0:b.value,o=await T(l);Array.isArray(o)&&o.length===1?f.value=o[0]:Array.isArray(o)||(f.value=o)}catch{}finally{h.value=!1}},A=async()=>{try{const l=await W();V.value=l.map(({node:o})=>o)}catch{}};function v(l,o){let n=[];if(Object.keys(l||[]).forEach(c=>{c.startsWith(o)&&n.push({m:E.snakeCase(c),v:l[c],rawKey:c})}),o==="client"&&(n=n.filter(c=>!c.m.includes("auth"))),n=n.sort((c,_)=>c.m.localeCompare(_.m)),o==="authorization"){const c=[];Object.keys(l||[]).forEach(_=>{_.startsWith("client")&&_.includes("auth")&&c.push({m:E.snakeCase(_),v:l[_],rawKey:_})}),n.push(...c)}return n}const O=()=>{M()};return $(()=>{A(),M()}),(l,o)=>{const n=u("el-option"),c=u("el-select"),_=F,p=u("el-table-column"),k=u("el-table"),w=u("el-card"),N=u("el-col"),L=u("el-row"),g=U("loading");return m(),B("div",z,[r("div",I,[r("div",P,[r("p",G,d(t(i)("packetStatisticsOfNodes")),1)]),r("div",H,[a(c,{class:"node-select",modelValue:t(b),"onUpdate:modelValue":o[0]||(o[0]=e=>R(b)?b.value=e:null),placeholder:l.$t("Clients.node"),onChange:M},{default:s(()=>[a(n,{label:l.$t("BasicConfig.cluster"),value:K},null,8,["label"]),(m(!0),B(j,null,q(t(V),e=>(m(),y(n,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),a(_,{onClick:O})])]),r("h2",null,d(l.$t("Dashboard.messaging")),1),a(L,{class:"content-block",gutter:26},{default:s(()=>[a(N,{span:8},{default:s(()=>[a(w,{class:"top-border table-card bytes"},{default:s(()=>[D((m(),y(k,{stripe:"",data:v(t(f),"bytes")},{default:s(()=>[a(p,{prop:"m","min-width":"160",label:t(i)("traffic")},{default:s(({row:e})=>[r("p",J,d(e.rawKey),1),r("span",Q,d(e.m?t(i)(e.m):""),1)]),_:1},8,["label"]),a(p,{prop:"v",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])),[[g,t(h),void 0,{lock:!0}]])]),_:1}),a(w,{class:"top-border table-card packets"},{default:s(()=>[D((m(),y(k,{stripe:"",data:v(t(f),"packets")},{default:s(()=>[a(p,{prop:"m","min-width":"160",label:t(i)("mqttPackets")},{default:s(({row:e})=>[r("p",X,d(e.rawKey),1),r("span",Y,d(e.m?t(i)(e.m):""),1)]),_:1},8,["label"]),a(p,{prop:"v",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])),[[g,t(h),void 0,{lock:!0}]])]),_:1})]),_:1}),a(N,{span:8},{default:s(()=>[a(w,{class:"top-border table-card messages"},{default:s(()=>[D((m(),y(k,{stripe:"",data:v(t(f),"messages")},{default:s(()=>[a(p,{prop:"m","min-width":"160",label:t(i)("messageNumber")},{default:s(({row:e})=>[r("p",Z,d(e.rawKey),1),r("span",ee,d(e.m?t(i)(e.m):""),1)]),_:1},8,["label"]),a(p,{prop:"v",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])),[[g,t(h),void 0,{lock:!0}]])]),_:1})]),_:1}),a(N,{span:8},{default:s(()=>[a(w,{class:"top-border table-card delivery"},{default:s(()=>[D((m(),y(k,{stripe:"",data:v(t(f),"delivery")},{default:s(()=>[a(p,{prop:"m","min-width":"160",label:t(i)("delivery")},{default:s(({row:e})=>[r("p",te,d(e.rawKey),1),r("span",ae,d(e.m?t(i)(e.m):""),1)]),_:1},8,["label"]),a(p,{prop:"v",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])),[[g,t(h),void 0,{lock:!0}]])]),_:1})]),_:1})]),_:1})])}}});export{ne as default};
