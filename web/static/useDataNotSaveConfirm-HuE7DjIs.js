import{q as d,bl as m,C as v,Q as p,h as E,M as r,E as b}from"./index-gzDiX6cq.js";const C=(e,i="Base.unloadTip")=>{const{t:s}=d("RuleEngine");let t=!1;const{getters:o}=E(),a=n=>{r.isFunction(e)&&!e()||(n.preventDefault(),n.returnValue="")},u=()=>{o.isDev||window.addEventListener("beforeunload",a)},l=()=>{window.removeEventListener("beforeunload",a)},f=()=>o.isDev?Promise.resolve():b({type:"info",title:s("Base.leavePage"),message:s(i??"Base.unloadTip"),showCancelButton:!0,confirmButtonText:s("Base.leave"),showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,closeOnHashChange:!1}),c=()=>{t=!0};return m(async n=>{try{if(n.name==="login"||t)return;(!r.isFunction(e)||e())&&await f();return}catch{return!1}}),v(u),p(l),{updateIsSubmitted:c}};export{C as u};
