import{d as O,j as S,q as F,g as h,J as W,aZ as m,m as j,w as n,u as t,y as q,M as U,r as k,s as z,o as s,c as f,b as c,e as _,t as a,a as T,c2 as H}from"./index-Dp_94g6t.js";import{h as J}from"./useBridgeTypeValue-BhHkY53V.js";import{s as M}from"./success-filled-HwXygNV2.js";const P={key:0,class:"vertical-align-center"},Y={key:1},Z={key:0},A={key:1},Q=O({__name:"CreateRuleWithConnector",props:{modelValue:{type:Boolean},connector:{},title:{},cancelText:{},confirmText:{},cancelCallback:{type:Function}},emits:["update:modelValue"],setup(E,{emit:R}){const o=E,V=R,l=S({get:()=>o.modelValue,set:e=>{V("update:modelValue",e)}}),{t:y,tl:C}=F("RuleEngine"),B=z(),r=h(0),{judgeConnectorTypeDirection:D}=J();W(l,e=>{e?i.value=(o.connector&&D(o.connector.type))??m.Egress:r.value=0});const i=h(m.Egress),b=()=>{var e;H.includes((e=o.connector)==null?void 0:e.type)?r.value+=1:g()},w=()=>{i.value=m.Ingress,g()},N=()=>{i.value=m.Egress,g()},g=async()=>{if(!o.connector)return;const{name:e,type:u}=o.connector;B.push({name:"rule-create",query:{direction:i.value,connName:e,connType:u}})},v=()=>{U.isFunction(o.cancelCallback)&&o.cancelCallback(),l.value=!1};return(e,u)=>{const x=k("el-icon"),d=k("el-button"),I=k("el-dialog");return s(),j(I,{modelValue:t(l),"onUpdate:modelValue":u[0]||(u[0]=p=>q(l)?l.value=p:null),class:"create-rule-with-connector-dialog",width:420,title:e.title,"close-on-click-modal":!1,onClose:v},{footer:n(()=>[t(r)===0?(s(),f("div",Z,[c(d,{onClick:v},{default:n(()=>[_(a(e.cancelText??t(y)("Base.cancel")),1)]),_:1}),c(d,{type:"primary",onClick:b},{default:n(()=>[_(a(e.confirmText??t(y)("Base.confirm")),1)]),_:1})])):(s(),f("div",A,[c(d,{type:"primary",onClick:w},{default:n(()=>[_(a(t(C)("dataInput")),1)]),_:1}),c(d,{type:"primary",onClick:N},{default:n(()=>[_(a(t(C)("actionOutputs")),1)]),_:1})]))]),default:n(()=>{var p;return[t(r)===0?(s(),f("div",P,[c(x,{size:24},{default:n(()=>[c(t(M))]),_:1}),T("p",null,a(t(C)("useConnectorCreateRule")),1)])):(s(),f("div",Y,[T("p",null,a(t(y)("RuleEngine.confirmDirectionWhenCreatingRule",{name:(p=e.connector)==null?void 0:p.name})),1)]))]}),_:1},8,["modelValue","title"])}}});export{Q as _};
