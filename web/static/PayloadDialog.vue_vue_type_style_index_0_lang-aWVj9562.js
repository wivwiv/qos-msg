import{_ as R}from"./Monaco.vue_vue_type_style_index_0_lang-D8U6C2xl.js";import{g as P,cq as l,J as V,cr as O,cs as U,a5 as W,ct as $,d as A,j as T,q as E,m as S,w as r,u as n,y as B,r as y,V as q,o as _,c as b,b as p,F as M,k as Y,e as z,t as x,x as k,p as G,a as g,a9 as K}from"./index-gzDiX6cq.js";import{u as Q}from"./useCopy-zlCfhwDY.js";const X=e=>{try{return Promise.resolve(JSON.stringify(JSON.parse(e),null,2))}catch{return Promise.reject("invalid JSON input: "+e)}},Z=e=>{let t="";for(let a=0;a<e.length;a++)t+=e.charCodeAt(a).toString(16);return Promise.resolve(t)},ee=e=>{try{return Promise.resolve(decodeURIComponent(e.replace(/(..)/g,"%$1")))}catch{return Promise.reject("Invalid hex input: "+e)}},ae=e=>{try{return Promise.resolve($(e))}catch{return Promise.reject("Invalid base64 input: "+e)}},oe=e=>{try{return Promise.resolve(JSON.stringify(JSON.parse(e)))}catch(t){return Promise.reject(t)}},te=async(e,t,a)=>{let o=e;try{if(t!==l.Plaintext)switch(t){case l.Base64:o=await ae(o);break;case l.JSON:o=await oe(o);break;case l.Hex:o=await ee(o);break}return a===l.Plaintext?o:a===l.Base64?U(o):(a===l.JSON&&(o=await X(o)),a===l.Hex&&(o=await Z(o)),o)}catch(c){return W.error(c),o}},le=()=>{const e=P(""),t=P(l.Base64),a=P(O[0]),o=O,c=(w,v)=>{e.value=w,t.value=v},m=P(""),i=async()=>{const w=await te(e.value||"",t.value,a.value);m.value=w};return V(a,i),V(e,i),{payloadForShow:m,payloadShowBy:a,payloadShowByOptions:o,setRawText:c}},ne={class:"topic-text"},se={class:"monaco-container"},re={key:0,class:"payload-dialog-ft"},ce=A({__name:"PayloadDialog",props:{modelValue:{type:Boolean},isLoading:{type:Boolean},rawPayload:{},rawPayloadFormat:{default:l.Base64},topic:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,o=t,c=T({get:()=>a.modelValue,set:s=>{o("update:modelValue",s)}});V(c,s=>{s?v(a.rawPayload,a.rawPayloadFormat):i.value=O[0]});const{payloadForShow:m,payloadShowBy:i,payloadShowByOptions:w,setRawText:v}=le();V(()=>a.rawPayload,s=>{c.value&&v(s,a.rawPayloadFormat)});const{t:h}=E("Clients"),{copyText:J}=Q(),C=T(()=>i.value===l.Hex||i.value===l.Base64);return(s,u)=>{const f=y("el-col"),N=y("el-row"),F=R,j=y("el-option"),D=y("el-select"),H=y("el-button"),I=y("el-dialog"),L=q("loading");return _(),S(I,{modelValue:n(c),"onUpdate:modelValue":u[3]||(u[3]=d=>B(c)?c.value=d:null),class:"payload-dialog",width:"700px",title:n(h)("Extension.view")},{footer:r(()=>[s.rawPayload!==null?(_(),b("div",re,[p(D,{modelValue:n(i),"onUpdate:modelValue":u[1]||(u[1]=d=>B(i)?i.value=d:null)},{default:r(()=>[(_(!0),b(M,null,Y(n(w),d=>(_(),S(j,{key:d,label:d,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),p(H,{onClick:u[2]||(u[2]=d=>n(J)(n(m)))},{default:r(()=>[z(x(n(h)("Base.copy")),1)]),_:1})])):k("",!0)]),default:r(()=>[G((_(),S(N,null,{default:r(()=>[s.topic?(_(),S(f,{key:0,span:24},{default:r(()=>[p(N,null,{default:r(()=>[p(f,{span:2},{default:r(()=>[g("label",null,x(n(h)("Base.topic")),1)]),_:1}),p(f,{span:21},{default:r(()=>[g("p",ne,x(s.topic),1)]),_:1})]),_:1})]),_:1})):k("",!0),p(f,{span:24,class:"margin-bottom-0"},{default:r(()=>[K(s.$slots,"default")]),_:3}),p(f,{span:24},{default:r(()=>[u[4]||(u[4]=g("label",{class:"label-top"},"Payload",-1)),g("div",se,[p(F,{disabled:"",id:"payload",modelValue:n(m),"onUpdate:modelValue":u[0]||(u[0]=d=>B(m)?m.value=d:null),lang:n(C)?"plaintext":"json",jsonWithoutValidate:n(i)!==n(l).JSON},null,8,["modelValue","lang","jsonWithoutValidate"])])]),_:1})]),_:3})),[[L,s.isLoading]])]),_:3},8,["modelValue","title"])}}});export{ce as _};
