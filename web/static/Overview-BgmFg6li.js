import{i as Ue,_ as Re,e as ms,a as Fe,b as Pt,c as _i,D as Ca,C as ys,m as _s,d as bs,f as Un,g as Ze,h as ni,j as ko,k as ws,l as Ss,p as bi,L as xs,B as Es,n as Ia,P as As,o as Ns,u as Ms,q as ka,S as wi,s as Ds,r as Cs,t as Is,v as ks,w as $s,x as Ps,G as $n,y as $a,z as Pa,A as $o,E as Ts,F as Po,H as Os,I as Rs,J as zs,K as To,M as Ta,N as ln,O as pt,Q as xn,R as Oa,T as Ls,U as Bs,V as Vs,W as Si,X as Tt,Y as Hs,Z as Wt,$ as tt,a0 as Ra,a1 as za,a2 as De,a3 as Gs,a4 as xi,a5 as Pn,a6 as Fs,a7 as La,a8 as Ba,a9 as Ys,aa as Xs,ab as Us,ac as Je,ad as Zs,ae as Ks,af as Ws,ag as qs,ah as En,ai as un,aj as Qs,ak as js,al as Ei,am as Js,an as el,ao as tl,ap as nl}from"./pie-CYSv_nPN.js";import{S as ol,u as Va,a as oi}from"./useSyncPolling-Cdzdb31s.js";import{_ as Ha,d as ve,o as q,c as le,a as I,q as ht,g as oe,A as mt,J as ye,C as Le,h as Zn,j as J,a0 as il,l as qe,a1 as Ga,M as ct,m as $e,w as fe,u as S,y as Be,s as al,r as Se,b as Q,e as _t,t as te,a2 as Oo,a3 as Ve,z as Fa,a4 as me,F as Pe,k as ot,n as Qe,x as Me,a5 as rl,N as Ya,Q as ii,a6 as Te,a7 as Xa,a8 as Ne,a9 as St,aa as on,ab as Bt,ac as Ot,ad as sl,ae as Ua,af as An,ag as ll,ah as ul,ai as cl,aj as Za,D as Ka,ak as dl,al as _e,am as Ct,an as xe,ao as fl,ap as hl,R as pl,W as vl,p as Tn,aq as Ro,ar as Ke,B as gl,as as ml,V as yl,at as _l,I as bl,f as wl,au as Sl}from"./index-F6_Zcexc.js";import{_ as xl}from"./InfoTooltip-CPsvXzu1.js";import{D as On,i as Ai,c as Wa,a as qa,s as ai,b as Qa,g as El,u as Al,d as Nl,M as Ni}from"./useDroppedDetail-15kfH_rd.js";import{d as Ml,r as Dl,e as Cl,f as Il,g as kl,h as $l}from"./common-ctHvRRmR.js";import{_ as Pl}from"./MarkdownContent.vue_vue_type_style_index_0_lang-D3IVIbCc.js";import{u as Tl}from"./useOperationConfirm-DKx22PW7.js";import{c as Ol}from"./close-C-gDC1-1.js";import{_ as Rl}from"./CommonOverflowTooltip.vue_vue_type_style_index_0_lang-Bl9D7zI6.js";import{u as zl}from"./useEditionConfigs-rdgHSAlp.js";import{u as Ll}from"./useClusterNodes-BmAOsB0B.js";import{u as Bl}from"./useDurationStr-B_hM76H_.js";import"./http-BI9UuFDl.js";import"./compareVersions-DqEOhma6.js";const Vl=ve({name:"DataAnalysis"}),Hl={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gl=I("path",{fill:"currentColor",d:"m665.216 768 110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32l110.848-192H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32H665.216zM832 192H192v512h640V192zM352 448a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0v-64a32 32 0 0 1 32-32zm160-64a32 32 0 0 1 32 32v128a32 32 0 0 1-64 0V416a32 32 0 0 1 32-32zm160-64a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V352a32 32 0 0 1 32-32z"},null,-1),Fl=[Gl];function Yl(e,t,n,o,i,a){return q(),le("svg",Hl,Fl)}var Xl=Ha(Vl,[["render",Yl]]);const Ul=ve({name:"FullScreen"}),Zl={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Kl=I("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),Wl=[Kl];function ql(e,t,n,o,i,a){return q(),le("svg",Zl,Wl)}var Mi=Ha(Ul,[["render",ql]]);const so="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF9SURBVHgB7ZY/T8JAGMafa6uQ+CdlYMAJdgdWR76Agp9A/QI66mCEgcRBI34CN1dY3HF0EgfjZrthDAmNiUZCr+e1Q1OIptd/qST9Lb1e3vfep/fc2xyQkTJEOLJ7XIZsHgKsilCQAahyjca5HlyAXVyaPvKRimjosJZqXhGSUJpkdmMobsN3cXo2s7RvSvdIDb/tv8BQRyAB8Xz5n+uJWZAgqQtQ5ieaY02VTbieP49eyw9vT/Dj25xg+DVCUMhMYUpu+LCOkBiTD9y+3GH46SNk59Kt61qgUOkqSnEbNbeOg81dFPJrwjmOgPZYqzKwPcRAXslhqyTetY4AShFfn3NKK0Xh2KwN0xBgIFUBBD2kKEDnJ77lnVCQADl52QDhFxAvFPeA2UGjYyQuYGO1OMD2RU0kNmvD/yGAMH46Y4XoopGOgNNipc8ffcSELFst0VjXAiqzff7SQxSI/ZdjjZNCRRdPmaP9rlUtCWUW8DJq20gVDJqFioGMReIHnJ5iLv1qfYAAAAAASUVORK5CYII=",Ql="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHkSURBVHgB7Ze7S8NAHMe/l0ZaxYrFFwg+6qLg4GNQcPA1KYLg5CBi/Q90FHzE16ziLnVyEwXRRbQ4Ozg4uGgjCIIWGqpiq7XnXdXSWNsmMViQfODgfpf75fdN7ve7SwCLHEOSjaX76xVKaDMMcqXcYN9/goK8fAzX96FQLDibLquZzOQjJhufwbthgHA0gp3LQwTDD3F79/IIIw0DWf0EmET4LZIIzrl9DGjyM02AUSwBORegKsPFgHyMLFVw+xTAASs1JRJKuZachByXw8nH5G8RfXhzTmJIUrgpQidbF3spgdLxOa9WNUjhgRC6Zj2Jm7qX4Dn6AhNIbHa6BfRUteOXKIjFJr4M3UvQUdmE1vIGtvGo30QwHMLG+XbCLrYXYbRx0Ld+ujmeImBoVTEsgOMQ7fGmhqbMq8h3gQWTkQFrH/g/Ahw2dU647E5NfuYJYEn5VaK831/XqcnPUBWko7e6Ld70YCWhPgGE7WKUzgsx2kJBxwmBjF+iKQfYme2jLPBMqduXNHzGmnch4PcIIGPU4MesmCEqOzTomijCO+Vyy+mmzZa6vVyIFPTX2l4hERvpovTbEaxHAH9aELobFdhNS9wKNCJ9iPTwfvytEDL3w/GQ5SbsKWAiy3d+wz85Fn/GOysUlMy+T3xPAAAAAElFTkSuQmCC",jl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgB7VbPaxNBFH6z2dq0JnFTtVgEuzmptyiC3pL8A4ZcPcV7QSEp6EGag6DgDzyIFw/25jGm4rnruUhzUA+i7B4sNcbQjRZrcDfjbrHJzrzZZrchUGg/yJL55tt5X2bmvReAgw4SSl29pYJsqQxnyQYU7htI+2Y+DV2qsNpYHQoV00vJEAYR64WzaJYlrZzzMJDW6i47T4Vjk7xMgjCgNI24wkMNcdX5NA5O0K8PZ0C0KAFNLLaxUaBvRUrhEdxb11Wee/7pVX5jq81wk2OTxpxAe3vlaQYoy52dUvWiR9uJgllJpkzhJbzbMnRKQYU94tnqS1j//YPhSpeKoIzH+wSluTsnUxo6gsqGrg4T/I/VQcGV8QQbHMB0g7tfkAHJhiwMAb29hriZ2Alm7Gx7vRePF0sgZWAIGO2viEslTrMEpbV+PB6Ez/Nw4Ld/28Ax1gD17ECwSlgrrzqvsanVlS5A4UEda0vc/QcT8o+S4IPBdaB6U0HB3UVFwV+Xs4gjgHWhDMhy4KICtIu1lIi1gQ10BVlBJE0sJhnB+z7aoAYI4EVtn22lohSODXkEI2hAXvR6gVsBIxYUvZM/O5vKu+8fmUUn5KhxpTlX4Rda+qLNrjTeM9z5qRRca+qM1qmAFaGBiA1pIGTBO5mIxiF35jIfS3U+CzxpUZun4OL0OXfN3g46Oa/xGqk/KeVhCHzbbCLuVGyaGVOKs6d/B4jgrAMiYANyoYHIwP8OuGcDQRqQi50O6MX2HRj7CwqVyKJ3orHVUtd+NbJe7vhEsj4bn0Fp9aH12dWpXi5x5KhGgBg7Y0IE/xtht15QKz1xnjdYNb0OVx8vIu1Sedk54CzD+fUKDrvUAUFVsyM+BQh1UDNIcH8DI25Agw2MuAENNjDiBnSIfYV/NTr1d0OaNRcAAAAASUVORK5CYII=";function ja(e,t){if(!e)return!1;for(var n=Ue(e)?e:[e],o=0;o<n.length;o++)if(n[o]&&n[o][t])return!0;return!1}function cn(e){bs(e,"label",["show"])}var dn=Un(),xt=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return t.prototype.init=function(n,o,i){this.mergeDefaultAndTheme(n,i),this._mergeOption(n,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(ms.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},t.prototype.mergeOption=function(n,o){this._mergeOption(n,o,!1,!1)},t.prototype._mergeOption=function(n,o,i,a){var r=this.mainType;i||o.eachSeries(function(s){var l=s.get(this.mainType,!0),u=dn(s)[r];if(!l||!l.data){dn(s)[r]=null;return}u?u._mergeOption(l,o,!0):(a&&cn(l),Fe(l.data,function(c){c instanceof Array?(cn(c[0]),cn(c[1])):cn(c)}),u=this.createMarkerModelFromSeries(l,this,o),Pt(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),dn(s)[r]=u},this)},t.prototype.formatTooltip=function(n,o,i){var a=this.getData(),r=this.getRawValue(n),s=a.getName(n);return _i("section",{header:this.name,blocks:[_i("nameValue",{name:s,value:r,noName:!s,noValue:r==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(n){this._data=n},t.prototype.getDataParams=function(n,o){var i=Ca.prototype.getDataParams.call(this,n,o),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},t.getMarkerModelFromSeries=function(n,o){return dn(n)[o]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ys);_s(xt,Ca.prototype);var Jl=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,i){return new t(n,o,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(xt);function eu(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function tu(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function fn(e,t,n,o,i,a){var r=[],s=ws(t,o),l=s?t.getCalculationInfo("stackResultDimension"):o,u=ri(t,l,e),c=t.indicesOfNearest(l,u)[0];r[i]=t.get(n,c),r[a]=t.get(l,c);var d=t.get(o,c),f=Ss(t.get(o,c));return f=Math.min(f,20),f>=0&&(r[a]=+r[a].toFixed(f)),[r,d]}var lo={min:Ze(fn,"min"),max:Ze(fn,"max"),average:Ze(fn,"average"),median:Ze(fn,"median")};function zo(e,t){if(t){var n=e.getData(),o=e.coordinateSystem,i=o&&o.dimensions;if(!tu(t)&&!Ue(t.coord)&&Ue(i)){var a=Ja(t,n,o,e);if(t=ni(t),t.type&&lo[t.type]&&a.baseAxis&&a.valueAxis){var r=ko(i,a.baseAxis.dim),s=ko(i,a.valueAxis.dim),l=lo[t.type](n,a.baseDataDim,a.valueDataDim,r,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!Ue(i))t.coord=[];else for(var u=t.coord,c=0;c<2;c++)lo[u[c]]&&(u[c]=ri(n,n.mapDimension(i[c]),u[c]));return t}}function Ja(e,t,n,o){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=n.getAxis(nu(o,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=o.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function nu(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}function Lo(e,t){return e&&e.containData&&t.coord&&!eu(t)?e.containData(t.coord):!0}function er(e,t){return e?function(n,o,i,a){var r=a<2?n.coord&&n.coord[a]:n.value;return bi(r,t[a])}:function(n,o,i,a){return bi(n.value,t[a])}}function ri(e,t,n){if(n==="average"){var o=0,i=0;return e.each(t,function(a,r){isNaN(a)||(o+=a,i++)}),o/i}else return n==="median"?e.getMedian(t):e.getDataExtent(t)[n==="max"?1:0]}var Di=xs.prototype,uo=Es.prototype,tr=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Re(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(tr);function co(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var ou=function(e){Re(t,e);function t(n){var o=e.call(this,n)||this;return o.type="ec-line",o}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tr},t.prototype.buildPath=function(n,o){co(o)?Di.buildPath.call(this,n,o):uo.buildPath.call(this,n,o)},t.prototype.pointAt=function(n){return co(this.shape)?Di.pointAt.call(this,n):uo.pointAt.call(this,n)},t.prototype.tangentAt=function(n){var o=this.shape,i=co(o)?[o.x2-o.x1,o.y2-o.y1]:uo.tangentAt.call(this,n);return Ia(i,i)},t}(As),fo=["fromSymbol","toSymbol"];function Ci(e){return"_"+e+"Type"}function Ii(e,t,n){var o=t.getItemVisual(n,e);if(!o||o==="none")return o;var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=$a(i),u=Pa(r||0,l);return o+l+u+(a||"")+(s||"")}function ki(e,t,n){var o=t.getItemVisual(n,e);if(!(!o||o==="none")){var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=$a(i),u=Pa(r||0,l),c=$o(o,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=e,c}}function iu(e){var t=new ou({name:"line",subPixelOptimize:!0});return Bo(t.shape,e),t}function Bo(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var au=function(e){Re(t,e);function t(n,o,i){var a=e.call(this)||this;return a._createLine(n,o,i),a}return t.prototype._createLine=function(n,o,i){var a=n.hostModel,r=n.getItemLayout(o),s=iu(r);s.shape.percent=0,Ns(s,{shape:{percent:1}},a,o),this.add(s),Fe(fo,function(l){var u=ki(l,n,o);this.add(u),this[Ci(l)]=Ii(l,n,o)},this),this._updateCommonStl(n,o,i)},t.prototype.updateData=function(n,o,i){var a=n.hostModel,r=this.childOfName("line"),s=n.getItemLayout(o),l={shape:{}};Bo(l.shape,s),Ms(r,l,a,o),Fe(fo,function(u){var c=Ii(u,n,o),d=Ci(u);if(this[d]!==c){this.remove(this.childOfName(u));var f=ki(u,n,o);this.add(f)}this[d]=c},this),this._updateCommonStl(n,o,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(n,o,i){var a=n.hostModel,r=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,d=i&&i.emphasisDisabled,f=i&&i.focus,h=i&&i.blurScope;if(!i||n.hasItemOption){var m=n.getItemModel(o),v=m.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),u=m.getModel(["select","lineStyle"]).getLineStyle(),d=v.get("disabled"),f=v.get("focus"),h=v.get("blurScope"),c=ka(m)}var b=n.getItemVisual(o,"style"),w=b.stroke;r.useStyle(b),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=s,r.ensureState("blur").style=l,r.ensureState("select").style=u,Fe(fo,function(R){var D=this.childOfName(R);if(D){D.setColor(w),D.style.opacity=b.opacity;for(var O=0;O<wi.length;O++){var T=wi[O],N=r.getState(T);if(N){var _=N.style||{},H=D.ensureState(T),K=H.style||(H.style={});_.stroke!=null&&(K[D.__isEmptyBrush?"stroke":"fill"]=_.stroke),_.opacity!=null&&(K.opacity=_.opacity)}}D.markRedraw()}},this);var g=a.getRawValue(o);Ds(this,c,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(R,D){return a.getFormattedLabel(R,D,n.dataType)}},inheritColor:w||"#000",defaultOpacity:b.opacity,defaultText:(g==null?n.getName(o):isFinite(g)?Cs(g):g)+""});var C=this.getTextContent();if(C){var y=c.normal;C.__align=C.style.align,C.__verticalAlign=C.style.verticalAlign,C.__position=y.get("position")||"middle";var M=y.get("distance");Ue(M)||(M=[M,M]),C.__labelDistance=M}this.setTextConfig({position:null,local:!0,inside:!1}),Is(this,f,h,d)},t.prototype.highlight=function(){ks(this)},t.prototype.downplay=function(){$s(this)},t.prototype.updateLayout=function(n,o){this.setLinePoints(n.getItemLayout(o))},t.prototype.setLinePoints=function(n){var o=this.childOfName("line");Bo(o.shape,n),o.dirty()},t.prototype.beforeUpdate=function(){var n=this,o=n.childOfName("fromSymbol"),i=n.childOfName("toSymbol"),a=n.getTextContent();if(!o&&!i&&(!a||a.ignore))return;for(var r=1,s=this.parent;s;)s.scaleX&&(r/=s.scaleX),s=s.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),f=Ps([],d,c);Ia(f,f);function h(N,_){var H=N.__specifiedRotation;if(H==null){var K=l.tangentAt(_);N.attr("rotation",(_===1?-1:1)*Math.PI/2-Math.atan2(K[1],K[0]))}else N.attr("rotation",H)}if(o&&(o.setPosition(c),h(o,0),o.scaleX=o.scaleY=r*u,o.markRedraw()),i&&(i.setPosition(d),h(i,1),i.scaleX=i.scaleY=r*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,v=void 0,b=a.__labelDistance,w=b[0]*r,g=b[1]*r,C=u/2,y=l.tangentAt(C),M=[y[1],-y[0]],R=l.pointAt(C);M[1]>0&&(M[0]=-M[0],M[1]=-M[1]);var D=y[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var O=-Math.atan2(y[1],y[0]);d[0]<c[0]&&(O=Math.PI+O),a.rotation=O}var T=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":T=-g,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":T=g,v="top";break;default:T=0,v="middle"}switch(a.__position){case"end":a.x=f[0]*w+d[0],a.y=f[1]*g+d[1],m=f[0]>.8?"left":f[0]<-.8?"right":"center",v=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":a.x=-f[0]*w+c[0],a.y=-f[1]*g+c[1],m=f[0]>.8?"right":f[0]<-.8?"left":"center",v=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=w*D+c[0],a.y=c[1]+T,m=y[0]<0?"right":"left",a.originX=-w*D,a.originY=-T;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=R[0],a.y=R[1]+T,m="center",a.originY=-T;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-w*D+d[0],a.y=d[1]+T,m=y[0]>=0?"right":"left",a.originX=w*D,a.originY=-T;break}a.scaleX=a.scaleY=r,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||m})}},t}($n),ru=function(){function e(t){this.group=new $n,this._LineCtor=t||au}return e.prototype.updateData=function(t){var n=this;this._progressiveEls=null;var o=this,i=o.group,a=o._lineData;o._lineData=t,a||i.removeAll();var r=$i(t);t.diff(a).add(function(s){n._doAdd(t,s,r)}).update(function(s,l){n._doUpdate(a,t,l,s,r)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(n,o){n.updateLayout(t,o)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=$i(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,n){this._progressiveEls=[];function o(s){!s.isGroup&&!su(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=n.getItemLayout(i);if(ho(a)){var r=new this._LineCtor(n,i,this._seriesScope);r.traverse(o),this.group.add(r),n.setItemGraphicEl(i,r),this._progressiveEls.push(r)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Ts(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,n,o){var i=t.getItemLayout(n);if(ho(i)){var a=new this._LineCtor(t,n,o);t.setItemGraphicEl(n,a),this.group.add(a)}},e.prototype._doUpdate=function(t,n,o,i,a){var r=t.getItemGraphicEl(o);if(!ho(n.getItemLayout(i))){this.group.remove(r);return}r?r.updateData(n,i,a):r=new this._LineCtor(n,i,a),n.setItemGraphicEl(i,r),this.group.add(r)},e}();function su(e){return e.animators&&e.animators.length>0}function $i(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ka(t)}}function Pi(e){return isNaN(e[0])||isNaN(e[1])}function ho(e){return e&&!Pi(e[0])&&!Pi(e[1])}var po=Un(),nr=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this.markerGroupMap=Po()},t.prototype.render=function(n,o,i){var a=this,r=this.markerGroupMap;r.each(function(s){po(s).keep=!1}),o.eachSeries(function(s){var l=xt.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,o,i)}),r.each(function(s){!po(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(n){po(n).keep=!0},t.prototype.toggleBlurSeries=function(n,o){var i=this;Fe(n,function(a){var r=xt.getMarkerModelFromSeries(a,i.type);if(r){var s=r.getData();s.eachItemGraphicEl(function(l){l&&(o?Os(l):Rs(l))})}})},t.type="marker",t}(zs),hn=Un(),lu=function(e,t,n,o){var i=e.getData(),a;if(Ue(o))a=o;else{var r=o.type;if(r==="min"||r==="max"||r==="average"||r==="median"||o.xAxis!=null||o.yAxis!=null){var s=void 0,l=void 0;if(o.yAxis!=null||o.xAxis!=null)s=t.getAxis(o.yAxis!=null?"y":"x"),l=Ls(o.yAxis,o.xAxis);else{var u=Ja(o,i,t,e);s=u.valueAxis;var c=Bs(i,u.valueDataDim);l=ri(i,c,r)}var d=s.dim==="x"?0:1,f=1-d,h=ni(o),m={coord:[]};h.type=null,h.coord=[],h.coord[f]=-1/0,m.coord[f]=1/0;var v=n.get("precision");v>=0&&Vs(l)&&(l=+l.toFixed(Math.min(v,20))),h.coord[d]=m.coord[d]=l,a=[h,m,{type:r,valueIndex:o.valueIndex,value:l}]}else a=[]}var b=[zo(e,a[0]),zo(e,a[1]),Pt({},a[2])];return b[2].type=b[2].type||null,Si(b[2],b[0]),Si(b[2],b[1]),b};function Rn(e){return!isNaN(e)&&!isFinite(e)}function Ti(e,t,n,o){var i=1-e,a=o.dimensions[e];return Rn(t[i])&&Rn(n[i])&&t[e]===n[e]&&o.getAxis(a).containData(t[e])}function uu(e,t){if(e.type==="cartesian2d"){var n=t[0].coord,o=t[1].coord;if(n&&o&&(Ti(1,n,o,e)||Ti(0,n,o,e)))return!0}return Lo(e,t[0])&&Lo(e,t[1])}function vo(e,t,n,o,i){var a=o.coordinateSystem,r=e.getItemModel(t),s,l=Tt(r.get("x"),i.getWidth()),u=Tt(r.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(o.getMarkerPosition)s=o.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,d=e.get(c[0],t),f=e.get(c[1],t);s=a.dataToPoint([d,f])}if(Hs(a,"cartesian2d")){var h=a.getAxis("x"),m=a.getAxis("y"),c=a.dimensions;Rn(e.get(c[0],t))?s[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):Rn(e.get(c[1],t))&&(s[1]=m.toGlobalCoord(m.getExtent()[n?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var cu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,i){o.eachSeries(function(a){var r=xt.getMarkerModelFromSeries(a,"markLine");if(r){var s=r.getData(),l=hn(r).from,u=hn(r).to;l.each(function(c){vo(l,c,!0,a,i),vo(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(n,o,i,a){var r=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new ru);this.group.add(c.group);var d=du(r,n,o),f=d.from,h=d.to,m=d.line;hn(o).from=f,hn(o).to=h,o.setData(m);var v=o.get("symbol"),b=o.get("symbolSize"),w=o.get("symbolRotate"),g=o.get("symbolOffset");Ue(v)||(v=[v,v]),Ue(b)||(b=[b,b]),Ue(w)||(w=[w,w]),Ue(g)||(g=[g,g]),d.from.each(function(y){C(f,y,!0),C(h,y,!1)}),m.each(function(y){var M=m.getItemModel(y).getModel("lineStyle").getLineStyle();m.setItemLayout(y,[f.getItemLayout(y),h.getItemLayout(y)]),M.stroke==null&&(M.stroke=f.getItemVisual(y,"style").fill),m.setItemVisual(y,{fromSymbolKeepAspect:f.getItemVisual(y,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(y,"symbolOffset"),fromSymbolRotate:f.getItemVisual(y,"symbolRotate"),fromSymbolSize:f.getItemVisual(y,"symbolSize"),fromSymbol:f.getItemVisual(y,"symbol"),toSymbolKeepAspect:h.getItemVisual(y,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(y,"symbolOffset"),toSymbolRotate:h.getItemVisual(y,"symbolRotate"),toSymbolSize:h.getItemVisual(y,"symbolSize"),toSymbol:h.getItemVisual(y,"symbol"),style:M})}),c.updateData(m),d.line.eachItemGraphicEl(function(y){To(y).dataModel=o,y.traverse(function(M){To(M).dataModel=o})});function C(y,M,R){var D=y.getItemModel(M);vo(y,M,R,n,a);var O=D.getModel("itemStyle").getItemStyle();O.fill==null&&(O.fill=Ta(l,"color")),y.setItemVisual(M,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:ln(D.get("symbolOffset",!0),g[R?0:1]),symbolRotate:ln(D.get("symbolRotate",!0),w[R?0:1]),symbolSize:ln(D.get("symbolSize"),b[R?0:1]),symbol:ln(D.get("symbol",!0),v[R?0:1]),style:O})}this.markKeep(c),c.group.silent=o.get("silent")||n.get("silent")},t.type="markLine",t}(nr);function du(e,t,n){var o;e?o=pt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return Pt(Pt({},c),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var i=new xn(o,n),a=new xn(o,n),r=new xn([],n),s=pt(n.get("data"),Ze(lu,t,e,n));e&&(s=Oa(s,Ze(uu,e)));var l=er(!!e,o);return i.initData(pt(s,function(u){return u[0]}),null,l),a.initData(pt(s,function(u){return u[1]}),null,l),r.initData(pt(s,function(u){return u[2]})),r.hasItemOption=!0,{from:i,to:a,line:r}}function fu(e){e.registerComponentModel(Jl),e.registerComponentView(cu),e.registerPreprocessor(function(t){ja(t.series,"markLine")&&(t.markLine=t.markLine||{})})}Wt(fu);var hu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,i){return new t(n,o,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(xt);function Oi(e,t,n){var o=t.coordinateSystem;e.each(function(i){var a=e.getItemModel(i),r,s=Tt(a.get("x"),n.getWidth()),l=Tt(a.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(l))r=[s,l];else if(t.getMarkerPosition)r=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(o){var u=e.get(o.dimensions[0],i),c=e.get(o.dimensions[1],i);r=o.dataToPoint([u,c])}isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),e.setItemLayout(i,r)})}var pu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,i){o.eachSeries(function(a){var r=xt.getMarkerModelFromSeries(a,"markPoint");r&&(Oi(r.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(n,o,i,a){var r=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new ol),d=vu(r,n,o);o.setData(d),Oi(o.getData(),n,a),d.each(function(f){var h=d.getItemModel(f),m=h.getShallow("symbol"),v=h.getShallow("symbolSize"),b=h.getShallow("symbolRotate"),w=h.getShallow("symbolOffset"),g=h.getShallow("symbolKeepAspect");if(tt(m)||tt(v)||tt(b)||tt(w)){var C=o.getRawValue(f),y=o.getDataParams(f);tt(m)&&(m=m(C,y)),tt(v)&&(v=v(C,y)),tt(b)&&(b=b(C,y)),tt(w)&&(w=w(C,y))}var M=h.getModel("itemStyle").getItemStyle(),R=Ta(l,"color");M.fill||(M.fill=R),d.setItemVisual(f,{symbol:m,symbolSize:v,symbolRotate:b,symbolOffset:w,symbolKeepAspect:g,style:M})}),c.updateData(d),this.group.add(c.group),d.eachItemGraphicEl(function(f){f.traverse(function(h){To(h).dataModel=o})}),this.markKeep(c),c.group.silent=o.get("silent")||n.get("silent")},t.type="markPoint",t}(nr);function vu(e,t,n){var o;e?o=pt(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return Pt(Pt({},l),{name:s,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var i=new xn(o,n),a=pt(n.get("data"),Ze(zo,t));e&&(a=Oa(a,Ze(Lo,e)));var r=er(!!e,o);return i.initData(a,null,r),i}function gu(e){e.registerComponentModel(hu),e.registerComponentView(pu),e.registerPreprocessor(function(t){ja(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}Wt(gu);const mu=ve({name:"RateChart"}),pn=ve({...mu,props:{value:{type:Object,default:()=>({x:[],y:[]}),required:!1},color:{type:String,default:"#975fe4"},type:{type:String,default:"line"}},setup(e){const t=Zn(),{tl:n}=ht("Base"),o=(f,h)=>{const m=document.createElement("div");return m.className="rate-chart-tooltip",h===void 0?m.innerHTML=`<p class="no-data">${n("noData")}</p>`:m.innerHTML=`
    <p class="x-value">${f}</p>
    <div class="tooltip-body">
      <i class="badge"></i>
      <p class="num">${h}</p>
    </div>`,m},i=e,a=oe();let r=null;const s=mt({color:[i.color],grid:{left:0,top:0,right:0,bottom:0},tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"none"},formatter:f=>{if(!f[0])return"";const{axisValue:h,value:m}=f[0];return o(h,m)}},xAxis:{type:"category",data:i.value.x,triggerEvent:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},series:[]});ye(()=>JSON.stringify(i.value),()=>{c()}),ye(()=>t.state.leftBarCollapse,()=>{setTimeout(c,500)});const{addListener:l,removeListener:u}=Va(),c=async()=>{const{color:f,type:h}=i;s.series=[{data:i.value.y,smooth:!0,type:h,symbolSize:0,lineStyle:{color:f},label:{show:!1}}],r==null||r.setOption({...s})},d=async()=>{r&&(u(),r.dispose());const f=a.value;f&&(r=Ra(f),l(r))};return Le(()=>{d(),c()}),(f,h)=>(q(),le("div",{ref_key:"chartEl",ref:a,class:"rate-chart"},null,512))}});var yu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.inside",t.defaultOption=za(On.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(On),_u=function(e){Re(t,e);function t(n){var o=e.call(this)||this;o._zr=n;var i=De(o._mousedownHandler,o),a=De(o._mousemoveHandler,o),r=De(o._mouseupHandler,o),s=De(o._mousewheelHandler,o),l=De(o._pinchHandler,o);return o.enable=function(u,c){this.disable(),this._opt=Gs(ni(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",r)),(u===!0||u==="scale"||u==="zoom")&&(n.on("mousewheel",s),n.on("pinch",l))},o.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",r),n.off("mousewheel",s),n.off("pinch",l)},o}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(n){this.pointerChecker=n},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(n){if(!xi(n)){for(var o=n.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!Nn("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||Ai(this._zr,"globalPan"))){var o=n.offsetX,i=n.offsetY,a=this._x,r=this._y,s=o-a,l=i-r;this._x=o,this._y=i,this._opt.preventDefaultMouseMove&&Pn(n.event),or(this,"pan","moveOnMouseMove",n,{dx:s,dy:l,oldX:a,oldY:r,newX:o,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(n){xi(n)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(n){var o=Nn("zoomOnMouseWheel",n,this._opt),i=Nn("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,r=Math.abs(a),s=n.offsetX,l=n.offsetY;if(!(a===0||!o&&!i)){if(o){var u=r>3?1.4:r>1?1.2:1.1,c=a>0?u:1/u;go(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),f=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);go(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(n){if(!Ai(this._zr,"globalPan")){var o=n.pinchScale>1?1.1:1/1.1;go(this,"zoom",null,n,{scale:o,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},t}(Fs);function go(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(Pn(o.event),or(e,t,n,o,i))}function or(e,t,n,o,i){i.isAvailableBehavior=De(Nn,null,n,o),e.trigger(t,i)}function Nn(e,t,n){var o=n[e];return!e||o&&(!La(o)||t.event[o+"Key"])}var si=Un();function bu(e,t,n){si(e).coordSysRecordMap.each(function(o){var i=o.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)})}function wu(e,t){for(var n=si(e).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var a=o[i],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||ir(n,r))}}}function ir(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function Su(e,t){var n={model:t,containsPoint:Ze(Eu,t),dispatchAction:Ze(xu,e),dataZoomInfoMap:null,controller:null},o=n.controller=new _u(e.getZr());return Fe(["pan","zoom","scrollMove"],function(i){o.on(i,function(a){var r=[];n.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!s.model.get("disabled",!0)&&u&&r.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),r.length&&n.dispatchAction(r)})}),n}function xu(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Eu(e,t,n,o){return e.coordinateSystem.containPoint([n,o])}function Au(e){var t,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each(function(a){var r=a.model,s=r.get("disabled",!0)?!1:r.get("zoomLock",!0)?"move":!0;o[n+s]>o[n+t]&&(t=s),i=i&&r.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Nu(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,n){var o=si(n),i=o.coordSysRecordMap||(o.coordSysRecordMap=Po());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var r=Wa(a);Fe(r.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,Su(n,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=Po());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var r=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){ir(i,a);return}var c=Au(l);r.enable(c.controlType,c.opt),r.setPointerChecker(a.containsPoint),Ba(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Mu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return t.prototype.render=function(n,o,i){if(e.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),bu(i,n,{pan:De(mo.pan,this),zoom:De(mo.zoom,this),scrollMove:De(mo.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){wu(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(qa),mo={zoom:function(e,t,n,o){var i=this.range,a=i.slice(),r=e.axisModels[0];if(r){var s=yo[t](null,[o.originX,o.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/o.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(ai(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Ri(function(e,t,n,o,i,a){var r=yo[o]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength}),scrollMove:Ri(function(e,t,n,o,i,a){var r=yo[o]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n);return r.signal*(e[1]-e[0])*a.scrollDelta})};function Ri(e){return function(t,n,o,i){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s){var l=e(r,s,t,n,o,i);if(ai(l,r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1])return r}}}var yo={grid:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),n.mainType==="radiusAxis"?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,o,i){var a=n.axis,r=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}};function Du(e){Qa(e),e.registerComponentModel(yu),e.registerComponentView(Mu),Nu(e)}var Cu=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=za(On.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(On),Vt=En,zi=7,Iu=1,_o=30,ku=7,Ht="horizontal",Li="vertical",$u=5,Pu=["line","bar","candlestick","scatter"],Tu={easing:"cubicOut",duration:100,delay:0},Ou=function(e){Re(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return t.prototype.init=function(n,o){this.api=o,this._onBrush=De(this._onBrush,this),this._onBrushEnd=De(this._onBrushEnd,this)},t.prototype.render=function(n,o,i,a){if(e.prototype.render.apply(this,arguments),Ba(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Ys(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new $n;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(o),this._positionGroup()},t.prototype._resetLocation=function(){var n=this.dataZoomModel,o=this.api,i=n.get("brushSelect"),a=i?ku:0,r=this._findCoordRect(),s={width:o.getWidth(),height:o.getHeight()},l=this._orient===Ht?{right:s.width-r.x-r.width,top:s.height-_o-zi-a,width:r.width,height:_o}:{right:zi,top:r.y,width:_o,height:r.height},u=Xs(n.option);Fe(["right","top","width","height"],function(d){u[d]==="ph"&&(u[d]=l[d])});var c=Us(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===Li&&this._size.reverse()},t.prototype._positionGroup=function(){var n=this.group,o=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),r=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===Ht&&!r?{scaleY:l?1:-1,scaleX:1}:i===Ht&&r?{scaleY:l?1:-1,scaleX:-1}:i===Li&&!r?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=n.getBoundingRect([s]);n.x=o.x-u.x,n.y=o.y-u.y,n.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var n=this.dataZoomModel,o=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new Vt({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var r=new Vt({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:De(this._onClickPanel,this)}),s=this.api.getZr();a?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(r)},t.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var o=this._size,i=this._shadowSize||[],a=n.series,r=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&r.getDimensionInfo(s)?a.getShadowDim():n.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(r!==this._shadowData||l!==this._shadowDim||o[0]!==i[0]||o[1]!==i[1]){var d=r.getDataExtent(l),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var h=[0,o[1]],m=[0,o[0]],v=[[o[0],0],[0,0]],b=[],w=m[1]/(r.count()-1),g=0,C=Math.round(r.count()/o[0]),y;r.each([l],function(T,N){if(C>0&&N%C){g+=w;return}var _=T==null||isNaN(T)||T==="",H=_?0:Je(T,d,h,!0);_&&!y&&N?(v.push([v[v.length-1][0],0]),b.push([b[b.length-1][0],0])):!_&&y&&(v.push([g,0]),b.push([g,0])),v.push([g,H]),b.push([g,H]),g+=w,y=_}),u=this._shadowPolygonPts=v,c=this._shadowPolylinePts=b}this._shadowData=r,this._shadowDim=l,this._shadowSize=[o[0],o[1]];var M=this.dataZoomModel;function R(T){var N=M.getModel(T?"selectedDataBackground":"dataBackground"),_=new $n,H=new el({shape:{points:u},segmentIgnoreThreshold:1,style:N.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),K=new tl({shape:{points:c},segmentIgnoreThreshold:1,style:N.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return _.add(H),_.add(K),_}for(var D=0;D<3;D++){var O=R(D===1);this._displayables.sliderGroup.add(O),this._displayables.dataShadowSegs.push(O)}},t.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,o=n.get("showDataShadow");if(o!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(r,s){var l=n.getAxisProxy(r,s).getTargetSeriesModels();Fe(l,function(u){if(!i&&!(o!==!0&&ko(Pu,u.get("type"))<0)){var c=a.getComponent(El(r),s).axis,d=Ru(r),f,h=u.coordinateSystem;d!=null&&h.getOtherAxis&&(f=h.getOtherAxis(c).inverse),d=u.getData().mapDimension(d),i={thisAxis:c,series:u,thisDim:r,otherDim:d,otherAxisInverse:f}}},this)},this),i}},t.prototype._renderHandle=function(){var n=this.group,o=this._displayables,i=o.handles=[null,null],a=o.handleLabels=[null,null],r=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,d=l.get("brushSelect"),f=o.filler=new Vt({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});r.add(f),r.add(new Vt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Iu,fill:"rgba(0,0,0,0)"}})),Fe([0,1],function(C){var y=l.get("handleIcon");!Zs[y]&&y.indexOf("path://")<0&&y.indexOf("image://")<0&&(y="path://"+y);var M=$o(y,-1,0,2,2,null,!0);M.attr({cursor:Bi(this._orient),draggable:!0,drift:De(this._onDragMove,this,C),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1),z2:5});var R=M.getBoundingRect(),D=l.get("handleSize");this._handleHeight=Tt(D,this._size[1]),this._handleWidth=R.width/R.height*this._handleHeight,M.setStyle(l.getModel("handleStyle").getItemStyle()),M.style.strokeNoScale=!0,M.rectHover=!0,M.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ks(M);var O=l.get("handleColor");O!=null&&(M.style.fill=O),r.add(i[C]=M);var T=l.getModel("textStyle");n.add(a[C]=new Ws({silent:!0,invisible:!0,style:qs(T,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:T.getTextColor(),font:T.getFont()}),z2:10}))},this);var h=f;if(d){var m=Tt(l.get("moveHandleSize"),s[1]),v=o.moveHandle=new En({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:m}}),b=m*.8,w=o.moveHandleIcon=$o(l.get("moveHandleIcon"),-b/2,-b/2,b,b,"#fff",!0);w.silent=!0,w.y=s[1]+m/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var g=Math.min(s[1]/2,Math.max(m,10));h=o.moveZone=new En({invisible:!0,shape:{y:s[1]-g,height:m+g}}),h.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),r.add(v),r.add(w),r.add(h)}h.attr({draggable:!0,cursor:Bi(this._orient),drift:De(this._onDragMove,this,"all"),ondragstart:De(this._showDataInfo,this,!0),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[Je(n[0],[0,100],o,!0),Je(n[1],[0,100],o,!0)]},t.prototype._updateInterval=function(n,o){var i=this.dataZoomModel,a=this._handleEnds,r=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];ai(o,a,r,i.get("zoomLock")?"all":n,s.minSpan!=null?Je(s.minSpan,l,r,!0):null,s.maxSpan!=null?Je(s.maxSpan,l,r,!0):null);var u=this._range,c=this._range=un([Je(a[0],r,l,!0),Je(a[1],r,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},t.prototype._updateView=function(n){var o=this._displayables,i=this._handleEnds,a=un(i.slice()),r=this._size;Fe([0,1],function(h){var m=o.handles[h],v=this._handleHeight;m.attr({scaleX:v/2,scaleY:v/2,x:i[h]+(h?-1:1),y:r[1]/2-v/2})},this),o.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:r[1]});var s={x:a[0],width:a[1]-a[0]};o.moveHandle&&(o.moveHandle.setShape(s),o.moveZone.setShape(s),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=o.dataShadowSegs,u=[0,a[0],a[1],r[0]],c=0;c<l.length;c++){var d=l[c],f=d.getClipPath();f||(f=new En,d.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:r[1]})}this._updateDataInfo(n)},t.prototype._updateDataInfo=function(n){var o=this.dataZoomModel,i=this._displayables,a=i.handleLabels,r=this._orient,s=["",""];if(o.get("showDetail")){var l=o.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,d=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],u),this._formatLabel(d[1],u)]}}var f=un(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(m){var v=Qs(i.handles[m].parent,this.group),b=js(m===0?"right":"left",v),w=this._handleWidth/2+$u,g=Ei([f[m]+(m===0?-w:w),this._size[1]/2],v);a[m].setStyle({x:g[0],y:g[1],verticalAlign:r===Ht?"middle":b,align:r===Ht?b:"center",text:s[m]})}},t.prototype._formatLabel=function(n,o){var i=this.dataZoomModel,a=i.get("labelFormatter"),r=i.get("labelPrecision");(r==null||r==="auto")&&(r=o.getPixelPrecision());var s=n==null||isNaN(n)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(r,20));return tt(a)?a(n,s):La(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(n){n=this._dragging||n;var o=this._displayables,i=o.handleLabels;i[0].attr("invisible",!n),i[1].attr("invisible",!n),o.moveHandle&&this.api[n?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},t.prototype._onDragMove=function(n,o,i,a){this._dragging=!0,Pn(a.event);var r=this._displayables.sliderGroup.getLocalTransform(),s=Ei([o,i],r,!0),l=this._updateInterval(n,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(n){var o=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>o[0]||i[1]<0||i[1]>o[1])){var a=this._handleEnds,r=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-r);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(n){var o=n.offsetX,i=n.offsetY;this._brushStart=new Js(o,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(n){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var i=o.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var r=this._getViewExtent(),s=[0,100];this._range=un([Je(i.x,r,s,!0),Je(i.x+i.width,r,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(n){this._brushing&&(Pn(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},t.prototype._updateBrushRect=function(n,o){var i=this._displayables,a=this.dataZoomModel,r=i.brushRect;r||(r=i.brushRect=new Vt({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(r)),r.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(n,o),c=l.transformCoordToLocal(s.x,s.y),d=this._size;u[0]=Math.max(Math.min(d[0],u[0]),0),r.setShape({x:c[0],y:0,width:u[0]-c[0],height:d[1]})},t.prototype._dispatchZoomAction=function(n){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?Tu:null,start:o[0],end:o[1]})},t.prototype._findCoordRect=function(){var n,o=Wa(this.dataZoomModel).infoList;if(!n&&o.length){var i=o[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),r=this.api.getHeight();n={x:a*.2,y:r*.2,width:a*.6,height:r*.6}}return n},t.type="dataZoom.slider",t}(qa);function Ru(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function Bi(e){return e==="vertical"?"ns-resize":"ew-resize"}function zu(e){e.registerComponentModel(Cu),e.registerComponentView(Ou),Qa(e)}function Lu(e){Wt(Du),Wt(zu)}Wt(Lu);const Bu=["id"],Vu=ve({name:"PolylineChart"}),bo=ve({...Vu,props:{chartId:{type:String,required:!0},yTitle:{type:Array,default:()=>[""]},chartColors:{type:Array,default:()=>[]},chartData:{type:Array,default:()=>[{xData:[],yData:[]}]},height:{type:String,default:"190px"},isInstantaneousValue:{type:Boolean},unitTextKey:{type:[String,Array]},showFullScreen:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,o=Zn(),i=J(()=>o.state.theme),a={colorAxisLine:"#757575",colorAxisLabel:"#757575"},r=oe([]),s=il(void 0),{addListener:l}=Va();t({chart:s}),ye(()=>n.chartData,()=>{C()}),Le(()=>{C()});const u=-1;let c={};const d=(y,M,R)=>{y.forEach((D,O)=>{D===u&&(c[R]||(c[R]=[]),c[R].push(M[O]))})},f=y=>y.map(M=>M===u?0:M),h=()=>{r.value=[],c={};for(let y=0;y<n.yTitle.length;y+=1){const M=y%6===0&&y!==0?n.chartColors[6]:n.chartColors[y%6];d(n.chartData[y].yData,n.chartData[y].xData,n.yTitle[y]),r.value.push({name:n.yTitle[y],type:"line",smooth:!0,symbolSize:5,showSymbol:!1,data:f(n.chartData[y].yData),step:!1,lineStyle:{width:2},areaStyle:{color:new nl(0,0,0,1,[{offset:0,color:M},{offset:1,color:`${M}00`}]),opacity:.2}})}},m=(y,M="YYYY/MM/DD HH:mm")=>Ga(parseInt(y)).format(M),v=(y,M,R)=>{const D=document.createElement("div");return D.className="tooltip-data-item",D.innerHTML=`
  <div>
    <i class="badge" style="background-color:${M}"></i>
    <span>${y}</span>
  </div>
  ${ct.isUndefined(R)?"":`<p class="num">${R}</p>`}`,D},b=(y,M)=>{const R=document.createElement("div");return R.innerHTML=`
  <div class="polyline-chart-tooltip">
    <p class="x-value">${m(y,"MM/DD HH:mm:ss")}</p>
    <div class="tooltip-body">
      ${M.map(D=>D.outerHTML).join("")}
    </div>
  </div>
  `,R},{t:w}=ht("Dashboard"),g=y=>{var R,D;const M=((D=(R=n.chartData)==null?void 0:R[0])==null?void 0:D.xData)||[];if(y===0&&!ct.isUndefined(M[0])&&!ct.isUndefined(M[1]))return M[1]-M[0];if(!ct.isUndefined(M[y])&&!ct.isUndefined(M[y-1]))return M[y]-M[y-1]},C=()=>{var R;h();const y=document.getElementById(n.chartId);s.value||(s.value=Ra(y,i.value==="dark"?"dark":"light"),l(s.value));const M={backgroundColor:"transparent",color:n.chartColors,grid:{top:"5%",right:30,bottom:"3%",left:24,containLabel:!0},legend:n.yTitle.length>1?{top:4,data:n.yTitle}:void 0,toolbox:{feature:{saveAsImage:{show:n.showFullScreen,title:"",name:"emqx-dashboard",emphasis:{iconStyle:{borderColor:"#044cb9"}}},dataZoom:{show:n.showFullScreen,yAxisIndex:!1,title:"",emphasis:{iconStyle:{borderColor:"#044cb9"}}}}},tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"cross",label:{show:n.showFullScreen,formatter(D){const{value:O,axisDimension:T}=D;return T==="x"?`${m(O,"MM/DD")} ${m(O,"HH:mm")}`.trim():T==="y"?`${Math.round(O)}`.trim():""}}},formatter:D=>{if(!D[0])return"";const O=D.reduce((T,{axisValue:N,color:_,seriesName:H,seriesIndex:K,value:E,dataIndex:P})=>{var L;let k=E;const z=(L=c[H])==null?void 0:L.includes(N);if(z&&(k="NaN"),!n.unitTextKey)T.push(v(H,_,k));else{let V="";const F=g(P),X=Array.isArray(n.unitTextKey)?n.unitTextKey[K]:n.unitTextKey;!n.isInstantaneousValue&&F?V=w(X,{interval:F/1e3,n:E}):V=z?w(X,{n:0}):w(X,{n:E}),T.push(v(V,_))}return T},[]);return b(D[0].axisValue,O)}},dataZoom:n.showFullScreen?[{type:"inside"},{type:"slider",showDetail:!1}]:void 0,xAxis:{type:"category",boundaryGap:!1,data:n.chartData[0].xData,axisLine:{lineStyle:{color:a.colorAxisLine}},axisLabel:{hideOverlap:!0,showMinLabel:!0,color:a.colorAxisLabel,formatter(D){return`${m(D,"MM/DD")} ${m(D,"HH:mm")}`}},splitLine:{show:n.showFullScreen}},yAxis:{type:"value",axisLine:{lineStyle:{color:a.colorAxisLine}},splitLine:{show:n.showFullScreen},axisLabel:{color:a.colorAxisLabel},minInterval:1},series:r.value};(R=s.value)==null||R.setOption(M)};return(y,M)=>(q(),le("div",{id:e.chartId,style:qe({height:e.height,width:"100%"})},null,12,Bu))}}),Hu={class:"info-bar space-between"},Gu={class:"block-title"},Fu={key:0,class:"chart-wrapper"},Yu=["id"],Xu={key:1,class:"chart-wrapper"},Uu=["id"],Zu={class:"dropped-desc"},Ku={class:"dropped-desc-hd"},Wu=ve({__name:"DroppedDetailDialog",props:{modelValue:{type:Boolean},metrics:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,i=J({get:()=>n.modelValue,set:N=>{o("update:modelValue",N)}}),{t:a,tl:r}=ht("Dashboard"),{filterMetrics:s,initChart:l,getBarChartOptions:u,getPieChartOptions:c}=Al(),d=J(()=>n.metrics[Ni.MessagesDropped]),{metricsKeyReg:f,itemStyle:h,messageDroppedDesc:m}=Nl(d),v=J(()=>s(n.metrics,f)),b=oe("bar"),w=oe(),g=()=>u(v.value,h.value),C=()=>{l(w.value).setOption(g())},y=oe(),M=()=>c(v.value,h.value),R=()=>{l(y.value).setOption(M())},D=async()=>{await Ve(),b.value==="bar"?C():R()};ye(i,N=>{N?D():b.value="bar"});const O=al(),T=()=>O.push({name:"dropped-analysis"});return(N,_)=>{const H=Se("el-switch"),K=Se("el-table-column"),E=Pl,P=Se("el-table"),k=Se("el-button"),z=Se("el-dialog");return q(),$e(z,{modelValue:S(i),"onUpdate:modelValue":_[1]||(_[1]=L=>Be(i)?i.value=L:null),width:"800px",top:"52px",class:"dropped-detail-dialog"},{footer:fe(()=>[Q(k,{onClick:T},{default:fe(()=>[_t(te(S(r)("viewDetailAnalysis")),1)]),_:1})]),default:fe(()=>[I("div",Hu,[I("div",Gu,[I("label",null,te(S(r)("totalDroppedMessages"))+": ",1),I("span",null,te(N.metrics[("MetricKey"in N?N.MetricKey:S(Ni)).MessagesDropped]),1)]),I("div",null,[I("span",null,te(S(r)("bar")),1),Q(H,{modelValue:S(b),"onUpdate:modelValue":_[0]||(_[0]=L=>Be(b)?b.value=L:null),"inactive-value":"bar","active-value":"pie",onChange:D},null,8,["modelValue","inactive-value","active-value"]),I("span",null,te(S(r)("pie")),1)])]),S(b)==="bar"?(q(),le("div",Fu,[I("div",{class:"chart",ref_key:"BarChartEle",ref:w,id:("createRandomString"in N?N.createRandomString:S(Oo))()},null,8,Yu)])):(q(),le("div",Xu,[I("div",{class:"chart",ref_key:"PieChartEle",ref:y,id:("createRandomString"in N?N.createRandomString:S(Oo))()},null,8,Uu)])),I("div",Zu,[I("div",Ku,te(S(r)("dropReasonsTitle")),1),Q(P,{data:S(m)},{default:fe(()=>[Q(K,{prop:"name",label:S(a)("Clients.reason")},null,8,["label"]),Q(K,{prop:"desc",label:S(a)("Base.description")},null,8,["label"]),Q(K,{prop:"impact",label:S(r)("causeAnalysis")},{default:fe(({row:L})=>[Q(E,{content:L.impact},null,8,["content"])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1},8,["modelValue"])}}}),qu={class:"polyline-cards"},Qu={class:"chart-option"},ju={class:"block"},Ju={class:"card-title"},ec={class:"icons-container"},tc={class:"block"},nc={class:"card-title"},oc={class:"icons-container"},ic={class:"full-screen-header"},ac=["id"],rc=ve({name:"PolylineCards"}),sc=ve({...rc,setup(e){const{t:n}=Fa(),{tl:o}=ht("Dashboard"),i=oe(3600),a=oe(!1),r=oe(!1),s=oe(null),l=[{label:o("lastHour"),value:3600},{label:o("last6Hours"),value:21600},{label:o("last12Hours"),value:43200},{label:o("lastDay"),value:86400},{label:o("last3Days"),value:259200},{label:o("last7Days"),value:604800}];ye(i,()=>{K()});const u=Y=>Array.from({length:Y},()=>({xData:[],yData:[]})),c=mt({[me.Received]:n("Dashboard.messageIn"),[me.Sent]:n("Dashboard.messageOut"),[me.Dropped]:n("Dashboard.messageDrop")}),d=mt({[me.Connections]:n("Dashboard.currentConnection"),[me.Topics]:n("Dashboard.topics"),[me.Subscriptions]:n("Dashboard.Subscription")}),f={[me.Received]:"Dashboard.messagesUnit",[me.Sent]:"Dashboard.messagesUnit",[me.Dropped]:"Dashboard.messagesUnit",[me.Connections]:"Dashboard.connectionsUnit",[me.LiveConnections]:"Dashboard.liveConnectionsUnit",[me.Topics]:"Dashboard.topicsUnit",[me.Subscriptions]:"Dashboard.subscriptionsUnit"},h=mt({[me.Connections]:u(1),[me.LiveConnections]:u(1),[me.Topics]:u(1),[me.Subscriptions]:u(1),[me.Received]:u(1),[me.Sent]:u(1),[me.Dropped]:u(1),[me.SentBytes]:u(1),[me.ReceivedBytes]:u(1)}),m=mt([me.Dropped,me.Connections,me.LiveConnections,me.Topics,me.Subscriptions,me.Sent,me.Received]),v=oe(null),b=oe(""),w=J(()=>{var Y;return((Y=v.value)==null?void 0:Y.value)===me.Connections}),g=J(()=>{const Y=v.value?v.value.text:"";return w.value?[Y,n("Dashboard.liveConnections")]:[Y]}),C=J(()=>{const Y=v.value?h[v.value.value]:[];return w.value?[Y[0],h[me.LiveConnections][0]]:Y}),y=J(()=>{var U;const Y=f[((U=v.value)==null?void 0:U.value)??""];return w.value?[Y,f[me.LiveConnections]]:Y}),M=J(()=>{var U;const Y=[...T.value[((U=v.value)==null?void 0:U.value)??""]];return w.value&&Y.splice(1,0,"#308FFF"),Y}),R=J(()=>Object.entries(c).map(([Y,U])=>({text:U,value:Y}))),D=J(()=>Object.entries(d).map(([Y,U])=>({text:U,value:Y}))),O=Y=>{const U=["#1695EF","#00B48F","#757789","#6461FF","#D56F00","#66CFDA"],pe=[...U.splice(0,1,U[Y])];return U.splice(Y,1,pe[0]),U},T=J(()=>({received:O(0),sent:O(1),dropped:O(2),connections:O(3),topics:O(4),subscriptions:O(5)})),{syncPolling:N}=oi(),_=Y=>{Y.forEach(U=>{m.forEach(pe=>{const ue=h[pe][0];ue.xData.push(U.time_stamp),ue.yData.push(U[pe])})})},H=Y=>{m.forEach(U=>{h[U]=u(1)}),_(Y)},K=async()=>{try{r.value=!0;const Y=await Ml(i.value);return H(Y),r.value=!1,Promise.resolve()}catch{return r.value=!1,Promise.reject()}},{operationWarning:E}=Tl(),P=async()=>{let Y=0;K();const U=async()=>{Y++,!(Y>5)&&(await Ya(4e3),await K(),U())};U()},k=async()=>{try{await E(o("confirmResetMonitorData")),await Dl(),rl.success(n("RuleEngine.resetSuccessfully")),P()}catch{}},z=Y=>{a.value=!0,v.value=Y;const U=[me.Received,me.Dropped,me.Sent].includes(Y.value)?"Dashboard.chartMessages":"Dashboard.chartConnection";b.value=n(U,{type:Y.text})},L=async()=>{var Y,U;await Ve(),(U=(Y=s.value)==null?void 0:Y.chart)==null||U.resize()},V=Y=>{const U=Y.filter(ee=>ct.isNumber(ee)&&ee!==-1);U.length;const pe=Math.max(...U),ue=Math.min(...U);U.reduce((ee,ie)=>ee+ie,0);const he=Y[Y.length-1];return{max:pe,min:ue,last:he}},F=Y=>Y.map(U=>V(U.yData)),X=oe(!1),ce=oe({}),ne=()=>{X.value=!0},W=async()=>{try{return ce.value=await Cl(),Promise.resolve()}catch{return Promise.reject()}};return N(async()=>{try{return await Promise.allSettled([K(),W()]),Promise.resolve()}catch{return Promise.reject()}},6e4),(Y,U)=>{const pe=Se("el-option"),ue=Se("el-select"),he=Se("el-button"),ee=Se("el-tooltip"),ie=Se("el-icon"),Z=Se("el-card"),p=Se("el-col"),x=Se("el-row"),$=xl,A=Se("el-table-column"),G=Se("el-table"),re=Se("el-dialog");return q(),le("div",qu,[I("div",Qu,[Q(ue,{class:"interval-select",modelValue:S(i),"onUpdate:modelValue":U[0]||(U[0]=B=>Be(i)?i.value=B:null)},{default:fe(()=>[(q(),le(Pe,null,ot(l,B=>Q(pe,{key:B.label,label:B.label,value:B.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Q(ee,{content:S(o)("resetMonitorData"),placement:"top"},{default:fe(()=>[Q(he,{class:"icon-button",icon:S(Ol),onClick:k},null,8,["icon"])]),_:1},8,["content"])]),I("div",ju,[Q(x,{gutter:26},{default:fe(()=>[(q(!0),le(Pe,null,ot(S(R),B=>(q(),$e(p,{key:B.value,span:8},{default:fe(()=>[Q(Z,{class:"polyline-card"},{default:fe(()=>[I("div",Ju,[I("span",null,te(B.text),1),I("div",ec,[B.value===S(me).Dropped?(q(),$e(ie,{key:0,onClick:ne},{default:fe(()=>[Q(S(Xl))]),_:1})):Me("",!0),Q(ie,{onClick:de=>z(B)},{default:fe(()=>[Q(S(Mi))]),_:2},1032,["onClick"])])]),Q(bo,{"chart-id":`${B.value}-polyline`,"y-title":[B.text],"chart-data":S(h)[B.value],"chart-colors":S(T)[B.value],"unit-text-key":f[B.value]},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),I("div",tc,[Q(x,{gutter:26},{default:fe(()=>[(q(!0),le(Pe,null,ot(S(D),B=>(q(),$e(p,{key:B.value,span:8},{default:fe(()=>[Q(Z,{class:"polyline-card"},{default:fe(()=>[I("div",nc,[I("span",null,te(B.text),1),I("div",oc,[Q(ie,{onClick:de=>z(B)},{default:fe(()=>[Q(S(Mi))]),_:2},1032,["onClick"])])]),Q(bo,{"chart-id":`${B.value}-polyline`,"y-title":[B.text],"chart-data":S(h)[B.value],"chart-colors":S(T)[B.value],"unit-text-key":f[B.value],"is-instantaneous-value":""},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),Q(re,{modelValue:S(a),"onUpdate:modelValue":U[2]||(U[2]=B=>Be(a)?a.value=B:null),width:"95%",top:"24px","destroy-on-close":"","align-center":"",onOpened:L,class:"full-screen-dialog"},{header:fe(({titleId:B,titleClass:de})=>{var ge;return[I("div",ic,[I("div",{id:B,class:Qe(de)},te((ge=S(v))==null?void 0:ge.text),11,ac),Q($,{place:"right",content:S(b)},null,8,["content"])])]}),default:fe(()=>[S(v)?(q(),$e(x,{key:0,class:"full-screen-chart"},{default:fe(()=>[Q(p,{span:4},{default:fe(()=>[Q(ue,{class:"interval-select",modelValue:S(i),"onUpdate:modelValue":U[1]||(U[1]=B=>Be(i)?i.value=B:null)},{default:fe(()=>[(q(),le(Pe,null,ot(l,B=>Q(pe,{key:B.label,label:B.label,value:B.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),Q(p,{span:24},{default:fe(()=>[Q(bo,{ref_key:"fullScreenChart",ref:s,"chart-id":`${S(v).value}-polyline-full-screen`,"y-title":S(g),"chart-data":S(C),"chart-colors":S(M),"unit-text-key":S(y),height:"65vh","show-full-screen":""},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:1}),Q(p,{span:24},{default:fe(()=>[Q(G,{data:F(S(C))},{default:fe(()=>[S(g).length>1?(q(),$e(A,{key:0,label:S(n)("Base.name")},{default:fe(({$index:B})=>[_t(te(S(g)[B]),1)]),_:1},8,["label"])):Me("",!0),Q(A,{prop:"last",label:S(n)("Base.last")},null,8,["label"]),Q(A,{prop:"max",label:S(n)("Base.max")},null,8,["label"]),Q(A,{prop:"min",label:S(n)("Base.min")},null,8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})):Me("",!0)]),_:1},8,["modelValue"]),Q(Wu,{modelValue:S(X),"onUpdate:modelValue":U[3]||(U[3]=B=>Be(X)?X.value=B:null),metrics:S(ce)},null,8,["modelValue","metrics"])])}}}),lc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAu5QTFRFAAAAxNj5XZXzdKX1cKH0TY3yEnHuKHjvTY7yqsj3eKb1ZJn0IHXuEXDuFHLuGXTvPYXyVpT0kbf3oL/3ZZr0HHPuD2/tEXDtFHPuF3PvG3XvPITyaZ/1bZ7zL3rvEm/tFnTvGHXvKXvxRYrykbj3cqHzSIfwHXLtEG3sDm7sEW7tEnLuGnbwMoHya6H1jbL2YJXyKnbuD2zsDW3sDm7tE3DuFHPvG3XwHHfwHHfxO4XzhrH3UYvwMHnuDWrrDmvrDGzrHnjxJXvxN4XzcKT2aJrzO33uDmnrD2rrGHXwHnnxH3rxM4LzSI70dqj2j7T2LHXsGG7rD2jqDWnrIHnxInrxIXvyP4rzQYvzlLz3irD1U4rwHW/rD2fqDmjqI3vyJXzyX5z2bKL3wdX4Z5jyK3TsEWbpEWbqJH3yK4DzS5H1e633R4LtPHztEmjpEGXpEWXpEGbpJn3zJX7zM4b0WZr2lr34iq71SoPuF2jpEWPoEWTpJn/zKIH0OYj1baX3wNT4UIfuJnDqEGHoEWLoDWnqInzyJn/0J4D0U5f3ZKH3bZrxK3HqD2DnEmHoDmvsInryJH3zJ4L1Oor2Upf3T4buD1/nHXbwKIH1KYL1KoP1UIbuJXzzEGHnF3PuHnjwJ4P1DGzsEWDnD2fpD2bqWIvvia30L3PrG2npSZL2aaX3bpvyPnztR5D1Z6P3UYjvHG3qEmTpOYj1U5f2lr34i6/0XpHxGm3qLIH0Ro/1jrj4b5zxQ4DtFGrqOof0fK33xtz6XpLxMXftMoPzeav3YZ72jLD1MnntLXbtMoPzU5X1lLv3daLzO33uIXPsI3vxSY/0cKX2xtv6jLL2Nn3vFW3sPIfyU5T0aJrzNn3vK33xbKH2xdr6XJPyK3juKHzxU5L0krn3jbT2SorwKXfuHXbvPYXyd6j2ZZn0NX/wHHTuM4Dxdqf2kbj3jrX2Y5n0Mn7wKnrwVJLzdab1j7b2VpLyLXvwUpDyeqn2dKX1+Ql/zgAAAPp0Uk5TAApOKknB/+B4FRqs+v///+BOBRB96v//////tipo1f////WcHyq7////////6nIKp////////////9BTffX//////7YvY9X///////WNJDmh////////6lgKFYL//////+U0BW3v////+qwVPtX////////vkgofsfX/////y2gVcv/////////BKlPg/////////5yS/////9uS/////9v/////kh+X/+BTKsH/fVPL//qcHwqS7//BSRWs+ttjBTS29Y0KCljV/6w5Go31/9VOBS+2//VoPtD/khVe6v+xKh+c9f/LaCq2/++NBQVO1fqhFQp44Ms0FagKfKoAAANLSURBVHicxZc9aBRBFMfnH4Tb+xDEGEHU2HgYwQ80auEH2ERBBMEihZWoGNCUYrBTQQutLGITEERUMKAgCIbYKCSF2CQ2Flp4JyLEJGhuZzxE9L25vb3d2dnd+wi4xXHczfvx/v958/YNRIcPUv4G/nQCWAF+VLuAHAVXHUYstAPo5khZdRiDL60DNnLqNUCGER9bAxS1+O8Qi8V5ZBZX54HZFgA7OdotlAR6Z5y+cgZr3QL9MtUs4CDH/5ShDEQhSz++agYwQOJzaklIzPse9JULIssEPE8DnOBVFQUGUAayqjPYrwF6P/A4CXBKh2sA3JoEzoAkeADO4l4s4KzeeVRcEchAA/wMsuDCGrUDhr2tqwQkBE30AFrIrShgRGffJTkDqiCriTkG5AXruGYArnK4kG6XoAz636jINtYlbCkRJU9FgstBwG3SnpdKuJDSFa7KHX2gC0mJql9ITrcamM5iV0msgXB7gOEAYBRK0lflSbCYePF+wwPOYD1wPgAY+80AiiUQfcyleFAQsYAuT4Jaqp0F6UsQ2bCEjBXge9AuoOaBlkCwhgQNCEkwAMtiYnPbeMi1SqAMVn3lQtKlbBTSzeu6lIfG/UISBVdsyJyO9cAzsS0PmjpM7IGRQVTCmTthgGliFNDzOc6DUAb1wxQFpEhoNBTyIApYDhPrEnZPehKIZ26jyidtIxeSPkwUr9u68WJxsog/C41S7p8IeWC2dd+DhOPc1mGymNhmQ8GeCaMjsQQCcB2EAYnb2HJLC/eDkImRN1OsiX4/4G2s94O+mbi2nl5Iln6QXEj/tycux3HuuKGkSEjZxoc/OjTxEY2FLbb1bRgMAIQYR0nWX66Y8/uBrNr7QREnvcDGjPQMeFuBVCEPolMaS9gHHBcRgHgBvGymJ9IkeqQRFZoTJ4EnqQPGIHBYxACEeI0x+3HmOmDAOeBAKMIcdadpBvRMtGRwCdhrBESH7XfAFfuL5QaNgjvM5bZx/z1wYSlyX3BGsdWy2H5j+YAh8zA9BTbblsbdmT7hWNCDu8Am+8LYS1eJdrv+YpkC1sWtS7g3fgO260qcBbpjVyVdPBeA3l9OGViZsCj56lvhId5JXJJy+aYx72/ygjRA6vMPJzpDbttYrkYAAAAASUVORK5CYII=",ar=()=>{const t=oe(0),n=oe(0),o=oe(0),i=oe(0),a=()=>Te(t.value*Math.cos(Math.PI/6),3),r=()=>n.value*1.5,s=()=>t.value*1.5;return{INNER_SIDE_MULTIPLES:1.5,coreNodeHeight:t,coreNodeWidth:n,SVGHeight:o,SVGWidth:i,setCoreNodeHeight:u=>{t.value=u,n.value=a(),o.value=s(),i.value=r()}}},Mn=37*1.28,Kn=53*1.28,an=89*1.28,rr=6,sr=()=>{const e=an-Kn,t=e/5/2,n=e/3/2,o=n*2;return{nonactivatedRadius:t,activatedInnerRadius:n,activatedOuterRadius:o}},lr=()=>({SVGSideLength:(an+rr/2)*2}),uc=20,cc=e=>{const{state:t}=Zn(),n=oe(),o=oe(640),i=oe(243),a=oe(20),{coreNodeHeight:r,coreNodeWidth:s,setCoreNodeHeight:l}=ar(),u=J(()=>e.nodes.some(({role:T})=>T==="replicant")),c=oe({x:200,y:0}),{SVGSideLength:d}=lr(),f=()=>{const T=n.value.$el,{width:N,height:_}=T.getBoundingClientRect();o.value=Te(N,2),i.value=Te(_,2)},h=()=>{c.value={x:Te(o.value/2-d/2,2),y:Te(i.value/2-d/2,2)}},m=J(()=>e.nodes.filter(({role:T})=>T!=="replicant").length),v=()=>{m.value===1?a.value=Te(u.value?Mn/1.5:i.value/2.8,3):a.value=u.value?10+Te(Mn/(m.value*2),3):24+Te(i.value/(m.value*2),3),l(a.value)},{nonactivatedRadius:b}=sr(),w=(T,N,_)=>{const H=_!=="replicant",K=Math.PI/2*N,E=Te(K+Math.PI*2/N*T,2);let P=0;H?P=Te((u.value?Mn*.84:i.value/2)-a.value*Math.log10(N)*1.5,3):P=(Kn+an)/2;const k=o.value/2;let z=i.value/2;!u.value&&N===3&&_==="core"&&(z+=P/2*Math.sin(Math.PI/6));const L=H&&N===1?0:P*Math.cos(E),V=H&&N===1?0:P*Math.sin(E),F=H?s.value:b*2,X=H?r.value:b*2;return{x:Te(k+L-F/2,2),y:Te(z+V-X/2,2)}},g=({node:T,node_status:N,role:_})=>{const H=_||"core";return{type:H,class:`node-${H}`,id:T,label:T,data:{node_status:N}}},C=T=>{const N=[],_=[];return T.forEach(H=>(H.role!=="replicant"?N:_).push(H)),_.length>uc&&_.splice(20,_.length-20),N.map((H,K)=>({...g(H),position:w(K,N.length,H.role)})).concat(_.map((H,K)=>({...g(H),position:w(K,_.length,H.role)})))},y=T=>{const N=[],_=T.filter(({role:H})=>H!=="replicant");for(let H=0;H<_.length;H++){const K=_[H].node;for(let E=H+1;E<_.length;E++){const P=_[E].node;N.push({id:`${K}-${P}`,source:K,target:P,type:"straight"})}}return N},M=T=>{const N=C(T),_=y(T);return[...N,..._]},R=()=>{f(),h()},D=()=>{window.addEventListener("resize",R)},O=()=>{window.removeEventListener("resize",R)};return ye(()=>t.leftBarCollapse,async()=>{await Ya(300),R()}),ii(()=>{O()}),Le(()=>{f(),h(),v(),l(a.value),D()}),{FlowInstance:n,flowEleWidth:o,showBackgroundCircle:u,backgroundCirclePosition:c,coreNodeHeight:a,countCoreNodeHeight:v,generateFlowData:M}};function Wn(e){return Ua()?(An(e),!0):!1}function nt(e){return typeof e=="function"?e():S(e)}const dc=typeof window<"u"&&typeof document<"u",fc=e=>typeof e<"u",hc=Object.prototype.toString,pc=e=>hc.call(e)==="[object Object]",vc=()=>{};function gc(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const ur=e=>e();function mc(e=ur){const t=oe(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:fl(t),pause:n,resume:o,eventFilter:i}}function Vi(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function yc(e,t,n={}){const{eventFilter:o=ur,...i}=n;return ye(e,gc(o,t),i)}function Dt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:r,resume:s,isActive:l}=mc(o);return{stop:yc(e,t,{...i,eventFilter:a}),pause:r,resume:s,isActive:l}}function _c(e,t={}){if(!Be(e))return ll(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=ul(()=>({get(){return e.value[o]},set(i){var a;if((a=nt(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=i,e.value=s}else{const s={...e.value,[o]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=i}}));return n}function Vo(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let b=null;const g=[new Promise(C=>{b=ye(e,y=>{d(y)!==t&&(b==null||b(),C(y))},{flush:f,deep:h,immediate:!0})})];return m!=null&&g.push(Vi(m,v).then(()=>nt(e)).finally(()=>b==null?void 0:b())),Promise.race(g)}function o(d,f){if(!Be(d))return n(y=>y===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:b}=f??{};let w=null;const C=[new Promise(y=>{w=ye([e,d],([M,R])=>{t!==(M===R)&&(w==null||w(),y(M))},{flush:h,deep:m,immediate:!0})})];return v!=null&&C.push(Vi(v,b).then(()=>nt(e)).finally(()=>(w==null||w(),nt(e)))),Promise.race(C)}function i(d){return n(f=>!!f,d)}function a(d){return o(null,d)}function r(d){return o(void 0,d)}function s(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const m=Array.from(h);return m.includes(d)||m.includes(nt(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(nt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return Vo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:r,changed:u,changedTimes:c,get not(){return Vo(e,!t)}}}function Ho(e){return Vo(e)}function bc(e){var t;const n=nt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const cr=dc?window:void 0;function dr(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=cr):[t,n,o,i]=e,!t)return vc;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],r=()=>{a.forEach(c=>c()),a.length=0},s=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=ye(()=>[bc(t),nt(i)],([c,d])=>{if(r(),!c)return;const f=pc(d)?{...d}:d;a.push(...n.flatMap(h=>o.map(m=>s(c,h,m,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),r()};return Wn(u),u}function wc(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Hi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=cr,eventName:a="keydown",passive:r=!1,dedupe:s=!1}=o,l=wc(t);return dr(i,a,c=>{c.repeat&&nt(s)||l(c)&&n(c)},r)}function Sc(e){return JSON.parse(JSON.stringify(e))}function wo(e,t,n,o={}){var i,a,r;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=on(),m=n||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((r=(a=h==null?void 0:h.proxy)==null?void 0:a.$emit)==null?void 0:r.bind(h==null?void 0:h.proxy));let v=u;t||(t="modelValue"),v=v||`update:${t.toString()}`;const b=C=>s?typeof s=="function"?s(C):Sc(C):C,w=()=>fc(e[t])?b(e[t]):d,g=C=>{f?f(C)&&m(v,C):m(v,C)};if(l){const C=w(),y=oe(C);let M=!1;return ye(()=>e[t],R=>{M||(M=!0,y.value=b(R),Ve(()=>M=!1))}),ye(y,R=>{!M&&(R!==e[t]||c)&&g(R)},{deep:c}),y}else return J({get(){return w()},set(C){g(C)}})}var xc={value:()=>{}};function qn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Dn(n)}function Dn(e){this._=e}function Ec(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Dn.prototype=qn.prototype={constructor:Dn,on:function(e,t){var n=this._,o=Ec(e+"",n),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=Ac(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(i=(e=o[a]).type)n[i]=Gi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Gi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Ac(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Gi(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=xc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Go="http://www.w3.org/1999/xhtml";const Fi={svg:"http://www.w3.org/2000/svg",xhtml:Go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fi.hasOwnProperty(t)?{space:Fi[t],local:e}:e}function Nc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Go&&t.documentElement.namespaceURI===Go?t.createElement(e):t.createElementNS(n,e)}}function Mc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fr(e){var t=Qn(e);return(t.local?Mc:Nc)(t)}function Dc(){}function li(e){return e==null?Dc:function(){return this.querySelector(e)}}function Cc(e){typeof e!="function"&&(e=li(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=new Array(r),l,u,c=0;c<r;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new ze(o,this._parents)}function Ic(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kc(){return[]}function hr(e){return e==null?kc:function(){return this.querySelectorAll(e)}}function $c(e){return function(){return Ic(e.apply(this,arguments))}}function Pc(e){typeof e=="function"?e=$c(e):e=hr(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r=t[a],s=r.length,l,u=0;u<s;++u)(l=r[u])&&(o.push(e.call(l,l.__data__,u,r)),i.push(l));return new ze(o,i)}function pr(e){return function(){return this.matches(e)}}function vr(e){return function(t){return t.matches(e)}}var Tc=Array.prototype.find;function Oc(e){return function(){return Tc.call(this.children,e)}}function Rc(){return this.firstElementChild}function zc(e){return this.select(e==null?Rc:Oc(typeof e=="function"?e:vr(e)))}var Lc=Array.prototype.filter;function Bc(){return Array.from(this.children)}function Vc(e){return function(){return Lc.call(this.children,e)}}function Hc(e){return this.selectAll(e==null?Bc:Vc(typeof e=="function"?e:vr(e)))}function Gc(e){typeof e!="function"&&(e=pr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=[],l,u=0;u<r;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new ze(o,this._parents)}function gr(e){return new Array(e.length)}function Fc(){return new ze(this._enter||this._groups.map(gr),this._parents)}function zn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zn.prototype={constructor:zn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Yc(e){return function(){return e}}function Xc(e,t,n,o,i,a){for(var r=0,s,l=t.length,u=a.length;r<u;++r)(s=t[r])?(s.__data__=a[r],o[r]=s):n[r]=new zn(e,a[r]);for(;r<l;++r)(s=t[r])&&(i[r]=s)}function Uc(e,t,n,o,i,a,r){var s,l,u=new Map,c=t.length,d=a.length,f=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(f[s]=h=r.call(l,l.__data__,s,t)+"",u.has(h)?i[s]=l:u.set(h,l));for(s=0;s<d;++s)h=r.call(e,a[s],s,a)+"",(l=u.get(h))?(o[s]=l,l.__data__=a[s],u.delete(h)):n[s]=new zn(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function Zc(e){return e.__data__}function Kc(e,t){if(!arguments.length)return Array.from(this,Zc);var n=t?Uc:Xc,o=this._parents,i=this._groups;typeof e!="function"&&(e=Yc(e));for(var a=i.length,r=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=o[u],d=i[u],f=d.length,h=Wc(e.call(c,c&&c.__data__,u,o)),m=h.length,v=s[u]=new Array(m),b=r[u]=new Array(m),w=l[u]=new Array(f);n(c,d,v,b,w,h,t);for(var g=0,C=0,y,M;g<m;++g)if(y=v[g]){for(g>=C&&(C=g+1);!(M=b[C])&&++C<m;);y._next=M||null}}return r=new ze(r,o),r._enter=s,r._exit=l,r}function Wc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qc(){return new ze(this._exit||this._groups.map(gr),this._parents)}function Qc(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function jc(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),s=new Array(i),l=0;l<r;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<i;++l)s[l]=n[l];return new ze(s,this._parents)}function Jc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function ed(e){e||(e=td);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r=n[a],s=r.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=r[c])&&(l[c]=u);l.sort(t)}return new ze(i,this._parents).order()}function td(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function od(){return Array.from(this)}function id(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function ad(){let e=0;for(const t of this)++e;return e}function rd(){return!this.node()}function sd(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,r=i.length,s;a<r;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function ld(e){return function(){this.removeAttribute(e)}}function ud(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cd(e,t){return function(){this.setAttribute(e,t)}}function dd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function hd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pd(e,t){var n=Qn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ud:ld:typeof t=="function"?n.local?hd:fd:n.local?dd:cd)(n,t))}function mr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vd(e){return function(){this.style.removeProperty(e)}}function gd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function md(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function yd(e,t,n){return arguments.length>1?this.each((t==null?vd:typeof t=="function"?md:gd)(e,t,n??"")):Rt(this.node(),e)}function Rt(e,t){return e.style.getPropertyValue(t)||mr(e).getComputedStyle(e,null).getPropertyValue(t)}function _d(e){return function(){delete this[e]}}function bd(e,t){return function(){this[e]=t}}function wd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sd(e,t){return arguments.length>1?this.each((t==null?_d:typeof t=="function"?wd:bd)(e,t)):this.node()[e]}function yr(e){return e.trim().split(/^|\s+/)}function ui(e){return e.classList||new _r(e)}function _r(e){this._node=e,this._names=yr(e.getAttribute("class")||"")}_r.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function br(e,t){for(var n=ui(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function wr(e,t){for(var n=ui(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function xd(e){return function(){br(this,e)}}function Ed(e){return function(){wr(this,e)}}function Ad(e,t){return function(){(t.apply(this,arguments)?br:wr)(this,e)}}function Nd(e,t){var n=yr(e+"");if(arguments.length<2){for(var o=ui(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Ad:t?xd:Ed)(n,t))}function Md(){this.textContent=""}function Dd(e){return function(){this.textContent=e}}function Cd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Id(e){return arguments.length?this.each(e==null?Md:(typeof e=="function"?Cd:Dd)(e)):this.node().textContent}function kd(){this.innerHTML=""}function $d(e){return function(){this.innerHTML=e}}function Pd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Td(e){return arguments.length?this.each(e==null?kd:(typeof e=="function"?Pd:$d)(e)):this.node().innerHTML}function Od(){this.nextSibling&&this.parentNode.appendChild(this)}function Rd(){return this.each(Od)}function zd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ld(){return this.each(zd)}function Bd(e){var t=typeof e=="function"?e:fr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vd(){return null}function Hd(e,t){var n=typeof e=="function"?e:fr(e),o=t==null?Vd:typeof t=="function"?t:li(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Gd(){var e=this.parentNode;e&&e.removeChild(this)}function Fd(){return this.each(Gd)}function Yd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ud(e){return this.select(e?Xd:Yd)}function Zd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kd(e){return function(t){e.call(this,t,this.__data__)}}function Wd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function qd(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Qd(e,t,n){return function(){var o=this.__on,i,a=Kd(t);if(o){for(var r=0,s=o.length;r<s;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function jd(e,t,n){var o=Wd(e+""),i,a=o.length,r;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(s=t?Qd:qd,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function Sr(e,t,n){var o=mr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Jd(e,t){return function(){return Sr(this,e,t)}}function ef(e,t){return function(){return Sr(this,e,t.apply(this,arguments))}}function tf(e,t){return this.each((typeof t=="function"?ef:Jd)(e,t))}function*nf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var xr=[null];function ze(e,t){this._groups=e,this._parents=t}function rn(){return new ze([[document.documentElement]],xr)}function of(){return this}ze.prototype=rn.prototype={constructor:ze,select:Cc,selectAll:Pc,selectChild:zc,selectChildren:Hc,filter:Gc,data:Kc,enter:Fc,exit:qc,join:Qc,merge:jc,selection:of,order:Jc,sort:ed,call:nd,nodes:od,node:id,size:ad,empty:rd,each:sd,attr:pd,style:yd,property:Sd,classed:Nd,text:Id,html:Td,raise:Rd,lower:Ld,append:Bd,insert:Hd,remove:Fd,clone:Ud,datum:Zd,on:jd,dispatch:tf,[Symbol.iterator]:nf};function He(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],xr)}function af(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xe(e,t){if(e=af(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const rf={passive:!1},qt={capture:!0,passive:!1};function So(e){e.stopImmediatePropagation()}function It(e){e.preventDefault(),e.stopImmediatePropagation()}function Er(e){var t=e.document.documentElement,n=He(e).on("dragstart.drag",It,qt);"onselectstart"in t?n.on("selectstart.drag",It,qt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ar(e,t){var n=e.document.documentElement,o=He(e).on("dragstart.drag",null);t&&(o.on("click.drag",It,qt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const vn=e=>()=>e;function Fo(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:r,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Fo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function sf(e){return!e.ctrlKey&&!e.button}function lf(){return this.parentNode}function uf(e,t){return t??{x:e.x,y:e.y}}function cf(){return navigator.maxTouchPoints||"ontouchstart"in this}function df(){var e=sf,t=lf,n=uf,o=cf,i={},a=qn("start","drag","end"),r=0,s,l,u,c,d=0;function f(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",w,rf).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,M){if(!(c||!e.call(this,y,M))){var R=C(this,t.call(this,y,M),y,M,"mouse");R&&(He(y.view).on("mousemove.drag",m,qt).on("mouseup.drag",v,qt),Er(y.view),So(y),u=!1,s=y.clientX,l=y.clientY,R("start",y))}}function m(y){if(It(y),!u){var M=y.clientX-s,R=y.clientY-l;u=M*M+R*R>d}i.mouse("drag",y)}function v(y){He(y.view).on("mousemove.drag mouseup.drag",null),Ar(y.view,u),It(y),i.mouse("end",y)}function b(y,M){if(e.call(this,y,M)){var R=y.changedTouches,D=t.call(this,y,M),O=R.length,T,N;for(T=0;T<O;++T)(N=C(this,D,y,M,R[T].identifier,R[T]))&&(So(y),N("start",y,R[T]))}}function w(y){var M=y.changedTouches,R=M.length,D,O;for(D=0;D<R;++D)(O=i[M[D].identifier])&&(It(y),O("drag",y,M[D]))}function g(y){var M=y.changedTouches,R=M.length,D,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<R;++D)(O=i[M[D].identifier])&&(So(y),O("end",y,M[D]))}function C(y,M,R,D,O,T){var N=a.copy(),_=Xe(T||R,M),H,K,E;if((E=n.call(y,new Fo("beforestart",{sourceEvent:R,target:f,identifier:O,active:r,x:_[0],y:_[1],dx:0,dy:0,dispatch:N}),D))!=null)return H=E.x-_[0]||0,K=E.y-_[1]||0,function P(k,z,L){var V=_,F;switch(k){case"start":i[O]=P,F=r++;break;case"end":delete i[O],--r;case"drag":_=Xe(L||z,M),F=r;break}N.call(k,y,new Fo(k,{sourceEvent:z,subject:E,target:f,identifier:O,active:F,x:_[0]+H,y:_[1]+K,dx:_[0]-V[0],dy:_[1]-V[1],dispatch:N}),D)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:vn(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:vn(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:vn(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:vn(!!y),f):o},f.on=function(){var y=a.on.apply(a,arguments);return y===a?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function ci(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Nr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function sn(){}var Qt=.7,Ln=1/Qt,kt="\\s*([+-]?\\d+)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ff=/^#([0-9a-f]{3,8})$/,hf=new RegExp(`^rgb\\(${kt},${kt},${kt}\\)$`),pf=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),vf=new RegExp(`^rgba\\(${kt},${kt},${kt},${jt}\\)$`),gf=new RegExp(`^rgba\\(${We},${We},${We},${jt}\\)$`),mf=new RegExp(`^hsl\\(${jt},${We},${We}\\)$`),yf=new RegExp(`^hsla\\(${jt},${We},${We},${jt}\\)$`),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ci(sn,Jt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xi,formatHex:Xi,formatHex8:_f,formatHsl:bf,formatRgb:Ui,toString:Ui});function Xi(){return this.rgb().formatHex()}function _f(){return this.rgb().formatHex8()}function bf(){return Mr(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Jt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ff.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zi(t):n===3?new Oe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hf.exec(e))?new Oe(t[1],t[2],t[3],1):(t=pf.exec(e))?new Oe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vf.exec(e))?gn(t[1],t[2],t[3],t[4]):(t=gf.exec(e))?gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mf.exec(e))?qi(t[1],t[2]/100,t[3]/100,1):(t=yf.exec(e))?qi(t[1],t[2]/100,t[3]/100,t[4]):Yi.hasOwnProperty(e)?Zi(Yi[e]):e==="transparent"?new Oe(NaN,NaN,NaN,0):null}function Zi(e){return new Oe(e>>16&255,e>>8&255,e&255,1)}function gn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Oe(e,t,n,o)}function wf(e){return e instanceof sn||(e=Jt(e)),e?(e=e.rgb(),new Oe(e.r,e.g,e.b,e.opacity)):new Oe}function Yo(e,t,n,o){return arguments.length===1?wf(e):new Oe(e,t,n,o??1)}function Oe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ci(Oe,Yo,Nr(sn,{brighter(e){return e=e==null?Ln:Math.pow(Ln,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qt:Math.pow(Qt,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oe(bt(this.r),bt(this.g),bt(this.b),Bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ki,formatHex:Ki,formatHex8:Sf,formatRgb:Wi,toString:Wi}));function Ki(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}`}function Sf(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}${yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wi(){const e=Bn(this.opacity);return`${e===1?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${e===1?")":`, ${e})`}`}function Bn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yt(e){return e=bt(e),(e<16?"0":"")+e.toString(16)}function qi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ge(e,t,n,o)}function Mr(e){if(e instanceof Ge)return new Ge(e.h,e.s,e.l,e.opacity);if(e instanceof sn||(e=Jt(e)),!e)return new Ge;if(e instanceof Ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,s=a-i,l=(a+i)/2;return s?(t===a?r=(n-o)/s+(n<o)*6:n===a?r=(o-t)/s+2:r=(t-n)/s+4,s/=l<.5?a+i:2-a-i,r*=60):s=l>0&&l<1?0:r,new Ge(r,s,l,e.opacity)}function xf(e,t,n,o){return arguments.length===1?Mr(e):new Ge(e,t,n,o??1)}function Ge(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ci(Ge,xf,Nr(sn,{brighter(e){return e=e==null?Ln:Math.pow(Ln,e),new Ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qt:Math.pow(Qt,e),new Ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Oe(xo(e>=240?e-240:e+120,i,o),xo(e,i,o),xo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ge(Qi(this.h),mn(this.s),mn(this.l),Bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bn(this.opacity);return`${e===1?"hsl(":"hsla("}${Qi(this.h)}, ${mn(this.s)*100}%, ${mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qi(e){return e=(e||0)%360,e<0?e+360:e}function mn(e){return Math.max(0,Math.min(1,e||0))}function xo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Dr=e=>()=>e;function Ef(e,t){return function(n){return e+n*t}}function Af(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Nf(e){return(e=+e)==1?Cr:function(t,n){return n-t?Af(t,n,e):Dr(isNaN(t)?n:t)}}function Cr(e,t){var n=t-e;return n?Ef(e,n):Dr(isNaN(e)?t:e)}const ji=function e(t){var n=Nf(t);function o(i,a){var r=n((i=Yo(i)).r,(a=Yo(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Cr(i.opacity,a.opacity);return function(c){return i.r=r(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Xo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eo=new RegExp(Xo.source,"g");function Mf(e){return function(){return e}}function Df(e){return function(t){return e(t)+""}}function Cf(e,t){var n=Xo.lastIndex=Eo.lastIndex=0,o,i,a,r=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Xo.exec(e))&&(i=Eo.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[r]?s[r]+=a:s[++r]=a),(o=o[0])===(i=i[0])?s[r]?s[r]+=i:s[++r]=i:(s[++r]=null,l.push({i:r,x:lt(o,i)})),n=Eo.lastIndex;return n<t.length&&(a=t.slice(n),s[r]?s[r]+=a:s[++r]=a),s.length<2?l[0]?Df(l[0].x):Mf(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var Ji=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ir(e,t,n,o,i,a){var r,s,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ji,skewX:Math.atan(l)*Ji,scaleX:r,scaleY:s}}var yn;function If(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uo:Ir(t.a,t.b,t.c,t.d,t.e,t.f)}function kf(e){return e==null||(yn||(yn=document.createElementNS("http://www.w3.org/2000/svg","g")),yn.setAttribute("transform",e),!(e=yn.transform.baseVal.consolidate()))?Uo:(e=e.matrix,Ir(e.a,e.b,e.c,e.d,e.e,e.f))}function kr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:lt(u,d)},{i:v-2,x:lt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:lt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:lt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(i(h)+"scale(",null,",",null,")");m.push({i:v-4,x:lt(u,d)},{i:v-2,x:lt(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var $f=kr(If,"px, ","px)","deg)"),Pf=kr(kf,", ",")",")"),Tf=1e-12;function ea(e){return((e=Math.exp(e))+1/e)/2}function Of(e){return((e=Math.exp(e))-1/e)/2}function Rf(e){return((e=Math.exp(2*e))-1)/(e+1)}const zf=function e(t,n,o){function i(a,r){var s=a[0],l=a[1],u=a[2],c=r[0],d=r[1],f=r[2],h=c-s,m=d-l,v=h*h+m*m,b,w;if(v<Tf)w=Math.log(f/u)/t,b=function(D){return[s+D*h,l+D*m,u*Math.exp(t*D*w)]};else{var g=Math.sqrt(v),C=(f*f-u*u+o*v)/(2*u*n*g),y=(f*f-u*u-o*v)/(2*f*n*g),M=Math.log(Math.sqrt(C*C+1)-C),R=Math.log(Math.sqrt(y*y+1)-y);w=(R-M)/t,b=function(D){var O=D*w,T=ea(M),N=u/(n*g)*(T*Rf(t*O+M)-Of(M));return[s+N*h,l+N*m,u*T/ea(t*O+M)]}}return b.duration=w*1e3*t/Math.SQRT2,b}return i.rho=function(a){var r=Math.max(.001,+a),s=r*r,l=s*s;return e(r,s,l)},i}(Math.SQRT2,2,4);var zt=0,Yt=0,Gt=0,$r=1e3,Vn,Xt,Hn=0,Et=0,jn=0,en=typeof performance=="object"&&performance.now?performance:Date,Pr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function di(){return Et||(Pr(Lf),Et=en.now()+jn)}function Lf(){Et=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=Tr.prototype={constructor:Gn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?di():+n)+(t==null?0:+t),!this._next&&Xt!==this&&(Xt?Xt._next=this:Vn=this,Xt=this),this._call=e,this._time=n,Zo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zo())}};function Tr(e,t,n){var o=new Gn;return o.restart(e,t,n),o}function Bf(){di(),++zt;for(var e=Vn,t;e;)(t=Et-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zt}function ta(){Et=(Hn=en.now())+jn,zt=Yt=0;try{Bf()}finally{zt=0,Hf(),Et=0}}function Vf(){var e=en.now(),t=e-Hn;t>$r&&(jn-=t,Hn=e)}function Hf(){for(var e,t=Vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vn=n);Xt=e,Zo(o)}function Zo(e){if(!zt){Yt&&(Yt=clearTimeout(Yt));var t=e-Et;t>24?(e<1/0&&(Yt=setTimeout(ta,e-en.now()-jn)),Gt&&(Gt=clearInterval(Gt))):(Gt||(Hn=en.now(),Gt=setInterval(Vf,$r)),zt=1,Pr(ta))}}function na(e,t,n){var o=new Gn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Gf=qn("start","end","cancel","interrupt"),Ff=[],Or=0,oa=1,Ko=2,Cn=3,ia=4,Wo=5,In=6;function Jn(e,t,n,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;Yf(e,n,{name:t,index:o,group:i,on:Gf,tween:Ff,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Or})}function fi(e,t){var n=Ye(e,t);if(n.state>Or)throw new Error("too late; already scheduled");return n}function je(e,t){var n=Ye(e,t);if(n.state>Cn)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yf(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Tr(a,0,n.time);function a(u){n.state=oa,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,h;if(n.state!==oa)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Cn)return na(r);h.state===ia?(h.state=In,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=In,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(na(function(){n.state===Cn&&(n.state=ia,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ko,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ko){for(n.state=Cn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Wo,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Wo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=In,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function kn(e,t){var n=e.__transition,o,i,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){a=!1;continue}i=o.state>Ko&&o.state<Wo,o.state=In,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}a&&delete e.__transition}}function Xf(e){return this.each(function(){kn(this,e)})}function Uf(e,t){var n,o;return function(){var i=je(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,s=o.length;r<s;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function Zf(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=je(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Kf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ye(this.node(),n).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Uf:Zf)(n,e,t))}function hi(e,t,n){var o=e._id;return e.each(function(){var i=je(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ye(i,o).value[t]}}function Rr(e,t){var n;return(typeof t=="number"?lt:t instanceof Jt?ji:(n=Jt(t))?(t=n,ji):Cf)(e,t)}function Wf(e){return function(){this.removeAttribute(e)}}function qf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qf(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function jf(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function Jf(e,t,n){var o,i,a;return function(){var r,s=n(this),l;return s==null?void this.removeAttribute(e):(r=this.getAttribute(e),l=s+"",r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s)))}}function eh(e,t,n){var o,i,a;return function(){var r,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),l=s+"",r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s)))}}function th(e,t){var n=Qn(e),o=n==="transform"?Pf:Rr;return this.attrTween(e,typeof t=="function"?(n.local?eh:Jf)(n,o,hi(this,"attr."+e,t)):t==null?(n.local?qf:Wf)(n):(n.local?jf:Qf)(n,o,t))}function nh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function oh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ih(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&oh(e,a)),n}return i._value=t,i}function ah(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&nh(e,a)),n}return i._value=t,i}function rh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Qn(e);return this.tween(n,(o.local?ih:ah)(o,t))}function sh(e,t){return function(){fi(this,e).delay=+t.apply(this,arguments)}}function lh(e,t){return t=+t,function(){fi(this,e).delay=t}}function uh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sh:lh)(t,e)):Ye(this.node(),t).delay}function ch(e,t){return function(){je(this,e).duration=+t.apply(this,arguments)}}function dh(e,t){return t=+t,function(){je(this,e).duration=t}}function fh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ch:dh)(t,e)):Ye(this.node(),t).duration}function hh(e,t){if(typeof t!="function")throw new Error;return function(){je(this,e).ease=t}}function ph(e){var t=this._id;return arguments.length?this.each(hh(t,e)):Ye(this.node(),t).ease}function vh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;je(this,e).ease=n}}function gh(e){if(typeof e!="function")throw new Error;return this.each(vh(this._id,e))}function mh(e){typeof e!="function"&&(e=pr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=[],l,u=0;u<r;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new at(o,this._parents,this._name,this._id)}function yh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,d=r[s]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;s<o;++s)r[s]=t[s];return new at(r,this._parents,this._name,this._id)}function _h(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bh(e,t,n){var o,i,a=_h(t)?fi:je;return function(){var r=a(this,e),s=r.on;s!==o&&(i=(o=s).copy()).on(t,n),r.on=i}}function wh(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(bh(n,e,t))}function Sh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xh(){return this.on("end.remove",Sh(this._id))}function Eh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=li(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var s=o[r],l=s.length,u=a[r]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Jn(u[f],t,n,f,u,Ye(c,n)));return new at(a,this._parents,t,n)}function Ah(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hr(e));for(var o=this._groups,i=o.length,a=[],r=[],s=0;s<i;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=Ye(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&Jn(h,t,n,v,f,m);a.push(f),r.push(c)}return new at(a,r,t,n)}var Nh=rn.prototype.constructor;function Mh(){return new Nh(this._groups,this._parents)}function Dh(e,t){var n,o,i;return function(){var a=Rt(this,e),r=(this.style.removeProperty(e),Rt(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function zr(e){return function(){this.style.removeProperty(e)}}function Ch(e,t,n){var o,i=n+"",a;return function(){var r=Rt(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}function Ih(e,t,n){var o,i,a;return function(){var r=Rt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Rt(this,e))),r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s))}}function kh(e,t){var n,o,i,a="style."+t,r="end."+a,s;return function(){var l=je(this,e),u=l.on,c=l.value[a]==null?s||(s=zr(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),l.on=o}}function $h(e,t,n){var o=(e+="")=="transform"?$f:Rr;return t==null?this.styleTween(e,Dh(e,o)).on("end.style."+e,zr(e)):typeof t=="function"?this.styleTween(e,Ih(e,o,hi(this,"style."+e,t))).each(kh(this._id,e)):this.styleTween(e,Ch(e,o,t),n).on("end.style."+e,null)}function Ph(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Th(e,t,n){var o,i;function a(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Ph(e,r,n)),o}return a._value=t,a}function Oh(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Th(e,t,n??""))}function Rh(e){return function(){this.textContent=e}}function zh(e){return function(){var t=e(this);this.textContent=t??""}}function Lh(e){return this.tween("text",typeof e=="function"?zh(hi(this,"text",e)):Rh(e==null?"":e+""))}function Bh(e){return function(t){this.textContent=e.call(this,t)}}function Vh(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Bh(i)),t}return o._value=e,o}function Hh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vh(e))}function Gh(){for(var e=this._name,t=this._id,n=Lr(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],s=r.length,l,u=0;u<s;++u)if(l=r[u]){var c=Ye(l,t);Jn(l,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new at(o,this._parents,e,n)}function Fh(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,r){var s={value:r},l={value:function(){--i===0&&a()}};n.each(function(){var u=je(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var Yh=0;function at(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Lr(){return++Yh}var et=rn.prototype;at.prototype={constructor:at,select:Eh,selectAll:Ah,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:mh,merge:yh,selection:Mh,transition:Gh,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:wh,attr:th,attrTween:rh,style:$h,styleTween:Oh,text:Lh,textTween:Hh,remove:xh,tween:Kf,delay:uh,duration:fh,ease:ph,easeVarying:gh,end:Fh,[Symbol.iterator]:et[Symbol.iterator]};function Xh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Uh={time:null,delay:0,duration:250,ease:Xh};function Zh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kh(e){var t,n;e instanceof at?(t=e._id,e=e._name):(t=Lr(),(n=Uh).time=di(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],s=r.length,l,u=0;u<s;++u)(l=r[u])&&Jn(l,e,t,u,r,n||Zh(l,t));return new at(o,this._parents,e,t)}rn.prototype.interrupt=Xf;rn.prototype.transition=Kh;const _n=e=>()=>e;function Wh(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function it(e,t,n){this.k=e,this.x=t,this.y=n}it.prototype={constructor:it,scale:function(e){return e===1?this:new it(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new it(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lt=new it(1,0,0);it.prototype;function Ao(e){e.stopImmediatePropagation()}function Ft(e){e.preventDefault(),e.stopImmediatePropagation()}function qh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Qh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function aa(){return this.__zoom||Lt}function jh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Jh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ep(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function tp(){var e=qh,t=Qh,n=ep,o=jh,i=Jh,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,l=zf,u=qn("start","zoom","end"),c,d,f,h=500,m=150,v=0,b=10;function w(E){E.property("__zoom",aa).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",N).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(E,P,k,z){var L=E.selection?E.selection():E;L.property("__zoom",aa),E!==L?M(E,P,k,z):L.interrupt().each(function(){R(this,arguments).event(z).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},w.scaleBy=function(E,P,k,z){w.scaleTo(E,function(){var L=this.__zoom.k,V=typeof P=="function"?P.apply(this,arguments):P;return L*V},k,z)},w.scaleTo=function(E,P,k,z){w.transform(E,function(){var L=t.apply(this,arguments),V=this.__zoom,F=k==null?y(L):typeof k=="function"?k.apply(this,arguments):k,X=V.invert(F),ce=typeof P=="function"?P.apply(this,arguments):P;return n(C(g(V,ce),F,X),L,r)},k,z)},w.translateBy=function(E,P,k,z){w.transform(E,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),r)},null,z)},w.translateTo=function(E,P,k,z,L){w.transform(E,function(){var V=t.apply(this,arguments),F=this.__zoom,X=z==null?y(V):typeof z=="function"?z.apply(this,arguments):z;return n(Lt.translate(X[0],X[1]).scale(F.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof k=="function"?-k.apply(this,arguments):-k),V,r)},z,L)};function g(E,P){return P=Math.max(a[0],Math.min(a[1],P)),P===E.k?E:new it(P,E.x,E.y)}function C(E,P,k){var z=P[0]-k[0]*E.k,L=P[1]-k[1]*E.k;return z===E.x&&L===E.y?E:new it(E.k,z,L)}function y(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function M(E,P,k,z){E.on("start.zoom",function(){R(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(z).end()}).tween("zoom",function(){var L=this,V=arguments,F=R(L,V).event(z),X=t.apply(L,V),ce=k==null?y(X):typeof k=="function"?k.apply(L,V):k,ne=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),W=L.__zoom,ae=typeof P=="function"?P.apply(L,V):P,Y=l(W.invert(ce).concat(ne/W.k),ae.invert(ce).concat(ne/ae.k));return function(U){if(U===1)U=ae;else{var pe=Y(U),ue=ne/pe[2];U=new it(ue,ce[0]-pe[0]*ue,ce[1]-pe[1]*ue)}F.zoom(null,U)}})}function R(E,P,k){return!k&&E.__zooming||new D(E,P)}function D(E,P){this.that=E,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(E,P),this.taps=0}D.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,P){return this.mouse&&E!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var P=He(this.that).datum();u.call(E,this.that,new Wh(E,{sourceEvent:this.sourceEvent,target:w,type:E,transform:this.that.__zoom,dispatch:u}),P)}};function O(E,...P){if(!e.apply(this,arguments))return;var k=R(this,P).event(E),z=this.__zoom,L=Math.max(a[0],Math.min(a[1],z.k*Math.pow(2,o.apply(this,arguments)))),V=Xe(E);if(k.wheel)(k.mouse[0][0]!==V[0]||k.mouse[0][1]!==V[1])&&(k.mouse[1]=z.invert(k.mouse[0]=V)),clearTimeout(k.wheel);else{if(z.k===L)return;k.mouse=[V,z.invert(V)],kn(this),k.start()}Ft(E),k.wheel=setTimeout(F,m),k.zoom("mouse",n(C(g(z,L),k.mouse[0],k.mouse[1]),k.extent,r));function F(){k.wheel=null,k.end()}}function T(E,...P){if(f||!e.apply(this,arguments))return;var k=E.currentTarget,z=R(this,P,!0).event(E),L=He(E.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",ne,!0),V=Xe(E,k),F=E.clientX,X=E.clientY;Er(E.view),Ao(E),z.mouse=[V,this.__zoom.invert(V)],kn(this),z.start();function ce(W){if(Ft(W),!z.moved){var ae=W.clientX-F,Y=W.clientY-X;z.moved=ae*ae+Y*Y>v}z.event(W).zoom("mouse",n(C(z.that.__zoom,z.mouse[0]=Xe(W,k),z.mouse[1]),z.extent,r))}function ne(W){L.on("mousemove.zoom mouseup.zoom",null),Ar(W.view,z.moved),Ft(W),z.event(W).end()}}function N(E,...P){if(e.apply(this,arguments)){var k=this.__zoom,z=Xe(E.changedTouches?E.changedTouches[0]:E,this),L=k.invert(z),V=k.k*(E.shiftKey?.5:2),F=n(C(g(k,V),z,L),t.apply(this,P),r);Ft(E),s>0?He(this).transition().duration(s).call(M,F,z,E):He(this).call(w.transform,F,z,E)}}function _(E,...P){if(e.apply(this,arguments)){var k=E.touches,z=k.length,L=R(this,P,E.changedTouches.length===z).event(E),V,F,X,ce;for(Ao(E),F=0;F<z;++F)X=k[F],ce=Xe(X,this),ce=[ce,this.__zoom.invert(ce),X.identifier],L.touch0?!L.touch1&&L.touch0[2]!==ce[2]&&(L.touch1=ce,L.taps=0):(L.touch0=ce,V=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(L.taps<2&&(d=ce[0],c=setTimeout(function(){c=null},h)),kn(this),L.start())}}function H(E,...P){if(this.__zooming){var k=R(this,P).event(E),z=E.changedTouches,L=z.length,V,F,X,ce;for(Ft(E),V=0;V<L;++V)F=z[V],X=Xe(F,this),k.touch0&&k.touch0[2]===F.identifier?k.touch0[0]=X:k.touch1&&k.touch1[2]===F.identifier&&(k.touch1[0]=X);if(F=k.that.__zoom,k.touch1){var ne=k.touch0[0],W=k.touch0[1],ae=k.touch1[0],Y=k.touch1[1],U=(U=ae[0]-ne[0])*U+(U=ae[1]-ne[1])*U,pe=(pe=Y[0]-W[0])*pe+(pe=Y[1]-W[1])*pe;F=g(F,Math.sqrt(U/pe)),X=[(ne[0]+ae[0])/2,(ne[1]+ae[1])/2],ce=[(W[0]+Y[0])/2,(W[1]+Y[1])/2]}else if(k.touch0)X=k.touch0[0],ce=k.touch0[1];else return;k.zoom("touch",n(C(F,X,ce),k.extent,r))}}function K(E,...P){if(this.__zooming){var k=R(this,P).event(E),z=E.changedTouches,L=z.length,V,F;for(Ao(E),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),V=0;V<L;++V)F=z[V],k.touch0&&k.touch0[2]===F.identifier?delete k.touch0:k.touch1&&k.touch1[2]===F.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(F=Xe(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<b)){var X=He(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return w.wheelDelta=function(E){return arguments.length?(o=typeof E=="function"?E:_n(+E),w):o},w.filter=function(E){return arguments.length?(e=typeof E=="function"?E:_n(!!E),w):e},w.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:_n(!!E),w):i},w.extent=function(E){return arguments.length?(t=typeof E=="function"?E:_n([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),w):t},w.scaleExtent=function(E){return arguments.length?(a[0]=+E[0],a[1]=+E[1],w):[a[0],a[1]]},w.translateExtent=function(E){return arguments.length?(r[0][0]=+E[0][0],r[1][0]=+E[1][0],r[0][1]=+E[0][1],r[1][1]=+E[1][1],w):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},w.constrain=function(E){return arguments.length?(n=E,w):n},w.duration=function(E){return arguments.length?(s=+E,w):s},w.interpolate=function(E){return arguments.length?(l=E,w):l},w.on=function(){var E=u.on.apply(u,arguments);return E===u?w:E},w.clickDistance=function(E){return arguments.length?(v=(E=+E)*E,w):Math.sqrt(v)},w.tapDistance=function(E){return arguments.length?(b=+E,w):b},w}var se=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(se||{}),pi=(e=>(e.Partial="partial",e.Full="full",e))(pi||{}),vt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(vt||{}),At=(e=>(e.Strict="strict",e.Loose="loose",e))(At||{}),qo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(qo||{}),Zt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Zt||{});function Qo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,a=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||i||!!a}function np(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ra(e,t,n,o){const i=t.split("+").map(a=>a.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((a,r)=>n.has(a)&&Array.from(n.values())[r]===i[r]))}function op(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=ip(n.code,e);return Array.isArray(e)?e.some(i=>ra(n[o],i,t,n.type==="keyup")):ra(n[o],e,t,n.type==="keyup")}}function ip(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Kt(e,t){const n=Ne(()=>_e(t==null?void 0:t.actInsideInputWithModifier)??!1),o=Ne(()=>_e(t==null?void 0:t.target)??window),i=oe(_e(e)===!0);let a=!1;const r=new Set;let s=u(_e(e));ye(()=>_e(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&l(),s=u(c)},{immediate:!0}),Le(()=>{dr(window,["blur","contextmenu"],l)}),Hi((...c)=>s(...c),c=>{a=np(c),!((!a||a&&!n.value)&&Qo(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:o}),Hi((...c)=>s(...c),c=>{if(i.value){if((!a||a&&!n.value)&&Qo(c))return;l()}},{eventName:"keyup",target:o});function l(){a=!1,r.clear(),i.value=!1}function u(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?op(c,r):c}return i}const Br="vue-flow__node-desc",Vr="vue-flow__edge-desc",ap="vue-flow__aria-live",Hr=["Enter"," ","Escape"],$t={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function jo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Jo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function eo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Nt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Gr(e,t){return{x:Nt(e.x,t[0][0],t[1][0]),y:Nt(e.y,t[0][1],t[1][1])}}function sa(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function ft(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function wt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!ft(e)}function Ut(e){return wt(e)&&"computedPosition"in e}function bn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function rp(e){return bn(e.width)&&bn(e.height)&&bn(e.x)&&bn(e.y)}function sp(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Ct({width:0,height:0}),computedPosition:Ct({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ce(e.data)?e.data:{},events:Ct(Ce(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Fr(e,t,n){var o,i;const a={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ce(e.data)?e.data:{},events:Ct(Ce(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function Yr(e,t,n,o){const i=typeof e=="string"?e:e.id,a=new Set,r=o==="source"?"target":"source";for(const s of n)s[r]===i&&a.add(s[o]);return t.filter(s=>a.has(s.id))}function lp(...e){if(e.length===3){const[a,r,s]=e;return Yr(a,r,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>ft(a)&&a.source===o).map(a=>n.find(r=>wt(r)&&r.id===a.target))}function up(...e){if(e.length===3){const[a,r,s]=e;return Yr(a,r,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>ft(a)&&a.target===o).map(a=>n.find(r=>wt(r)&&r.id===a.source))}function Xr({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function cp(e,t){return t.some(n=>ft(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Ur({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Fn({x:e,y:t},{x:n,y:o,zoom:i},a=!1,[r,s]=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return a?{x:r*Math.round(l.x/r),y:s*Math.round(l.y/s)}:l}function dp(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Zr({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function fp({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Kr(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=dp(t,Zr({...o.computedPosition,...o.dimensions}))}return fp(t)}function Wr(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const a={...Fn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},r=[];for(const s of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=s,d=l.width??s.width??null,f=l.height??s.height??null;if(i&&!u||c)continue;const h=Jo(a,jo(s)),m=d===null||f===null,v=o&&h>0,b=(d??0)*(f??0);(m||v||h>=b||s.dragging)&&r.push(s)}return r}function qr(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function la(e,t,n,o,i,a=.1,r={x:0,y:0}){const s=t/(e.width*(1+a)),l=n/(e.height*(1+a)),u=Math.min(s,l),c=Nt(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c+(r.x??0),m=n/2-f*c+(r.y??0);return{x:h,y:m,zoom:c}}function hp(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Qr(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Qr(n,t):!1}function tn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ua(e,t,n){return e<t?Nt(Math.abs(e-t),1,t)/t:e>n?-Nt(Math.abs(e-n),1,t)/t:0}function jr(e,t,n=15,o=40){const i=ua(e.x,o,t.width-o)*n,a=ua(e.y,o,t.height-o)*n;return[i,a]}function No(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const r=t.style;return{...r(a),...i}}:t.style={...t.style,...i}}}}function ca(e,t){var n,o;const i=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of i)if(r.type==="add")t.findIndex(l=>l.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const s=t.findIndex(l=>l.id===r.id);s!==-1&&t.splice(s,1)}const a=t.map(r=>r.id);for(const r of t)for(const s of e)if(s.id===r.id)switch(s.type){case"select":r.selected=s.selected;break;case"position":if(Ut(r)&&(typeof s.position<"u"&&(r.position=s.position),typeof s.dragging<"u"&&(r.dragging=s.dragging),r.expandParent&&r.parentNode)){const l=t[a.indexOf(r.parentNode)];l&&Ut(l)&&No(r,l)}break;case"dimensions":if(Ut(r)&&(typeof s.dimensions<"u"&&(r.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(r.style={...r.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(r.resizing=s.resizing),r.expandParent&&r.parentNode)){const l=t[a.indexOf(r.parentNode)];l&&Ut(l)&&(!!l.dimensions.width&&!!l.dimensions.height?No(r,l):Ve(()=>{No(r,l)}))}break}return t}function st(e,t){return{id:e,type:"select",selected:t}}function da(e){return{item:e,type:"add"}}function fa(e){return{id:e,type:"remove"}}function ha(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function ut(e,t=new Set,n=!1){const o=[];for(const[i,a]of e){const r=t.has(i);!(a.selected===void 0&&!r)&&a.selected!==r&&(n&&(a.selected=r),o.push(st(a.id,r)))}return o}function j(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>{i(s),e&&n&&t.add(e)};return Wn(l),{off:l}},off:i,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:o,fns:t}}function pa(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function pp(e,t,n,o,i){var a,r;const s=[];for(const l of e)(l.selected||l.id===i)&&(!l.parentNode||!Qr(l,o))&&(l.draggable||t&&typeof l.draggable>"u")&&s.push(Ct({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((a=l.computedPosition)==null?void 0:a.x)||0,y:n.y-((r=l.computedPosition)==null?void 0:r.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function Mo({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const a=n(i.id);a&&o.push(a)}return[e?o.find(i=>i.id===e):o[0],o]}function Jr(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function vp(e,t,n){const[o,i,a,r]=typeof e!="string"?Jr(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function gp(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=vp(i,e,o);a&&(i=a)}else t(new ke(Ie.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+r],[i[1][0]+a,i[1][1]+r]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[a,r,s,l]=Jr(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+a],[i.range[1][0]+u-r,i.range[1][1]+c-s]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function mp({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function vi(e,t,n,o,i){const a=mp(e.dimensions,gp(e,n,o,i)),r=Gr(t,a);return{position:{x:r.x-((i==null?void 0:i.computedPosition.x)||0),y:r.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:r}}function Yn(e,t,n=se.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:r}=t??bp(e);switch((t==null?void 0:t.position)??n){case se.Top:return{x:o+a/2,y:i};case se.Right:return{x:o+a,y:i+r/2};case se.Bottom:return{x:o+a/2,y:i+r};case se.Left:return{x:o,y:i+r/2}}}function va(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function yp({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:r,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Zr({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:r/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function _p(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const a=t(e.source),r=t(e.target);return!a||!r?0:(n&&(i=o?e.zIndex:Math.max(a.computedPosition.z||0,r.computedPosition.z||0)),i)}var Ie=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ie||{});const ga={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ke extends Error{constructor(t,...n){var o;super((o=ga[t])==null?void 0:o.call(ga,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function gi(e){return"clientX"in e}function dt(e,t){var n,o;const i=gi(e),a=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const Xn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function bp(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function es(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Do(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ma(e,t,n,o){const i=[];for(const a of t[n]||[])if(`${e.id}-${a.id}-${n}`!==o){const{x:r,y:s}=Yn(e,a);i.push({id:a.id||null,type:n,nodeId:e.id,x:r,y:s})}return i}function wp(e,t,n,o,i,a){const{x:r,y:s}=dt(e),u=t.elementsFromPoint(r,s).find(m=>m.classList.contains("vue-flow__handle"));if(u){const m=u.getAttribute("data-nodeid");if(m){const v=mi(void 0,u),b=u.getAttribute("data-handleid"),w=a({nodeId:m,id:b,type:v});if(w){const g=i.find(C=>C.nodeId===m&&C.type===v&&C.id===b);return{handle:{id:b,type:v,nodeId:m,x:(g==null?void 0:g.x)||n.x,y:(g==null?void 0:g.y)||n.y},validHandleResult:w}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const m of i){const v=Math.sqrt((m.x-n.x)**2+(m.y-n.y)**2);if(v<=o){const b=a(m);v<=d&&(v<d?c=[{handle:m,validHandleResult:b}]:v===d&&c.push({handle:m,validHandleResult:b}),d=v)}}if(!c.length)return{handle:null,validHandleResult:es()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:m})=>m.isValid),h=c.some(({handle:m})=>m.type==="target");return c.find(({handle:m,validHandleResult:v})=>h?m.type==="target":f?v.isValid:!0)||c[0]}function ya(e,t,n,o,i,a,r,s,l,u,c){const d=a==="target",f=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:h,y:m}=dt(e),v=s.elementFromPoint(h,m),b=v!=null&&v.classList.contains("vue-flow__handle")?v:f,w=es();if(b){w.handleDomNode=b;const g=mi(void 0,b),C=b.getAttribute("data-nodeid"),y=b.getAttribute("data-handleid"),M=b.classList.contains("connectable"),R=b.classList.contains("connectableend"),D={source:d?C:o,sourceHandle:d?y:i,target:d?o:C,targetHandle:d?i:y};w.connection=D,M&&R&&(n===At.Strict?d&&g==="source"||!d&&g==="target":C!==o||y!==i)&&(w.isValid=r(D,{edges:l,nodes:u,sourceNode:c(D.source),targetNode:c(D.target)}),w.endHandle={nodeId:C,handleId:y,type:g,position:w.isValid?b.getAttribute("data-handlepos"):null})}return w}function Sp({nodes:e,nodeId:t,handleId:n,handleType:o}){const i=[];for(let a=0;a<e.length;a++){const r=e[a],{handleBounds:s}=r;let l=[],u=[];s&&(l=ma(r,s,"source",`${t}-${n}-${o}`),u=ma(r,s,"target",`${t}-${n}-${o}`)),i.push(...l,...u)}return i}function mi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xp(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Ep=["production","prod"];function to(e,...t){ts()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ts(){return!Ep.includes("production")}function _a(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(r=>{const s=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...eo(r)}})}function ei(e,t,n,o,i,a=!1,r){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),Ve(()=>{r.blur()})):n([e])}function Ce(e){return typeof S(e)<"u"}function Ap(e,t,n,o){if(!e||!e.source||!e.target)return n(new ke(Ie.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return ft(e)?i=e:i={...e,id:Xr(e)},i=Fr(i,void 0,o),cp(i,t)?!1:i}function Np(e,t,n,o,i,a){if(!t.source||!t.target)return a(new ke(Ie.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return a(new ke(Ie.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...l}=e,u={...l,id:i?Xr(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,u),u}function ba(e,t,n){const o={},i=[];for(let a=0;a<e.length;++a){const r=e[a];if(!wt(r)){n(new ke(Ie.NODE_INVALID,r==null?void 0:r.id)||`[ID UNKNOWN|INDEX ${a}]`);continue}const s=sp(r,t(r.id),r.parentNode);r.parentNode&&(o[r.parentNode]=!0),i[a]=s}for(const a of i){const r=t(a.parentNode)||i.find(s=>s.id===a.parentNode);a.parentNode&&!r&&n(new ke(Ie.NODE_MISSING_PARENT,a.id,a.parentNode)),(a.parentNode||o[a.id])&&(o[a.id]&&(a.isParent=!0),r&&(r.isParent=!0))}return i}function wa(e,t){e.clear();for(const n of t){const{id:o,source:i,target:a,sourceHandle:r=null,targetHandle:s=null}=n,l=`${i}-source-${r}`,u=`${a}-target-${s}`,c=e.get(l)||new Map,d=e.get(u)||new Map,f=Ct({edgeId:o,source:i,target:a,sourceHandle:r,targetHandle:s});e.set(l,c.set(`${a}-${s}`,f)),e.set(u,d.set(`${i}-${r}`,f))}}function Sa(e,t,n,o,i,a,r,s){const l=[];for(const u of e){const c=ft(u)?u:Ap(u,s,i,a);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new ke(Ie.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new ke(Ie.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new ke(Ie.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:s,nodes:r,sourceNode:d,targetNode:f})){i(new ke(Ie.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...Fr(c,h,a),sourceNode:d,targetNode:f})}return l}const xa=Symbol("vueFlow"),ns=Symbol("nodeId"),os=Symbol("nodeRef"),Mp=Symbol("edgeId"),Dp=Symbol("edgeRef"),no=Symbol("slots");function is(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:a,nodeExtent:r,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:m,nodesSelectionActive:v,selectNodesOnDrag:b,removeSelectedElements:w,addSelectedNodes:g,updateNodePositions:C,emits:y}=Ae(),{onStart:M,onDrag:R,onStop:D,onClick:O,el:T,disabled:N,id:_,selectable:H,dragHandle:K}=e,E=oe(!1);let P=[],k,z=null,L={x:void 0,y:void 0},V={x:0,y:0},F=null,X=!1,ce=0,ne=!1;const W=kp(),ae=({x:ee,y:ie})=>{L={x:ee,y:ie};let Z=!1;if(P=P.map(p=>{const x={x:ee-p.distance.x,y:ie-p.distance.y};n.value&&(x.x=o.value[0]*Math.round(x.x/o.value[0]),x.y=o.value[1]*Math.round(x.y/o.value[1]));const{computedPosition:$}=vi(p,x,y.error,r.value,p.parentNode?h(p.parentNode):void 0);return Z=Z||p.position.x!==$.x||p.position.y!==$.y,p.position=$,p}),!!Z&&(C(P,!0,!0),E.value=!0,F)){const[p,x]=Mo({id:_,dragItems:P,findNode:h});R({event:F,node:p,nodes:x})}},Y=()=>{if(!z)return;const[ee,ie]=jr(V,z,c.value);if(ee!==0||ie!==0){const Z={x:(L.x??0)-ee/l.value.zoom,y:(L.y??0)-ie/l.value.zoom};f({x:ee,y:ie})&&ae(Z)}ce=requestAnimationFrame(Y)},U=(ee,ie)=>{X=!0;const Z=h(_);!b.value&&!m.value&&Z&&(Z.selected||w()),Z&&_e(H)&&b.value&&ei(Z,m.value,g,w,v,!1,ie);const p=W(ee);if(L=p,P=pp(a.value,d.value,p,h,_),P.length){const[x,$]=Mo({id:_,dragItems:P,findNode:h});M({event:ee.sourceEvent,node:x,nodes:$})}},pe=(ee,ie)=>{var Z;ee.sourceEvent.type==="touchmove"&&ee.sourceEvent.touches.length>1||(s.value===0&&U(ee,ie),L=W(ee),z=((Z=t.value)==null?void 0:Z.getBoundingClientRect())||null,V=dt(ee.sourceEvent,z))},ue=(ee,ie)=>{const Z=W(ee);if(!ne&&X&&u.value&&(ne=!0,Y()),!X){const p=Z.xSnapped-(L.x??0),x=Z.ySnapped-(L.y??0);Math.sqrt(p*p+x*x)>s.value&&U(ee,ie)}(L.x!==Z.xSnapped||L.y!==Z.ySnapped)&&P.length&&X&&(F=ee.sourceEvent,V=dt(ee.sourceEvent,z),ae(Z))},he=ee=>{if(!E.value&&!m.value&&(O==null||O(ee.sourceEvent)),E.value=!1,ne=!1,X=!1,L={x:void 0,y:void 0},cancelAnimationFrame(ce),P.length){C(P,!1,!1);const[ie,Z]=Mo({id:_,dragItems:P,findNode:h});D({event:ee.sourceEvent,node:ie,nodes:Z})}};return ye([()=>_e(N),T],([ee,ie],Z,p)=>{if(ie){const x=He(ie);ee||(k=df().on("start",$=>pe($,ie)).on("drag",$=>ue($,ie)).on("end",$=>he($)).filter($=>{const A=$.target,G=_e(K);return!$.button&&(!i.value||!pa(A,`.${i.value}`,ie)&&(!G||pa(A,G,ie)))}),x.call(k)),p(()=>{x.on(".drag",null),k&&(k.on("start",null),k.on("drag",null),k.on("end",null))})}}),E}function Cp(){return{doubleClick:j(),click:j(),mouseEnter:j(),mouseMove:j(),mouseLeave:j(),contextMenu:j(),updateStart:j(),update:j(),updateEnd:j()}}function Ip(e,t){const n=Cp();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function kp(){const{viewport:e,snapGrid:t,snapToGrid:n}=Ae();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,r={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function wn(){return!0}function as({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:r}){const{vueFlowRef:s,connectionMode:l,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:h,autoPanSpeed:m,findNode:v,panBy:b,startConnection:w,updateConnection:g,endConnection:C,emits:y,viewport:M,edges:R,nodes:D,isValidConnection:O}=Ae();let T=null,N=!1,_=null,H=null;function K(P){var k;const z=_e(n)==="target",L=gi(P),V=sa(P.target);if(L&&P.button===0||!L){let F=function($){ie=dt($,he);const{handle:A,validHandleResult:G}=wp($,V,Fn(ie,M.value,!1,[1,1]),u.value,p,re=>ya($,re,l.value,_e(t),_e(e),z?"target":"source",ne,V,R.value,D.value,v));if(W=A,Z||(x(),Z=!0),T=G.connection,N=G.isValid,_=G.handleDomNode,!(N&&W&&(H!=null&&H.endHandle)&&G.endHandle&&H.endHandle.type===G.endHandle.type&&H.endHandle.nodeId===G.endHandle.nodeId&&H.endHandle.handleId===G.endHandle.handleId)){if(g(W&&N?Ur({x:W.x,y:W.y},M.value):ie,G.endHandle,xp(!!W,N)),H=G,!W&&!N&&!_)return Do(ee);T&&T.source!==T.target&&_&&(Do(ee),ee=_,_.classList.add("connecting","vue-flow__handle-connecting"),_.classList.toggle("valid",N),_.classList.toggle("vue-flow__handle-valid",N))}},X=function($){(W||_)&&T&&N&&(a?a($,T):y.connect(T)),y.connectEnd($),i&&(r==null||r($)),Do(ee),cancelAnimationFrame(ae),C($),Z=!1,N=!1,T=null,_=null,V.removeEventListener("mousemove",F),V.removeEventListener("mouseup",X),V.removeEventListener("touchmove",F),V.removeEventListener("touchend",X)};const ce=v(_e(t));let ne=_e(o)||O.value||wn;!ne&&ce&&(ne=(z?ce.isValidSourcePos:ce.isValidTargetPos)||wn);let W,ae=0;const{x:Y,y:U}=dt(P),pe=V==null?void 0:V.elementFromPoint(Y,U),ue=mi(_e(i),pe),he=(k=s.value)==null?void 0:k.getBoundingClientRect();if(!he||!ue)return;let ee,ie=dt(P,he),Z=!1;const p=Sp({nodes:D.value,nodeId:_e(t),handleId:_e(e),handleType:ue}),x=()=>{if(!h.value)return;const[$,A]=jr(ie,he,m.value);b({x:$,y:A}),ae=requestAnimationFrame(x)};w({nodeId:_e(t),handleId:_e(e),type:ue,position:(pe==null?void 0:pe.getAttribute("data-handlepos"))||se.Top},{x:Y-he.left,y:U-he.top}),y.connectStart({event:P,nodeId:_e(t),handleId:_e(e),handleType:ue}),V.addEventListener("mousemove",F),V.addEventListener("mouseup",X),V.addEventListener("touchmove",F),V.addEventListener("touchend",X)}}function E(P){if(!c.value)return;const k=_e(n)==="target";if(!d.value)y.clickConnectStart({event:P,nodeId:_e(t),handleId:_e(e)}),w({nodeId:_e(t),type:_e(n),handleId:_e(e)},void 0,!0);else{let z=_e(o)||O.value||wn;const L=v(_e(t));if(!z&&L&&(z=(k?L.isValidSourcePos:L.isValidTargetPos)||wn),L&&(typeof L.connectable>"u"?f.value:L.connectable)===!1)return;const V=sa(P.target),{connection:F,isValid:X}=ya(P,{nodeId:_e(t),id:_e(e),type:_e(n)},l.value,d.value.nodeId,d.value.handleId||null,d.value.type,z,V,R.value,D.value,v),ce=F.source===F.target;X&&!ce&&y.connect(F),y.clickConnectEnd(P),C(P,!0)}}return{handlePointerDown:K,handleClick:E}}function $p(){return Bt(ns,"")}function rs(e){const t=e??$p()??"",n=Bt(os,oe(null)),{findNode:o,edges:i,emits:a}=Ae(),r=o(t);return r||a.error(new ke(Ie.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:J(()=>o(r.parentNode)),connectedEdges:J(()=>qr([r],i.value))}}function Pp(){return{doubleClick:j(),click:j(),mouseEnter:j(),mouseMove:j(),mouseLeave:j(),contextMenu:j(),dragStart:j(),drag:j(),dragStop:j()}}function Tp(e,t){const n=Pp();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function ss(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:r,emits:s}=Ae();return(l,u=!1)=>{const c=a.value?i.value[0]:5,d=a.value?i.value[1]:5,f=u?4:1,h=l.x*c*f,m=l.y*d*f,v=[];for(const b of e.value)if(b.draggable||r&&typeof b.draggable>"u"){const w={x:b.computedPosition.x+h,y:b.computedPosition.y+m},{computedPosition:g}=vi(b,w,s.error,t.value,b.parentNode?o(b.parentNode):void 0);v.push({id:b.id,position:g,from:b.position,distance:{x:l.x,y:l.y},dimensions:b.dimensions})}n(v,!0,!1)}}const Co=.1;function rt(){return to("Viewport not initialized yet."),Promise.resolve(!1)}const Op={zoomIn:rt,zoomOut:rt,zoomTo:rt,fitView:rt,setCenter:rt,fitBounds:rt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:rt,setTransform:rt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Rp(e){function t(o,i){return new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Io(e.d3Selection,i,()=>{a(!0)}),o):a(!1)})}function n(o,i,a,r){return new Promise(s=>{const{x:l,y:u}=Gr({x:-o,y:-i},e.translateExtent),c=Lt.translate(-l,-u).scale(a);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Io(e.d3Selection,r,()=>{s(!0)}),c):s(!1)})}return J(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,a)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Io(e.d3Selection,a==null?void 0:a.duration,()=>{r(!0)}),i):r(!1)}),setViewport:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),setTransform:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Co,includeHiddenNodes:!1,duration:0})=>{var a,r;const s=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((a=i.nodes)!=null&&a.length)||(r=i.nodes)!=null&&r.length&&i.nodes.includes(f.id))&&s.push(f);if(!s.length)return Promise.resolve(!1);const l=Kr(s),{x:u,y:c,zoom:d}=la(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Co,i.offset);return n(u,c,d,i==null?void 0:i.duration)},setCenter:(i,a,r)=>{const s=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,l=e.dimensions.width/2-i*s,u=e.dimensions.height/2-a*s;return n(l,u,s,r==null?void 0:r.duration)},fitBounds:(i,a={padding:Co})=>{const{x:r,y:s,zoom:l}=la(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,a.padding);return n(r,s,l,a==null?void 0:a.duration)},project:i=>Fn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x-a,y:i.y-r};return Fn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x+a,y:i.y+r};return Ur(s,e.viewport)}return{x:0,y:0}}}:Op)}function Io(e,t=0,n){return e.transition().duration(t).on("end",n)}function zp(e,t,n){const o=Xa(!0);return o.run(()=>{const i=()=>{o.run(()=>{let v,b,w=!!(n.nodes.value.length||n.edges.value.length);v=Dt([e.modelValue,()=>{var g,C;return(C=(g=e.modelValue)==null?void 0:g.value)==null?void 0:C.length}],([g])=>{g&&Array.isArray(g)&&(b==null||b.pause(),n.setElements(g),!b&&!w&&g.length?w=!0:b==null||b.resume())}),b=Dt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([g,C])=>{var y;(y=e.modelValue)!=null&&y.value&&Array.isArray(e.modelValue.value)&&(v==null||v.pause(),e.modelValue.value=[...g,...C],Ve(()=>{v==null||v.resume()}))},{immediate:w}),An(()=>{v==null||v.stop(),b==null||b.stop()})})},a=()=>{o.run(()=>{let v,b,w=!!n.nodes.value.length;v=Dt([e.nodes,()=>{var g,C;return(C=(g=e.nodes)==null?void 0:g.value)==null?void 0:C.length}],([g])=>{g&&Array.isArray(g)&&(b==null||b.pause(),n.setNodes(g),!b&&!w&&g.length?w=!0:b==null||b.resume())}),b=Dt([n.nodes,()=>n.nodes.value.length],([g])=>{var C;(C=e.nodes)!=null&&C.value&&Array.isArray(e.nodes.value)&&(v==null||v.pause(),e.nodes.value=[...g],Ve(()=>{v==null||v.resume()}))},{immediate:w}),An(()=>{v==null||v.stop(),b==null||b.stop()})})},r=()=>{o.run(()=>{let v,b,w=!!n.edges.value.length;v=Dt([e.edges,()=>{var g,C;return(C=(g=e.edges)==null?void 0:g.value)==null?void 0:C.length}],([g])=>{g&&Array.isArray(g)&&(b==null||b.pause(),n.setEdges(g),!b&&!w&&g.length?w=!0:b==null||b.resume())}),b=Dt([n.edges,()=>n.edges.value.length],([g])=>{var C;(C=e.edges)!=null&&C.value&&Array.isArray(e.edges.value)&&(v==null||v.pause(),e.edges.value=[...g],Ve(()=>{v==null||v.resume()}))},{immediate:w}),An(()=>{v==null||v.stop(),b==null||b.stop()})})},s=()=>{o.run(()=>{ye(()=>t.maxZoom,()=>{t.maxZoom&&Ce(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{ye(()=>t.minZoom,()=>{t.minZoom&&Ce(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ye(()=>t.translateExtent,()=>{t.translateExtent&&Ce(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ye(()=>t.nodeExtent,()=>{t.nodeExtent&&Ce(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ye(()=>t.applyDefault,()=>{Ce(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const v=async b=>{let w=b;typeof t.autoConnect=="function"&&(w=await t.autoConnect(b)),w!==!1&&n.addEdges([w])};ye(()=>t.autoConnect,()=>{Ce(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ye(n.autoConnect,(b,w,g)=>{b?n.onConnect(v):n.hooks.value.connect.off(v),g(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},h=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const b of Object.keys(t)){const w=b;if(!v.includes(w)){const g=Ne(()=>t[w]),C=n[w];Be(C)&&o.run(()=>{ye(g,y=>{Ce(y)&&(C.value=y)},{immediate:!0})})}}};(()=>{i(),a(),r(),l(),s(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function Lp(){return{edgesChange:j(),nodesChange:j(),nodeDoubleClick:j(),nodeClick:j(),nodeMouseEnter:j(),nodeMouseMove:j(),nodeMouseLeave:j(),nodeContextMenu:j(),nodeDragStart:j(),nodeDrag:j(),nodeDragStop:j(),nodesInitialized:j(),miniMapNodeClick:j(),miniMapNodeDoubleClick:j(),miniMapNodeMouseEnter:j(),miniMapNodeMouseMove:j(),miniMapNodeMouseLeave:j(),connect:j(),connectStart:j(),connectEnd:j(),clickConnectStart:j(),clickConnectEnd:j(),paneReady:j(),init:j(),move:j(),moveStart:j(),moveEnd:j(),selectionDragStart:j(),selectionDrag:j(),selectionDragStop:j(),selectionContextMenu:j(),selectionStart:j(),selectionEnd:j(),viewportChangeStart:j(),viewportChange:j(),viewportChangeEnd:j(),paneScroll:j(),paneClick:j(),paneContextMenu:j(),paneMouseEnter:j(),paneMouseMove:j(),paneMouseLeave:j(),edgeContextMenu:j(),edgeMouseEnter:j(),edgeMouseMove:j(),edgeMouseLeave:j(),edgeDoubleClick:j(),edgeClick:j(),edgeUpdateStart:j(),edgeUpdate:j(),edgeUpdateEnd:j(),updateNodeInternals:j(),error:j(e=>to(e.message))}}function Bp(e,t){cl(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.fns.add(i),Wn(()=>{o.off(i)})}})}function ls(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:pi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Zt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:vt.Bezier,style:{}},connectionMode:At.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Xn()?"Meta":"Control",zoomActivationKeyCode:Xn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Lp(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Vp=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Hp(e,t,n){const o=Rp(e),i=p=>{const x=p??[];e.hooks.updateNodeInternals.trigger(x)},a=p=>up(p,e.nodes,e.edges),r=p=>lp(p,e.nodes,e.edges),s=p=>qr(p,e.edges),l=({id:p,type:x,nodeId:$})=>{var A;return Array.from(((A=e.connectionLookup.get(`${$}-${x}-${p??null}`))==null?void 0:A.values())??[])},u=p=>{if(p)return t.value.get(p)},c=p=>{if(p)return n.value.get(p)},d=(p,x,$)=>{var A,G;const re=[];for(const B of p){const de={id:B.id,type:"position",dragging:$,from:B.from};if(x&&(de.position=B.position,B.parentNode)){const ge=u(B.parentNode);de.position={x:de.position.x-(((A=ge==null?void 0:ge.computedPosition)==null?void 0:A.x)??0),y:de.position.y-(((G=ge==null?void 0:ge.computedPosition)==null?void 0:G.y)??0)}}re.push(de)}re!=null&&re.length&&e.hooks.nodesChange.trigger(re)},f=p=>{if(!e.vueFlowRef)return;const x=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!x)return;const $=window.getComputedStyle(x),{m22:A}=new window.DOMMatrixReadOnly($.transform),G=[];for(let re=0;re<p.length;++re){const B=p[re],de=u(B.id);if(de){const ge=eo(B.nodeElement);if(!!(ge.width&&ge.height&&(de.dimensions.width!==ge.width||de.dimensions.height!==ge.height||B.forceUpdate))){const we=B.nodeElement.getBoundingClientRect();de.dimensions=ge,de.handleBounds.source=_a(".source",B.nodeElement,we,A),de.handleBounds.target=_a(".target",B.nodeElement,we,A),G.push({id:de.id,type:"dimensions",dimensions:ge})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),G.length&&e.hooks.nodesChange.trigger(G)},h=(p,x)=>{const $=new Set,A=new Set;for(const B of p)wt(B)?$.add(B.id):ft(B)&&A.add(B.id);const G=ut(t.value,$,!0),re=ut(n.value,A);if(e.multiSelectionActive){for(const B of $)G.push(st(B,x));for(const B of A)re.push(st(B,x))}G.length&&e.hooks.nodesChange.trigger(G),re.length&&e.hooks.edgesChange.trigger(re)},m=p=>{if(e.multiSelectionActive){const x=p.map($=>st($.id,!0));e.hooks.nodesChange.trigger(x);return}e.hooks.nodesChange.trigger(ut(t.value,new Set(p.map(x=>x.id)),!0)),e.hooks.edgesChange.trigger(ut(n.value))},v=p=>{if(e.multiSelectionActive){const x=p.map($=>st($.id,!0));e.hooks.edgesChange.trigger(x);return}e.hooks.edgesChange.trigger(ut(n.value,new Set(p.map(x=>x.id)))),e.hooks.nodesChange.trigger(ut(t.value,new Set,!0))},b=p=>{h(p,!0)},w=p=>{const $=(p||e.nodes).map(A=>(A.selected=!1,st(A.id,!1)));e.hooks.nodesChange.trigger($)},g=p=>{const $=(p||e.edges).map(A=>(A.selected=!1,st(A.id,!1)));e.hooks.edgesChange.trigger($)},C=p=>{if(!p||!p.length)return h([],!1);const x=p.reduce(($,A)=>{const G=st(A.id,!1);return wt(A)?$.nodes.push(G):$.edges.push(G),$},{nodes:[],edges:[]});x.nodes.length&&e.hooks.nodesChange.trigger(x.nodes),x.edges.length&&e.hooks.edgesChange.trigger(x.edges)},y=p=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([p,e.maxZoom]),e.minZoom=p},M=p=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([e.minZoom,p]),e.maxZoom=p},R=p=>{var x;(x=e.d3Zoom)==null||x.translateExtent(p),e.translateExtent=p},D=p=>{e.nodeExtent=p,i()},O=p=>{var x;(x=e.d3Zoom)==null||x.clickDistance(p)},T=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},N=p=>{const x=p instanceof Function?p(e.nodes):p;!e.initialized&&!x.length||(e.nodes=ba(x,u,e.hooks.error.trigger))},_=p=>{const x=p instanceof Function?p(e.edges):p;if(!e.initialized&&!x.length)return;const $=Sa(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);wa(e.connectionLookup,$),e.edges=$},H=p=>{const x=p instanceof Function?p([...e.nodes,...e.edges]):p;!e.initialized&&!x.length||(N(x.filter(wt)),_(x.filter(ft)))},K=p=>{let x=p instanceof Function?p(e.nodes):p;x=Array.isArray(x)?x:[x];const $=ba(x,u,e.hooks.error.trigger),A=[];for(const G of $)A.push(da(G));A.length&&e.hooks.nodesChange.trigger(A)},E=p=>{let x=p instanceof Function?p(e.edges):p;x=Array.isArray(x)?x:[x];const $=Sa(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),A=[];for(const G of $)A.push(da(G));A.length&&e.hooks.edgesChange.trigger(A)},P=(p,x=!0,$=!1)=>{const A=p instanceof Function?p(e.nodes):p,G=Array.isArray(A)?A:[A],re=[],B=[];function de(be){const we=s(be);for(const Ee of we)(!Ce(Ee.deletable)||Ee.deletable)&&B.push(ha(Ee.id,Ee.source,Ee.target,Ee.sourceHandle,Ee.targetHandle))}function ge(be){const we=[];for(const Ee of e.nodes)Ee.parentNode===be&&we.push(Ee);if(we.length){for(const Ee of we)re.push(fa(Ee.id));x&&de(we);for(const Ee of we)ge(Ee.id)}}for(const be of G){const we=typeof be=="string"?u(be):be;we&&(Ce(we.deletable)&&!we.deletable||(re.push(fa(we.id)),x&&de([we]),$&&ge(we.id)))}B.length&&e.hooks.edgesChange.trigger(B),re.length&&e.hooks.nodesChange.trigger(re)},k=p=>{const x=p instanceof Function?p(e.edges):p,$=Array.isArray(x)?x:[x],A=[];for(const G of $){const re=typeof G=="string"?c(G):G;re&&(Ce(re.deletable)&&!re.deletable||A.push(ha(typeof G=="string"?G:G.id,re.source,re.target,re.sourceHandle,re.targetHandle)))}e.hooks.edgesChange.trigger(A)},z=(p,x,$=!0)=>Np(p,x,e.edges,c,$,e.hooks.error.trigger),L=(p,x,$={replace:!1})=>{const A=c(p);if(!A)return;const G=typeof x=="function"?x(A):x;A.data=$.replace?G:{...A.data,...G}},V=p=>ca(p,e.nodes),F=p=>{const x=ca(p,e.edges);return wa(e.connectionLookup,x),x},X=(p,x,$={replace:!1})=>{const A=u(p);if(!A)return;const G=typeof x=="function"?x(A):x;$.replace?e.nodes.splice(e.nodes.indexOf(A),1,G):Object.assign(A,G)},ce=(p,x,$={replace:!1})=>{const A=u(p);if(!A)return;const G=typeof x=="function"?x(A):x;A.data=$.replace?G:{...A.data,...G}},ne=(p,x,$=!1)=>{$?e.connectionClickStartHandle=p:e.connectionStartHandle=p,e.connectionEndHandle=null,e.connectionStatus=null,x&&(e.connectionPosition=x)},W=(p,x=null,$=null)=>{e.connectionStartHandle&&(e.connectionPosition=p,e.connectionEndHandle=x,e.connectionStatus=$)},ae=(p,x)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,x?e.connectionClickStartHandle=null:e.connectionStartHandle=null},Y=p=>{const x=rp(p),$=x?null:Ut(p)?p:u(p.id);return!x&&!$?[null,null,x]:[x?p:jo($),$,x]},U=(p,x=!0,$=e.nodes)=>{const[A,G,re]=Y(p);if(!A)return[];const B=[];for(const de of $||e.nodes){if(!re&&(de.id===G.id||!de.computedPosition))continue;const ge=jo(de),be=Jo(ge,A);(x&&be>0||be>=Number(A.width)*Number(A.height))&&B.push(de)}return B},pe=(p,x,$=!0)=>{const[A]=Y(p);if(!A)return!1;const G=Jo(A,x);return $&&G>0||G>=Number(A.width)*Number(A.height)},ue=p=>{const{viewport:x,dimensions:$,d3Zoom:A,d3Selection:G,translateExtent:re}=e;if(!A||!G||!p.x&&!p.y)return!1;const B=Lt.translate(x.x+p.x,x.y+p.y).scale(x.zoom),de=[[0,0],[$.width,$.height]],ge=A.constrain()(B,de,re),be=e.viewport.x!==ge.x||e.viewport.y!==ge.y||e.viewport.zoom!==ge.k;return A.transform(G,ge),be},he=p=>{const x=p instanceof Function?p(e):p,$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ce(x.defaultEdgeOptions)&&(e.defaultEdgeOptions=x.defaultEdgeOptions);const A=x.modelValue||x.nodes||x.edges?[]:void 0;A&&(x.modelValue&&A.push(...x.modelValue),x.nodes&&A.push(...x.nodes),x.edges&&A.push(...x.edges),H(A));const G=()=>{Ce(x.maxZoom)&&M(x.maxZoom),Ce(x.minZoom)&&y(x.minZoom),Ce(x.translateExtent)&&R(x.translateExtent)};for(const re of Object.keys(x)){const B=re,de=x[B];![...Vp,...$].includes(B)&&Ce(de)&&(e[B]=de)}Ho(()=>e.d3Zoom).not.toBeNull().then(G),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:H,setNodes:N,setEdges:_,addNodes:K,addEdges:E,removeNodes:P,removeEdges:k,findNode:u,findEdge:c,updateEdge:z,updateEdgeData:L,updateNode:X,updateNodeData:ce,applyEdgeChanges:F,applyNodeChanges:V,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:y,setMaxZoom:M,setTranslateExtent:R,setNodeExtent:D,setPaneClickDistance:O,removeSelectedElements:C,removeSelectedNodes:w,removeSelectedEdges:g,startConnection:ne,updateConnection:W,endConnection:ae,setInteractive:T,setState:he,getIntersectingNodes:U,getIncomers:a,getOutgoers:r,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:pe,panBy:ue,fitView:p=>o.value.fitView(p),zoomIn:p=>o.value.zoomIn(p),zoomOut:p=>o.value.zoomOut(p),zoomTo:(p,x)=>o.value.zoomTo(p,x),setViewport:(p,x)=>o.value.setViewport(p,x),setTransform:(p,x)=>o.value.setTransform(p,x),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(p,x,$)=>o.value.setCenter(p,x,$),fitBounds:(p,x)=>o.value.fitBounds(p,x),project:p=>o.value.project(p),screenToFlowCoordinate:p=>o.value.screenToFlowCoordinate(p),flowToScreenCoordinate:p=>o.value.flowToScreenCoordinate(p),toObject:()=>{const p=[],x=[];for(const $ of e.nodes){const{computedPosition:A,handleBounds:G,selected:re,dimensions:B,isParent:de,resizing:ge,dragging:be,events:we,...Ee}=$;p.push(Ee)}for(const $ of e.edges){const{selected:A,sourceNode:G,targetNode:re,events:B,...de}=$;x.push(de)}return JSON.parse(JSON.stringify({nodes:p,edges:x,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:p=>new Promise(x=>{const{nodes:$,edges:A,position:G,zoom:re,viewport:B}=p;if($&&N($),A&&_(A),B!=null&&B.x&&(B!=null&&B.y)||G){const de=(B==null?void 0:B.x)||G[0],ge=(B==null?void 0:B.y)||G[1],be=(B==null?void 0:B.zoom)||re||e.viewport.zoom;return Ho(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:de,y:ge,zoom:be}).then(()=>{x(!0)})})}else x(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const p=ls();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const x=Lt.translate(p.defaultViewport.x??0,p.defaultViewport.y??0).scale(Nt(p.defaultViewport.zoom??1,p.minZoom,p.maxZoom)),$=e.viewportRef.getBoundingClientRect(),A=[[0,0],[$.width,$.height]],G=e.d3Zoom.constrain()(x,A,p.translateExtent);e.d3Zoom.transform(e.d3Selection,G)}he(p)},$destroy:()=>{}}}const Gp=["data-id","data-handleid","data-nodeid","data-handlepos"],Fp={name:"Handle",compatConfig:{MODE:3}},nn=ve({...Fp,props:{id:{default:null},type:{},position:{default:()=>se.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Za(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ne(()=>n.type??"source"),i=Ne(()=>n.isValidConnection??null),{connectionStartHandle:a,connectionClickStartHandle:r,connectionEndHandle:s,vueFlowRef:l,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Ae(),{id:f,node:h,nodeEl:m,connectedEdges:v}=rs(),b=oe(),w=Ne(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),g=Ne(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),C=Ne(()=>{var N,_,H,K,E,P;return((N=a.value)==null?void 0:N.nodeId)===f&&((_=a.value)==null?void 0:_.handleId)===e.id&&((H=a.value)==null?void 0:H.type)===o.value||((K=s.value)==null?void 0:K.nodeId)===f&&((E=s.value)==null?void 0:E.handleId)===e.id&&((P=s.value)==null?void 0:P.type)===o.value}),y=Ne(()=>{var N,_,H;return((N=r.value)==null?void 0:N.nodeId)===f&&((_=r.value)==null?void 0:_.handleId)===e.id&&((H=r.value)==null?void 0:H.type)===o.value}),{handlePointerDown:M,handleClick:R}=as({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),D=J(()=>typeof e.connectable=="string"&&e.connectable==="single"?!v.value.some(N=>{const _=N[`${o.value}Handle`];return N[o.value]!==f?!1:_?_===e.id:!0}):typeof e.connectable=="number"?v.value.filter(N=>{const _=N[`${o.value}Handle`];return N[o.value]!==f?!1:_?_===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(h,v.value):Ce(e.connectable)?e.connectable:u.value);Le(()=>{var N;if(!h.dimensions.width||!h.dimensions.height)return;const _=(N=h.handleBounds[o.value])==null?void 0:N.find(L=>L.id===e.id);if(!l.value||_)return;const H=l.value.querySelector(".vue-flow__transformationpane");if(!m.value||!b.value||!H||!e.id)return;const K=m.value.getBoundingClientRect(),E=b.value.getBoundingClientRect(),P=window.getComputedStyle(H),{m22:k}=new window.DOMMatrixReadOnly(P.transform),z={id:e.id,position:e.position,x:(E.left-K.left)/k,y:(E.top-K.top)/k,...eo(b.value)};h.handleBounds[o.value]=[...h.handleBounds[o.value]??[],z]}),ii(()=>{const N=h.handleBounds[o.value];N&&(h.handleBounds[o.value]=N.filter(_=>_.id!==e.id))});function O(N){const _=gi(N);D.value&&w.value&&(_&&N.button===0||!_)&&M(N)}function T(N){!f||!r.value&&!w.value||D.value&&R(N)}return t({handleClick:R,handlePointerDown:M,onClick:T,onPointerDown:O}),(N,_)=>(q(),le("div",{ref_key:"handle",ref:b,"data-id":`${S(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":S(f),"data-handlepos":N.position,class:Qe(["vue-flow__handle",[`vue-flow__handle-${N.position}`,`vue-flow__handle-${e.id}`,S(c),S(d),o.value,{connectable:D.value,connecting:y.value,connectablestart:w.value,connectableend:g.value,connectionindicator:D.value&&(w.value&&!C.value||g.value&&C.value)}]]),onMousedown:O,onTouchstartPassive:O,onClick:T},[St(N.$slots,"default",{id:N.id})],42,Gp))}}),oo=function({sourcePosition:e=se.Bottom,targetPosition:t=se.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a,data:r}){const s=r.label||n;return[xe(nn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof s!="string"&&s?xe(s):xe("div",{innerHTML:s}),xe(nn,{type:"source",position:e,connectable:o,isValidConnection:a})]};oo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];oo.inheritAttrs=!1;oo.compatConfig={MODE:3};const Yp=oo,io=function({targetPosition:e=se.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const a=i.label||t;return[xe(nn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof a!="string"&&a?xe(a):xe("div",{innerHTML:a})]};io.props=["targetPosition","label","isValidTargetPos","connectable","data"];io.inheritAttrs=!1;io.compatConfig={MODE:3};const Xp=io,ao=function({sourcePosition:e=se.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const a=i.label||t;return[typeof a!="string"&&a?xe(a):xe("div",{innerHTML:a}),xe(nn,{type:"source",position:e,connectable:n,isValidConnection:o})]};ao.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ao.inheritAttrs=!1;ao.compatConfig={MODE:3};const Up=ao,Zp=["transform"],Kp=["width","height","x","y","rx","ry"],Wp=["y"],qp={name:"EdgeText",compatConfig:{MODE:3}},Qp=ve({...qp,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=oe({x:0,y:0,width:0,height:0}),n=oe(null),o=J(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Le(i),ye([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,r)=>(q(),le("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(q(),le("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:qe(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,Kp)):Me("",!0),I("text",vl(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[St(a.$slots,"default",{},()=>[typeof a.label!="string"?(q(),$e(pl(a.label),{key:0})):(q(),le(Pe,{key:1},[_t(te(a.label),1)],64))])],16,Wp)],8,Zp))}}),jp=["id","d","marker-end","marker-start"],Jp=["d","stroke-width"],ev={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ro=ve({...ev,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Za(e,["interactionWidth","labelShowBg"]),o=oe(null),i=oe(null),a=oe(null),r=hl();return t({pathEl:o,interactionEl:i,labelEl:a}),(s,l)=>(q(),le(Pe,null,[I("path",{id:s.id,ref_key:"pathEl",ref:o,d:s.path,style:qe(n.style),class:Qe(["vue-flow__edge-path",S(r).class]),"marker-end":s.markerEnd,"marker-start":s.markerStart},null,14,jp),s.interactionWidth?(q(),le("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Jp)):Me("",!0),s.label&&s.labelX&&s.labelY?(q(),$e(Qp,{key:1,ref_key:"labelEl",ref:a,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Me("",!0)],64))}});function us({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,r=Math.abs(o-t)/2,s=o<t?o+r:o-r;return[a,s,i,r]}function cs({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:r,targetControlY:s}){const l=e*.125+i*.375+r*.375+n*.125,u=t*.125+a*.375+s*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function Sn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ea({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let r,s;switch(e){case se.Left:r=t-Sn(t-o,a),s=n;break;case se.Right:r=t+Sn(o-t,a),s=n;break;case se.Top:r=t,s=n-Sn(n-i,a);break;case se.Bottom:r=t,s=n+Sn(i-n,a);break}return[r,s]}function ds(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top,curvature:s=.25}=e,[l,u]=Ea({pos:o,x1:t,y1:n,x2:i,y2:a,c:s}),[c,d]=Ea({pos:r,x1:i,y1:a,x2:t,y2:n,c:s}),[f,h,m,v]=cs({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${i},${a}`,f,h,m,v]}function Aa({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,r;switch(e){case se.Left:case se.Right:a=.5*(t+o),r=n;break;case se.Top:case se.Bottom:a=t,r=.5*(n+i);break}return[a,r]}function fs(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top}=e,[s,l]=Aa({pos:o,x1:t,y1:n,x2:i,y2:a}),[u,c]=Aa({pos:r,x1:i,y1:a,x2:t,y2:n}),[d,f,h,m]=cs({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${s},${l} ${u},${c} ${i},${a}`,d,f,h,m]}const Na={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}};function tv({source:e,sourcePosition:t=se.Bottom,target:n}){return t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ma(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function nv({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:o=se.Top,center:i,offset:a}){const r=Na[t],s=Na[o],l={x:e.x+r.x*a,y:e.y+r.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},c=tv({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,m,v;const b={x:0,y:0},w={x:0,y:0},[g,C,y,M]=us({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*s[d]===-1){m=i.x??g,v=i.y??C;const D=[{x:m,y:l.y},{x:m,y:u.y}],O=[{x:l.x,y:v},{x:u.x,y:v}];r[d]===f?h=d==="x"?D:O:h=d==="x"?O:D}else{const D=[{x:l.x,y:u.y}],O=[{x:u.x,y:l.y}];if(d==="x"?h=r.x===f?O:D:h=r.y===f?D:O,t===o){const K=Math.abs(e[d]-n[d]);if(K<=a){const E=Math.min(a-1,a-K);r[d]===f?b[d]=(l[d]>e[d]?-1:1)*E:w[d]=(u[d]>n[d]?-1:1)*E}}if(t!==o){const K=d==="x"?"y":"x",E=r[d]===s[K],P=l[K]>u[K],k=l[K]<u[K];(r[d]===1&&(!E&&P||E&&k)||r[d]!==1&&(!E&&k||E&&P))&&(h=d==="x"?D:O)}const T={x:l.x+b.x,y:l.y+b.y},N={x:u.x+w.x,y:u.y+w.y},_=Math.max(Math.abs(T.x-h[0].x),Math.abs(N.x-h[0].x)),H=Math.max(Math.abs(T.y-h[0].y),Math.abs(N.y-h[0].y));_>=H?(m=(T.x+N.x)/2,v=h[0].y):(m=h[0].x,v=(T.y+N.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+w.x,y:u.y+w.y},n],m,v,y,M]}function ov(e,t,n,o){const i=Math.min(Ma(e,t)/2,Ma(t,n)/2,o),{x:a,y:r}=t;if(e.x===a&&a===n.x||e.y===r&&r===n.y)return`L${a} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*u},${r}Q ${a},${r} ${a},${r+i*c}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${r+i*l}Q ${a},${r} ${a+i*s},${r}`}function ti(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,m,v]=nv({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:a},targetPosition:r,center:{x:l,y:u},offset:c});return[d.reduce((w,g,C)=>{let y;return C>0&&C<d.length-1?y=ov(d[C-1],g,d[C+1],s):y=`${C===0?"M":"L"}${g.x} ${g.y}`,w+=y,w},""),f,h,m,v]}function iv(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[a,r,s,l]=us({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,a,r,s,l]}const av=ve({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=iv(e);return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),rv=av,sv=ve({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ti({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),hs=sv,lv=ve({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>xe(hs,{...e,...t,borderRadius:0})}}),uv=lv,cv=ve({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ds({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),dv=cv,fv=ve({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=fs({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),hv=fv,pv={input:Up,default:Yp,output:Xp},vv={default:dv,straight:rv,step:uv,smoothstep:hs,simplebezier:hv};function gv(e,t,n){const o=J(()=>v=>t.value.get(v)),i=J(()=>v=>n.value.get(v)),a=J(()=>{const v={...vv,...e.edgeTypes},b=Object.keys(v);for(const w of e.edges)w.type&&!b.includes(w.type)&&(v[w.type]=w.type);return v}),r=J(()=>{const v={...pv,...e.nodeTypes},b=Object.keys(v);for(const w of e.nodes)w.type&&!b.includes(w.type)&&(v[w.type]=w.type);return v}),s=J(()=>e.onlyRenderVisibleElements?Wr(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=J(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const b of e.edges){const w=t.value.get(b.source),g=t.value.get(b.target);yp({sourcePos:w.computedPosition||{x:0,y:0},targetPos:g.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:g.dimensions.width,targetHeight:g.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(b)}return v}return e.edges}),u=J(()=>[...s.value,...l.value]),c=J(()=>{const v=[];for(const b of e.nodes)b.selected&&v.push(b);return v}),d=J(()=>{const v=[];for(const b of e.edges)b.selected&&v.push(b);return v}),f=J(()=>[...c.value,...d.value]),h=J(()=>{const v=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&v.push(b);return v}),m=J(()=>s.value.length>0&&h.value.length===s.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:a,getNodeTypes:r,getEdges:l,getNodes:s,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:m}}class gt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=on())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??gt.instance;return gt.instance=o??new gt,n&&(n.config.globalProperties.$vueFlowStorage=gt.instance),gt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=ls(),i=mt(o),a={};for(const[f,h]of Object.entries(i.hooks)){const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;a[m]=h.on}const r={};for(const[f,h]of Object.entries(i.hooks))r[f]=h.trigger;const s=J(()=>{const f=new Map;for(const h of i.nodes)f.set(h.id,h);return f}),l=J(()=>{const f=new Map;for(const h of i.edges)f.set(h.id,h);return f}),u=gv(i,s,l),c=Hp(i,s,l);c.setState({...i,...n});const d={...a,...u,...c,..._c(i),nodeLookup:s,edgeLookup:l,emits:r,id:t,vueFlowVersion:"1.41.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ae(e){const t=gt.getInstance(),n=Ua(),o=typeof e=="object",i=o?e:{id:e},a=i.id,r=a??(n==null?void 0:n.vueFlowId);let s;if(n){const l=Bt(xa,null);typeof l<"u"&&l!==null&&(!r||l.id===r)&&(s=l)}if(s||r&&(s=t.get(r)),!s||r&&s.id!==r){const l=a??t.getId(),u=t.create(l,i);s=u,(n??Xa(!0)).run(()=>{ye(u.applyDefault,(d,f,h)=>{const m=b=>{u.applyNodeChanges(b)},v=b=>{u.applyEdgeChanges(b)};d?(u.onNodesChange(m),u.onEdgesChange(v)):(u.hooks.value.nodesChange.off(m),u.hooks.value.edgesChange.off(v)),h(()=>{u.hooks.value.nodesChange.off(m),u.hooks.value.edgesChange.off(v)})},{immediate:!0}),Wn(()=>{if(s){const d=t.get(s.id);d?d.$destroy():to(`No store instance found for id ${s.id} in storage.`)}})})}else o&&s.setState(i);if(n&&(Ot(xa,s),n.vueFlowId=s.id),o){const l=on();(l==null?void 0:l.type.name)!=="VueFlow"&&s.emits.error(new ke(Ie.USEVUEFLOW_OPTIONS))}return s}function mv(e){const{emits:t,dimensions:n}=Ae();let o;Le(()=>{const i=e.value,a=()=>{if(!i)return;const r=eo(i);(r.width===0||r.height===0)&&t.error(new ke(Ie.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};a(),window.addEventListener("resize",a),i&&(o=new ResizeObserver(()=>a()),o.observe(i)),Ka(()=>{window.removeEventListener("resize",a),o&&i&&o.unobserve(i)})})}const yv={name:"UserSelection",compatConfig:{MODE:3}},_v=ve({...yv,props:{userSelectionRect:{}},setup(e){return(t,n)=>(q(),le("div",{class:"vue-flow__selection vue-flow__container",style:qe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),bv=["tabIndex"],wv={name:"NodesSelection",compatConfig:{MODE:3}},Sv=ve({...wv,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:r}=Ae(),s=ss(),l=oe(null),u=is({el:l,onStart(m){t.selectionDragStart(m)},onDrag(m){t.selectionDrag(m)},onStop(m){t.selectionDragStop(m)}});Le(()=>{var m;a.value||(m=l.value)==null||m.focus({preventScroll:!0})});const c=J(()=>Kr(o.value)),d=J(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(m){t.selectionContextMenu({event:m,nodes:o.value})}function h(m){a||$t[m.key]&&s({x:$t[m.key].x,y:$t[m.key].y},m.shiftKey)}return(m,v)=>!S(r)&&c.value.width&&c.value.height?(q(),le("div",{key:0,class:Qe(["vue-flow__nodesselection vue-flow__container",S(i)]),style:qe({transform:`translate(${S(n).x}px,${S(n).y}px) scale(${S(n).zoom})`})},[I("div",{ref_key:"el",ref:l,class:Qe([{dragging:S(u)},"vue-flow__nodesselection-rect"]),style:qe(d.value),tabIndex:S(a)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,bv)],6)):Me("",!0)}});function xv(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Ev={name:"Pane",compatConfig:{MODE:3}},Av=ve({...Ev,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:a,removeSelectedElements:r,panOnDrag:s,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:m,selectionMode:v,deleteKeyCode:b,multiSelectionKeyCode:w,multiSelectionActive:g,edgeLookup:C,nodeLookup:y}=Ae(),M=oe(null),R=oe(0),D=oe(0),O=oe(),T=oe(new Map),N=Ne(()=>u.value&&(e.isSelecting||a.value));let _=!1,H=!1;const K=Kt(b,{actInsideInputWithModifier:!1}),E=Kt(w);ye(K,ne=>{ne&&(h(f.value),m(d.value),c.value=!1)}),ye(E,ne=>{g.value=ne});function P(ne,W){return ae=>{ae.target===W&&(ne==null||ne(ae))}}function k(){a.value=!1,l.value=null,R.value=0,D.value=0}function z(ne){if(_){_=!1;return}i.paneClick(ne),r(),c.value=!1}function L(ne){var W;if(Array.isArray(s.value)&&((W=s.value)!=null&&W.includes(2))){ne.preventDefault();return}i.paneContextMenu(ne)}function V(ne){i.paneScroll(ne)}function F(ne){var W,ae,Y,U,pe;if(O.value=(W=t.value)==null?void 0:W.getBoundingClientRect(),!u.value||!e.isSelecting||ne.button!==0||ne.target!==M.value||!O.value)return;(Y=(ae=ne.target)==null?void 0:ae.setPointerCapture)==null||Y.call(ae,ne.pointerId);const{x:ue,y:he}=xv(ne,O.value);H=!0,_=!1,T.value=new Map;for(const[ee,ie]of C.value)T.value.set(ie.source,((U=T.value.get(ie.source))==null?void 0:U.add(ee))||new Set([ee])),T.value.set(ie.target,((pe=T.value.get(ie.target))==null?void 0:pe.add(ee))||new Set([ee]));r(),l.value={width:0,height:0,startX:ue,startY:he,x:ue,y:he},i.selectionStart(ne)}function X(ne){if(!O.value||!l.value)return;_=!0;const{x:W,y:ae}=dt(ne,O.value),{startX:Y=0,startY:U=0}=l.value,pe={startX:Y,startY:U,x:W<Y?W:Y,y:ae<U?ae:U,width:Math.abs(W-Y),height:Math.abs(ae-U)},ue=Wr(n.value,pe,o.value,v.value===pi.Partial,!0),he=new Set,ee=new Set;for(const ie of ue){ee.add(ie.id);const Z=T.value.get(ie.id);if(Z)for(const p of Z)he.add(p)}if(R.value!==ee.size){R.value=ee.size;const ie=ut(y.value,ee,!0);i.nodesChange(ie)}if(D.value!==he.size){D.value=he.size;const ie=ut(C.value,he);i.edgesChange(ie)}l.value=pe,a.value=!0,c.value=!1}function ce(ne){var W;ne.button!==0||!H||((W=ne.target)==null||W.releasePointerCapture(ne.pointerId),!a.value&&l.value&&ne.target===M.value&&z(ne),R.value>0&&(c.value=!0),k(),i.selectionEnd(ne),e.selectionKeyPressed&&(_=!1),H=!1)}return(ne,W)=>(q(),le("div",{ref_key:"container",ref:M,class:Qe(["vue-flow__pane vue-flow__container",{selection:ne.isSelecting}]),onClick:W[0]||(W[0]=ae=>N.value?void 0:P(z,M.value)(ae)),onContextmenu:W[1]||(W[1]=ae=>P(L,M.value)(ae)),onWheelPassive:W[2]||(W[2]=ae=>P(V,M.value)(ae)),onPointerenter:W[3]||(W[3]=ae=>N.value?void 0:S(i).paneMouseEnter(ae)),onPointerdown:W[4]||(W[4]=ae=>N.value?F(ae):S(i).paneMouseMove(ae)),onPointermove:W[5]||(W[5]=ae=>N.value?X(ae):S(i).paneMouseMove(ae)),onPointerup:W[6]||(W[6]=ae=>N.value?ce(ae):void 0),onPointerleave:W[7]||(W[7]=ae=>S(i).paneMouseLeave(ae))},[St(ne.$slots,"default"),S(a)&&S(l)?(q(),$e(_v,{key:0,"user-selection-rect":S(l)},null,8,["user-selection-rect"])):Me("",!0),S(c)&&S(f).length?(q(),$e(Sv,{key:1})):Me("",!0)],34))}}),Nv={name:"Transform",compatConfig:{MODE:3}},Mv=ve({...Nv,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Ae(),i=J(()=>n.value?!o.value:!1),a=J(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(r,s)=>(q(),le("div",{class:"vue-flow__transformationpane vue-flow__container",style:qe({transform:a.value,opacity:i.value?0:void 0})},[St(r.$slots,"default")],4))}}),Dv={name:"Viewport",compatConfig:{MODE:3}},Cv=ve({...Dv,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:r,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:m,preventScrolling:v,noWheelClassName:b,noPanClassName:w,emits:g,connectionStartHandle:C,userSelectionActive:y,paneDragging:M,d3Zoom:R,d3Selection:D,d3ZoomHandler:O,viewport:T,viewportRef:N,paneClickDistance:_}=Ae();mv(N);const H=oe(!1),K=oe(!1);let E=null,P=!1,k=0,z={x:0,y:0,zoom:0};const L=Kt(s),V=Kt(r),F=Kt(a),X=Ne(()=>!V.value&&(L.value||d.value)),ce=Ne(()=>L.value||l.value),ne=Ne(()=>V.value||r.value===!0&&X.value!==!0);Le(()=>{if(!N.value){to("Viewport element is missing");return}const ue=N.value,he=ue.getBoundingClientRect(),ee=tp().clickDistance(_.value).scaleExtent([t.value,n.value]).translateExtent(i.value),ie=He(ue).call(ee),Z=ie.on("wheel.zoom"),p=Lt.translate(o.value.x??0,o.value.y??0).scale(Nt(o.value.zoom??1,t.value,n.value)),x=[[0,0],[he.width,he.height]],$=ee.constrain()(p,x,i.value);ee.transform(ie,$),ee.wheelDelta(ae),R.value=ee,D.value=ie,O.value=Z,T.value={x:$.x,y:$.y,zoom:$.k},ee.on("start",A=>{var G;if(!A.sourceEvent)return null;k=A.sourceEvent.button,H.value=!0;const re=U(A.transform);((G=A.sourceEvent)==null?void 0:G.type)==="mousedown"&&(M.value=!0),z=re,g.viewportChangeStart(re),g.moveStart({event:A,flowTransform:re})}),ee.on("end",A=>{if(!A.sourceEvent)return null;if(H.value=!1,M.value=!1,W(X.value,k??0)&&!P&&g.paneContextMenu(A.sourceEvent),P=!1,Y(z,A.transform)){const G=U(A.transform);z=G,g.viewportChangeEnd(G),g.moveEnd({event:A,flowTransform:G})}}),ee.filter(A=>{var G,re,B;const de=F.value||m.value,ge=h.value&&A.ctrlKey,be=A.button;if((X.value===!0||Array.isArray(X.value)&&X.value.includes(1))&&be===1&&A.type==="mousedown"&&((G=A.target)!=null&&G.closest(".vue-flow__node")||(re=A.target)!=null&&re.closest(".vue-flow__edge")))return!0;if(!X.value&&!de&&!ce.value&&!f.value&&!h.value||y.value||!f.value&&A.type==="dblclick"||pe(A,b.value)&&A.type==="wheel"||pe(A,w.value)&&(A.type!=="wheel"||ce.value&&A.type==="wheel"&&!F.value)||!h.value&&A.ctrlKey&&A.type==="wheel"||!de&&!ce.value&&!ge&&A.type==="wheel")return!1;if(!h&&A.type==="touchstart"&&((B=A.touches)==null?void 0:B.length)>1)return A.preventDefault(),!1;if(!X.value&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(X.value)&&!X.value.includes(be)&&(A.type==="mousedown"||A.type==="touchstart"))return!1;const we=Array.isArray(X.value)&&X.value.includes(be)||!be||be<=1;return(!A.ctrlKey||A.type==="wheel")&&we}),ye([y,X],()=>{y.value&&!H.value?ee.on("zoom",null):y.value||ee.on("zoom",A=>{T.value={x:A.transform.x,y:A.transform.y,zoom:A.transform.k};const G=U(A.transform);P=W(X.value,k??0),g.viewportChange(G),g.move({event:A,flowTransform:G})})},{immediate:!0}),ye([y,ce,u,F,h,v,b],()=>{ce.value&&!F.value&&!y.value?ie.on("wheel.zoom",A=>{if(pe(A,b.value))return!1;const G=F.value||m.value,re=h.value&&A.ctrlKey;if(!(!v.value||ce.value||G||re))return!1;A.preventDefault(),A.stopImmediatePropagation();const de=ie.property("__zoom").k||1,ge=Xn();if(A.ctrlKey&&h.value&&ge){const ps=Xe(A),vs=ae(A),gs=de*2**vs;ee.scaleTo(ie,gs,ps,A);return}const be=A.deltaMode===1?20:1;let we=u.value===Zt.Vertical?0:A.deltaX*be,Ee=u.value===Zt.Horizontal?0:A.deltaY*be;!ge&&A.shiftKey&&u.value!==Zt.Vertical&&!we&&Ee&&(we=Ee,Ee=0),ee.translateBy(ie,-(we/de)*c.value,-(Ee/de)*c.value);const Mt=U(ie.property("__zoom"));E&&clearTimeout(E),K.value?(g.move({event:A,flowTransform:Mt}),g.viewportChange(Mt),E=setTimeout(()=>{g.moveEnd({event:A,flowTransform:Mt}),g.viewportChangeEnd(Mt),K.value=!1},150)):(K.value=!0,g.moveStart({event:A,flowTransform:Mt}),g.viewportChangeStart(Mt))},{passive:!1}):typeof Z<"u"&&ie.on("wheel.zoom",function(A,G){const re=!v.value&&A.type==="wheel"&&!A.ctrlKey,B=F.value||m.value,de=h.value&&A.ctrlKey;if(!B&&!l.value&&!de&&A.type==="wheel"||re||pe(A,b.value))return null;A.preventDefault(),Z.call(this,A,G)},{passive:!1})},{immediate:!0})});function W(ue,he){return he===2&&Array.isArray(ue)&&ue.includes(2)}function ae(ue){const he=ue.ctrlKey&&Xn()?10:1;return-ue.deltaY*(ue.deltaMode===1?.05:ue.deltaMode?1:.002)*he}function Y(ue,he){return ue.x!==he.x&&!Number.isNaN(he.x)||ue.y!==he.y&&!Number.isNaN(he.y)||ue.zoom!==he.k&&!Number.isNaN(he.k)}function U(ue){return{x:ue.x,y:ue.y,zoom:ue.k}}function pe(ue,he){return ue.target.closest(`.${he}`)}return(ue,he)=>(q(),le("div",{ref_key:"viewportRef",ref:N,class:"vue-flow__viewport vue-flow__container"},[Q(Av,{"is-selecting":ne.value,"selection-key-pressed":S(V),class:Qe({connecting:!!S(C),dragging:S(M),draggable:S(d)===!0||Array.isArray(S(d))&&S(d).includes(0)})},{default:fe(()=>[Q(Mv,null,{default:fe(()=>[St(ue.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Iv=["id"],kv=["id"],$v=["id"],Pv={name:"A11yDescriptions",compatConfig:{MODE:3}},Tv=ve({...Pv,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ae();return(i,a)=>(q(),le(Pe,null,[I("div",{id:`${S(Br)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+te(S(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Iv),I("div",{id:`${S(Vr)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,kv),S(n)?Me("",!0):(q(),le("div",{key:0,id:`${S(ap)}-${S(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},te(S(o)),9,$v))],64))}});function Ov(){const e=Ae();ye(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Rv(e,t,n){return n===se.Left?e-t:n===se.Right?e+t:e}function zv(e,t,n){return n===se.Top?e-t:n===se.Bottom?e+t:e}const yi=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=se.Top,type:i}){return xe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Rv(t,e,o),cy:zv(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};yi.props=["radius","centerX","centerY","position","type"];yi.compatConfig={MODE:3};const Da=yi,Lv=ve({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:r,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:m,elementsSelectable:v,edgesUpdatable:b,edgesFocusable:w}=Ae(),g=J(()=>c(e.id)),C=Ip(g.value,a),y=Bt(no),M=on(),R=oe(!1),D=oe(!1),O=oe(""),T=oe(null),N=oe("source"),_=oe(null),H=Ne(()=>typeof g.value.selectable>"u"?v.value:g.value.selectable),K=Ne(()=>typeof g.value.updatable>"u"?b.value:g.value.updatable),E=Ne(()=>typeof g.value.focusable>"u"?w.value:g.value.focusable);Ot(Mp,e.id),Ot(Dp,_);const P=J(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),k=J(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),z=J(()=>{const Z=g.value.type||"default",p=y==null?void 0:y[`edge-${Z}`];if(p)return p;let x=g.value.template??l.value[Z];if(typeof x=="string"&&M){const $=Object.keys(M.appContext.components);$&&$.includes(Z)&&(x=Se(Z,!1))}return x&&typeof x!="string"?x:(a.error(new ke(Ie.EDGE_TYPE_MISSING,x)),!1)}),{handlePointerDown:L}=as({nodeId:O,handleId:T,type:N,isValidConnection:f,edgeUpdaterType:N,onEdgeUpdate:X,onEdgeUpdateEnd:ce});return()=>{const Z=d(g.value.source),p=d(g.value.target),x="pathOptions"in g.value?g.value.pathOptions:{};if(!Z&&!p)return a.error(new ke(Ie.EDGE_SOURCE_TARGET_MISSING,g.value.id,g.value.source,g.value.target)),null;if(!Z)return a.error(new ke(Ie.EDGE_SOURCE_MISSING,g.value.id,g.value.source)),null;if(!p)return a.error(new ke(Ie.EDGE_TARGET_MISSING,g.value.id,g.value.target)),null;if(!g.value||g.value.hidden||Z.hidden||p.hidden)return null;let $;o.value===At.Strict?$=Z.handleBounds.source:$=[...Z.handleBounds.source||[],...Z.handleBounds.target||[]];const A=va($,g.value.sourceHandle);let G;o.value===At.Strict?G=p.handleBounds.target:G=[...p.handleBounds.target||[],...p.handleBounds.source||[]];const re=va(G,g.value.targetHandle),B=(A==null?void 0:A.position)||se.Bottom,de=(re==null?void 0:re.position)||se.Top,{x:ge,y:be}=Yn(Z,A,B),{x:we,y:Ee}=Yn(p,re,de);return g.value.sourceX=ge,g.value.sourceY=be,g.value.targetX=we,g.value.targetY=Ee,xe("g",{ref:_,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${z.value===!1?"default":g.value.type||"default"}`,s.value,P.value,{updating:R.value,selected:g.value.selected,animated:g.value.animated,inactive:!H.value}],onClick:W,onContextmenu:ae,onDblclick:Y,onMouseenter:U,onMousemove:pe,onMouseleave:ue,onKeyDown:E.value?ie:void 0,tabIndex:E.value?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel||`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":E.value?`${Vr}-${t}`:void 0,role:E.value?"button":"img"},[D.value?null:xe(z.value===!1?l.value.default:z.value,{id:e.id,sourceNode:Z,targetNode:p,source:g.value.source,target:g.value.target,type:g.value.type,updatable:K.value,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...C.on},style:k.value,markerStart:`url('#${tn(g.value.markerStart,t)}')`,markerEnd:`url('#${tn(g.value.markerEnd,t)}')`,sourcePosition:B,targetPosition:de,sourceX:ge,sourceY:be,targetX:we,targetY:Ee,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth,...x}),[K.value==="source"||K.value===!0?[xe("g",{onMousedown:he,onMouseenter:V,onMouseout:F},xe(Da,{position:B,centerX:ge,centerY:be,radius:i.value,type:"source","data-type":"source"}))]:null,K.value==="target"||K.value===!0?[xe("g",{onMousedown:ee,onMouseenter:V,onMouseout:F},xe(Da,{position:de,centerX:we,centerY:Ee,radius:i.value,type:"target","data-type":"target"}))]:null]])};function V(){R.value=!0}function F(){R.value=!1}function X(Z,p){C.emit.update({event:Z,edge:g.value,connection:p})}function ce(Z){C.emit.updateEnd({event:Z,edge:g.value}),D.value=!1}function ne(Z,p){Z.button===0&&(D.value=!0,O.value=p?g.value.target:g.value.source,T.value=(p?g.value.targetHandle:g.value.sourceHandle)??"",N.value=p?"target":"source",C.emit.updateStart({event:Z,edge:g.value}),L(Z))}function W(Z){var p;const x={event:Z,edge:g.value};H.value&&(r.value=!1,g.value.selected&&h.value?(u([g.value]),(p=_.value)==null||p.blur()):n([g.value])),C.emit.click(x)}function ae(Z){C.emit.contextMenu({event:Z,edge:g.value})}function Y(Z){C.emit.doubleClick({event:Z,edge:g.value})}function U(Z){C.emit.mouseEnter({event:Z,edge:g.value})}function pe(Z){C.emit.mouseMove({event:Z,edge:g.value})}function ue(Z){C.emit.mouseLeave({event:Z,edge:g.value})}function he(Z){ne(Z,!0)}function ee(Z){ne(Z,!1)}function ie(Z){var p;!m.value&&Hr.includes(Z.key)&&H.value&&(Z.key==="Escape"?((p=_.value)==null||p.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Bv=Lv,Vv={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top},Hv=ve({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:a,connectionLineType:r,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=Ae(),f=(e=Bt(no))==null?void 0:e["connection-line"],h=J(()=>{var g;return d((g=o.value)==null?void 0:g.nodeId)}),m=J(()=>{var g;return d((g=i.value)==null?void 0:g.nodeId)??null}),v=J(()=>({x:(a.value.x-c.value.x)/c.value.zoom,y:(a.value.y-c.value.y)/c.value.zoom})),b=J(()=>l.value.markerStart?`url(#${tn(l.value.markerStart,t)})`:""),w=J(()=>l.value.markerEnd?`url(#${tn(l.value.markerEnd,t)})`:"");return()=>{var g,C,y,M;if(!h.value||!o.value)return null;const R=o.value.handleId,D=o.value.type,O=h.value.handleBounds;let T=O==null?void 0:O[D];if(n.value===At.Loose&&(T=T||(O==null?void 0:O[D==="source"?"target":"source"])),!T)return null;const N=(R?T.find(V=>V.id===R):T[0])??null,_=(N==null?void 0:N.position)||se.Top,{x:H,y:K}=Yn(h.value,N,_);let E=null;m.value&&((g=i.value)!=null&&g.handleId)&&(n.value===At.Strict?E=((C=m.value.handleBounds[D==="source"?"target":"source"])==null?void 0:C.find(V=>{var F;return V.id===((F=i.value)==null?void 0:F.handleId)}))||null:E=((y=[...m.value.handleBounds.source||[],...m.value.handleBounds.target||[]])==null?void 0:y.find(V=>{var F;return V.id===((F=i.value)==null?void 0:F.handleId)}))||null);const P=((M=i.value)==null?void 0:M.position)??(_?Vv[_]:null);if(!_||!P)return null;const k=r.value??l.value.type??vt.Bezier;let z="";const L={sourceX:H,sourceY:K,sourcePosition:_,targetX:v.value.x,targetY:v.value.y,targetPosition:P};return k===vt.Bezier?[z]=ds(L):k===vt.Step?[z]=ti({...L,borderRadius:0}):k===vt.SmoothStep?[z]=ti(L):k===vt.SimpleBezier?[z]=fs(L):z=`M${H},${K} ${v.value.x},${v.value.y}`,xe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},xe("g",{class:"vue-flow__connection"},f?xe(f,{sourceX:H,sourceY:K,sourcePosition:_,targetX:v.value.x,targetY:v.value.y,targetPosition:P,sourceNode:h.value,sourceHandle:N,targetNode:m.value,targetHandle:E,markerEnd:w.value,markerStart:b.value,connectionStatus:u.value}):xe("path",{d:z,class:[l.value.class,u,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":w.value,"marker-start":b.value})))}}}),Gv=Hv,Fv=["id","markerWidth","markerHeight","markerUnits","orient"],Yv={name:"MarkerType",compatConfig:{MODE:3}},Xv=ve({...Yv,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(q(),le("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===S(qo).ArrowClosed?(q(),le("polyline",{key:0,style:qe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Me("",!0),t.type===S(qo).Arrow?(q(),le("polyline",{key:1,style:qe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Me("",!0)],8,Fv))}}),Uv={class:"vue-flow__marker vue-flow__container"},Zv={name:"MarkerDefinitions",compatConfig:{MODE:3}},Kv=ve({...Zv,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Ae(),a=J(()=>{const r=new Set,s=[],l=u=>{if(u){const c=tn(u,t);r.has(c)||(typeof u=="object"?s.push({...u,id:c,color:u.color||i.value}):s.push({id:c,color:i.value,type:u}),r.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return s.sort((u,c)=>u.id.localeCompare(c.id))});return(r,s)=>(q(),le("svg",Uv,[I("defs",null,[(q(!0),le(Pe,null,ot(a.value,l=>(q(),$e(Xv,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Wv={name:"Edges",compatConfig:{MODE:3}},qv=ve({...Wv,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Ae();return(i,a)=>(q(),le(Pe,null,[Q(Kv),(q(!0),le(Pe,null,ot(S(n),r=>(q(),le("svg",{key:r.id,class:"vue-flow__edges vue-flow__container",style:qe({zIndex:S(_p)(r,S(t),S(o))})},[Q(S(Bv),{id:r.id},null,8,["id"])],4))),128)),Q(S(Gv))],64))}}),Qv=ve({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:r,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:m,ariaLiveMessage:v,snapToGrid:b,snapGrid:w,nodeDragThreshold:g,nodesDraggable:C,elementsSelectable:y,nodesConnectable:M,nodesFocusable:R}=Ae(),D=oe(null);Ot(os,D),Ot(ns,e.id);const O=Bt(no),T=on(),N=ss(),{node:_,parentNode:H}=rs(e.id),K=Ne(()=>typeof _.draggable>"u"?C.value:_.draggable),E=Ne(()=>typeof _.selectable>"u"?y.value:_.selectable),P=Ne(()=>typeof _.connectable>"u"?M.value:_.connectable),k=Ne(()=>typeof _.focusable>"u"?R.value:_.focusable),z=Ne(()=>!!_.dimensions.width&&!!_.dimensions.height),L=J(()=>{const p=_.type||"default",x=O==null?void 0:O[`node-${p}`];if(x)return x;let $=_.template||d.value[p];if(typeof $=="string"&&T){const A=Object.keys(T.appContext.components);A&&A.includes(p)&&($=Se(p,!1))}return $&&typeof $!="string"?$:(r.error(new ke(Ie.NODE_TYPE_MISSING,$)),!1)}),{emit:V,on:F}=Tp(_,r),X=is({id:e.id,el:D,disabled:()=>!K.value,selectable:E,dragHandle:()=>_.dragHandle,onStart(p){V.dragStart(p)},onDrag(p){V.drag(p)},onStop(p){V.dragStop(p)},onClick(p){ie(p)}}),ce=J(()=>_.class instanceof Function?_.class(_):_.class),ne=J(()=>{const p=(_.style instanceof Function?_.style(_):_.style)||{},x=_.width instanceof Function?_.width(_):_.width,$=_.height instanceof Function?_.height(_):_.height;return!p.width&&x&&(p.width=typeof x=="string"?x:`${x}px`),!p.height&&$&&(p.height=typeof $=="string"?$:`${$}px`),p}),W=Ne(()=>Number(_.zIndex??ne.value.zIndex??0));return c(p=>{(p.includes(e.id)||!p.length)&&Y()}),Le(()=>{ye(()=>_.hidden,(p=!1,x,$)=>{!p&&D.value&&(e.resizeObserver.observe(D.value),$(()=>{D.value&&e.resizeObserver.unobserve(D.value)}))},{immediate:!0,flush:"post"})}),ye([()=>_.type,()=>_.sourcePosition,()=>_.targetPosition],()=>{Ve(()=>{u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])})}),ye([()=>_.position.x,()=>_.position.y,()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.x},()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.y},()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.z},W,()=>_.selected,()=>_.dimensions.height,()=>_.dimensions.width,()=>{var p;return(p=H.value)==null?void 0:p.dimensions.height},()=>{var p;return(p=H.value)==null?void 0:p.dimensions.width}],([p,x,$,A,G,re])=>{const B={x:p,y:x,z:re+(h.value&&_.selected?1e3:0)};typeof $<"u"&&typeof A<"u"?_.computedPosition=hp({x:$,y:A,z:G},B):_.computedPosition=B},{flush:"post",immediate:!0}),ye([()=>_.extent,f],([p,x],[$,A])=>{(p!==$||x!==A)&&ae()}),_.extent==="parent"||typeof _.extent=="object"&&"range"in _.extent&&_.extent.range==="parent"?Ho(()=>z).toBe(!0).then(ae):ae(),()=>_.hidden?null:xe("div",{ref:D,"data-id":_.id,class:["vue-flow__node",`vue-flow__node-${L.value===!1?"default":_.type||"default"}`,{[n.value]:K.value,dragging:X==null?void 0:X.value,draggable:K.value,selected:_.selected,selectable:E.value,parent:_.isParent},ce.value],style:{visibility:z.value?"visible":"hidden",zIndex:_.computedPosition.z??W.value,transform:`translate(${_.computedPosition.x}px,${_.computedPosition.y}px)`,pointerEvents:E.value||K.value?"all":"none",...ne.value},tabIndex:k.value?0:void 0,role:k.value?"button":void 0,"aria-describedby":m.value?void 0:`${Br}-${t}`,"aria-label":_.ariaLabel,onMouseenter:U,onMousemove:pe,onMouseleave:ue,onContextmenu:he,onClick:ie,onDblclick:ee,onKeydown:Z},[xe(L.value===!1?d.value.default:L.value,{id:_.id,type:_.type,data:_.data,events:{..._.events,...F},selected:_.selected,resizing:_.resizing,dragging:X.value,connectable:P.value,position:_.computedPosition,dimensions:_.dimensions,isValidTargetPos:_.isValidTargetPos,isValidSourcePos:_.isValidSourcePos,parent:_.parentNode,parentNodeId:_.parentNode,zIndex:_.computedPosition.z??W.value,targetPosition:_.targetPosition,sourcePosition:_.sourcePosition,label:_.label,dragHandle:_.dragHandle,onUpdateNodeInternals:Y})]);function ae(){const p=_.computedPosition;b.value&&(p.x=w.value[0]*Math.round(p.x/w.value[0]),p.y=w.value[1]*Math.round(p.y/w.value[1]));const{computedPosition:x,position:$}=vi(_,p,r.error,f.value,H.value);(_.computedPosition.x!==x.x||_.computedPosition.y!==x.y)&&(_.computedPosition={..._.computedPosition,...x}),(_.position.x!==$.x||_.position.y!==$.y)&&(_.position=$)}function Y(){D.value&&u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])}function U(p){X!=null&&X.value||V.mouseEnter({event:p,node:_})}function pe(p){X!=null&&X.value||V.mouseMove({event:p,node:_})}function ue(p){X!=null&&X.value||V.mouseLeave({event:p,node:_})}function he(p){return V.contextMenu({event:p,node:_})}function ee(p){return V.doubleClick({event:p,node:_})}function ie(p){E.value&&(!o.value||!K.value||g.value>0)&&ei(_,a.value,l,s,i,!1,D.value),V.click({event:p,node:_})}function Z(p){if(!(Qo(p)||m.value))if(Hr.includes(p.key)&&E.value){const x=p.key==="Escape";ei(_,a.value,l,s,i,x,D.value)}else K.value&&_.selected&&$t[p.key]&&(v.value=`Moved selected node ${p.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.position.x}, y: ${~~_.position.y}`,N({x:$t[p.key].x,y:$t[p.key].y},p.shiftKey))}}}),jv=Qv;function Jv(e={includeHiddenNodes:!1}){const{nodes:t}=Ae();return J(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const eg={class:"vue-flow__nodes vue-flow__container"},tg={name:"Nodes",compatConfig:{MODE:3}},ng=ve({...tg,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Ae(),i=Jv(),a=oe();return ye(i,r=>{r&&Ve(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),Le(()=>{a.value=new ResizeObserver(r=>{const s=r.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));Ve(()=>n(s))})}),Ka(()=>{var r;return(r=a.value)==null?void 0:r.disconnect()}),(r,s)=>(q(),le("div",eg,[a.value?(q(!0),le(Pe,{key:0},ot(S(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&dl(d,f))return d;const h=(q(),$e(S(jv),{id:l.id,key:l.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return h.memo=f,h},s,0),128)):Me("",!0)]))}});function og(){const{emits:e}=Ae();Le(()=>{if(ts()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new ke(Ie.MISSING_STYLES))}})}const ig=I("div",{class:"vue-flow__edge-labels"},null,-1),ag={name:"VueFlow",compatConfig:{MODE:3}},rg=ve({...ag,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=sl(),a=wo(o,"modelValue",n),r=wo(o,"nodes",n),s=wo(o,"edges",n),l=Ae(o),u=zp({modelValue:a,nodes:r,edges:s},o,l);return Bp(n,l.hooks),Ov(),og(),Ot(no,i),ii(()=>{u()}),t(l),(c,d)=>(q(),le("div",{ref:S(l).vueFlowRef,class:"vue-flow"},[Q(Cv,null,{default:fe(()=>[Q(qv),ig,Q(ng),St(c.$slots,"zoom-pane")]),_:3}),St(c.$slots,"default"),Q(Tv)],512))}}),sg={class:"background-circle"},lg=["width","height"],ug=["fill","d","stroke-width","stroke"],cg=["r"],dg=ve({__name:"BackgroundCircle",emits:["showPopover"],setup(e,{emit:t}){const n=t,o=Zn(),{SVGSideLength:i}=lr(),a=i/2,r=J(()=>{const{theme:d}=o.state;return d==="dark"?"#469cf71a":"#E7F7FF"}),s=J(()=>{const d=Kn,f=an,h=a;return`M ${h} ${h-f}
A ${f} ${f} 0 0 1 ${h+f} ${h}
A ${f} ${f} 0 0 1 ${h} ${h+f}
A ${f} ${f} 0 0 1 ${h-f} ${h}
A ${f} ${f} 0 0 1 ${h} ${h-f}
M ${h} ${h-d}
A ${d} ${d} 0 0 0 ${h-d} ${h}
A ${d} ${d} 0 0 0 ${h} ${h+d}
A ${d} ${d} 0 0 0 ${h+d} ${h}
A ${d} ${d} 0 0 0 ${h} ${h-d}`}),l=oe(!1),u=()=>{l.value=!0,n("showPopover")},c=()=>{l.value=!1};return(d,f)=>(q(),le("div",sg,[(q(),le("svg",{width:S(i),height:S(i)},[Tn(I("path",{class:"background-ring",onClick:u,fill:S(r),d:S(s),"stroke-width":S(rr),stroke:S(l)?"rgba(0, 177, 115, 0.35)":void 0},null,8,ug),[[S(Ro),c]]),I("circle",{r:S(Mn),fill:"#f0eeff",cx:a,cy:a},null,8,cg)],8,lg))]))}}),fg={class:"core-node"},hg=["width","height"],pg=["id"],vg=["stop-color"],gg=["stop-color"],mg={key:0},yg=["points","fill"],_g=["points","fill"],bg=ve({__name:"CoreNode",props:{height:{type:Number,default:20},isSelected:{type:Boolean,required:!0},status:{type:String,default:Ke.Running},nodesNum:{type:Number,default:1}},emits:["select"],setup(e,{emit:t}){const{INNER_SIDE_MULTIPLES:n,coreNodeHeight:o,coreNodeWidth:i,setCoreNodeHeight:a}=ar(),r=e,s=t,l=Oo(),u=J(()=>r.status===Ke.Running?["#055fe7","#2c83f5"]:["#dcdcdc","#cdcdcd"]),c=(f=1)=>{const h=o.value/2*f,m=i.value/2,v=o.value/2,b=2*Math.PI/6,w=[];for(let g=0;g<6;g++){const C=Te(h*Math.sin(g*b)+m,3),y=Te(h*Math.cos(g*b)+v,3);w.push(`${C},${y}`)}return w.join(" ")},d=()=>{s("select")};return ye(()=>r.height,f=>a(f)),a(r.height),(f,h)=>(q(),le("div",fg,[Q(S(nn)),(q(),le("svg",{width:S(i),height:S(o),overflow:"visible"},[I("defs",null,[I("linearGradient",{id:S(l),x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[I("stop",{offset:"0%","stop-color":S(u)[0]},null,8,vg),I("stop",{offset:"100%","stop-color":S(u)[1]},null,8,gg)],8,pg)]),I("g",null,[e.isSelected?(q(),le("g",mg,[I("polygon",{points:c(S(n)),fill:`url(#${S(l)})`,opacity:"0.6"},null,8,yg)])):Me("",!0),I("polygon",{points:c(),fill:`url(#${S(l)})`,onMouseenter:d},null,40,_g)])],8,hg))]))}}),wg={class:"popover-hd"},Sg={class:"popover-bd"},xg={class:"list-hd"},Eg={class:"list-bd"},Ag={class:"node-name"},Ng={key:0,class:"tip placeholder"},Mg=ve({__name:"NodeListPopover",props:{nodes:{type:Array,default:()=>[]}},setup(e){const t=e,{tl:n}=ht("Base"),o=oe(""),i=J(()=>t.nodes.reduce((a,r)=>(r.node.indexOf(o.value)>-1&&a[r.role].push(r),a),{core:[],replicant:[]}));return(a,r)=>{const s=Se("el-input"),l=Se("el-card");return q(),$e(l,{class:"node-list-popover with-border"},{default:fe(()=>[I("div",wg,[Q(s,{modelValue:S(o),"onUpdate:modelValue":r[0]||(r[0]=u=>Be(o)?o.value=u:null),"prefix-icon":S(gl)},null,8,["modelValue","prefix-icon"])]),I("div",Sg,[(q(!0),le(Pe,null,ot(S(i),(u,c)=>(q(),le("div",{class:"list-block",key:c},[I("div",xg,te(("startCase"in a?a.startCase:S(ct.startCase))(c)),1),I("div",Eg,[I("ul",null,[(q(!0),le(Pe,null,ot(u,d=>(q(),le("li",{class:"node-item",key:d.node},[I("i",{class:Qe(["node-status-dot",`is-${d.node_status}`])},null,2),I("p",Ag,te(d.node),1)]))),128))]),u.length===0?(q(),le("p",Ng,te(S(n)("noData")),1)):Me("",!0)])]))),128))])]),_:1})}}}),Dg={class:"content"},Cg={class:"count-item"},Ig={class:"count-item"},kg=ve({__name:"NodesCountCard",props:{nodesCountData:{type:Object,required:!0}},setup(e){const{t}=ht("Dashboard");return(n,o)=>{const i=Se("el-card");return q(),$e(i,{class:"nodes-count-card"},{default:fe(()=>[I("div",Dg,[I("div",Cg,[o[0]||(o[0]=I("i",{class:"node-status-dot is-running"},null,-1)),I("span",null,te(S(t)("Dashboard.node",{n:e.nodesCountData[S(Ke).Running]})),1)]),I("div",Ig,[o[1]||(o[1]=I("i",{class:"node-status-dot is-stopped"},null,-1)),I("span",null,te(S(t)("Dashboard.node",{n:e.nodesCountData[S(Ke).Stopped]})),1)])])]),_:1})}}}),$g=["width","height"],Pg=["cx","cy","r","fill"],Tg={key:0},Og=["cx","cy","r","fill"],Rg=["cx","cy","r","fill"],zg=ve({__name:"RepNode",props:{isSelected:{type:Boolean,required:!0},status:{type:String,default:Ke.Running}},emits:["select"],setup(e,{emit:t}){const{nonactivatedRadius:n,activatedInnerRadius:o,activatedOuterRadius:i}=sr(),a=e,r=t,s=J(()=>a.status===Ke.Running),l=J(()=>s.value?"#1890ff":"#bac1cd"),u=J(()=>s.value?"#469cf7":"#bac1cd"),c=()=>{r("select")};return(d,f)=>(q(),le("svg",{width:S(n)*2,height:S(n)*2,overflow:"visible"},[I("circle",{cx:S(n),cy:S(n),r:S(n),fill:S(l),onMouseenter:c},null,40,Pg),e.isSelected?(q(),le("g",Tg,[I("circle",{cx:S(n),cy:S(n),r:S(i),fill:S(u),opacity:"0.35"},null,8,Og),I("circle",{cx:S(n),cy:S(n),r:S(o),fill:S(u)},null,8,Rg)])):Me("",!0)],8,$g))}}),Lg={class:"nodes-graph"},Bg=ve({name:"NodesGraph",inheritAttrs:!1}),Vg=ve({...Bg,props:{modelValue:{type:String},nodes:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){ml(O=>({"2aa0fbb8":b,"0ac7dfd1":y}));const n=e,o=t,{FlowInstance:i,showBackgroundCircle:a,flowEleWidth:r,backgroundCirclePosition:s,coreNodeHeight:l,countCoreNodeHeight:u,generateFlowData:c}=cc(n),d=J(()=>a.value?[{type:"background",id:"background-circle",position:s.value,selectable:!1,zIndex:-1}]:[]),f=J(()=>n.nodes.reduce((O,{node_status:T,role:N})=>(N!=="core"&&O[T]++,O),{[Ke.Running]:0,[Ke.Stopped]:0})),h=J(()=>f.value[Ke.Running]+f.value[Ke.Stopped]>20),m=oe([...d.value]);Ae("nodes-graph"),ye(()=>n.nodes,async()=>{u(),m.value=[...d.value,...c(n.nodes)]}),Le(async()=>{await Ve(),m.value=[...d.value,...c(n.nodes)]});const v=O=>{o("update:modelValue",O)},b=`${r.value/2+an+16}px`,w=oe(!1),g=()=>{w.value=!0},C=()=>{w.value=!1},y=`${r.value/2+Kn}px`,M=oe(!1),R=()=>{M.value=!0,g()},D=()=>{M.value=!1};return(O,T)=>(q(),le("div",Lg,[Q(S(rg),{ref_key:"FlowInstance",ref:i,id:"nodes-graph",modelValue:S(m),"onUpdate:modelValue":T[0]||(T[0]=N=>Be(m)?m.value=N:null),"delete-key-code":null,"nodes-draggable":!1,"nodes-connectable":!1,"zoom-on-scroll":!1,"zoom-on-double-click":!1,"zoom-on-pinch":!1,"pan-on-drag":!1,"min-zoom":1,"max-zoom":1},{"node-background":fe(()=>[Q(dg,{onShowPopover:g})]),"node-core":fe(N=>[Q(bg,{height:S(l),"nodes-num":e.nodes.length,status:N.data.node_status,"is-selected":e.modelValue===N.id,onSelect:_=>v(N.id)},null,8,["height","nodes-num","status","is-selected","onSelect"])]),"node-replicant":fe(N=>[Q(zg,{status:N.data.node_status,"is-selected":e.modelValue===N.id,onSelect:_=>v(N.id)},null,8,["status","is-selected","onSelect"])]),_:1},8,["modelValue"]),S(w)?Tn((q(),$e(Mg,{key:0,nodes:e.nodes,class:Qe({"is-more-down":S(h)})},null,8,["nodes","class"])),[[S(Ro),C]]):Me("",!0),S(h)?Tn((q(),$e(kg,{key:1,class:Qe(["nodes-count-popover",{"is-active":S(M)}]),"nodes-count-data":S(f),onClick:R},null,8,["class","nodes-count-data"])),[[S(Ro),D]]):Me("",!0)]))}}),Hg={class:"graph-wrapper"},Gg={class:"nodes-graph-container"},Fg={class:"node-count"},Yg={class:"cluster-name"},Xg={key:0},Ug={class:"node-detail"},Zg={key:0,class:"node-info"},Kg={class:"node-card-header"},Wg={class:"node-title"},qg={class:"node-card-body"},Qg={class:"node-item"},jg={class:"node-item-label"},Jg={class:"node-item-content"},em={class:"node-item"},tm={class:"node-item-label"},nm={class:"node-item-content"},om={class:"node-item"},im={class:"node-item-label"},am={class:"node-item-content"},rm={class:"node-item"},sm={class:"node-item-label"},lm={class:"node-item-content"},um={class:"node-item"},cm={class:"node-item-label"},dm={class:"node-item-content"},fm={class:"node-item"},hm={class:"node-item-label"},pm={class:"node-item-content"},vm={class:"node-item"},gm={class:"node-item-label"},mm={class:"node-item-content"},ym={class:"node-item"},_m={class:"node-item-label"},bm={class:"node-item-content"},wm={class:"node-item"},Sm={class:"node-item-label"},xm={class:"node-item-content"},Em={key:0,class:"node-item"},Am={class:"node-item-label"},Nm={class:"node-item-content"},Mm=ve({name:"NodesGraph"}),Dm=ve({...Mm,setup(e){const{edition:t}=zl(),{locale:n}=Fa(),o=2e3,{nodes:i,loadData:a,clusterName:r}=Ll({loadByDefault:!1,hideProgress:!0,timeout:25e3});let s=!1;const l=oe([]),u=oe(void 0),c=oe(""),d=oe(!0),f=J(()=>!c.value||i.value.length===0||l.value.length===0?{node:{},stats:{}}:b(c.value)),{transMsNumToSimpleStr:h}=Bl(),{syncPolling:m}=oi(),v=async()=>{try{l.value=await Il()}catch(D){return Promise.reject(D)}},b=D=>{const O=i.value.find(({node:N})=>N===D)||{},T=l.value.find(({node:N})=>N===D)||{};return{node:O,stats:T}},{tl:w}=ht("Dashboard"),g=J(()=>_l(f.value.node.memory_used,f.value.node.memory_total)),C=/(?<version>\d\.\d+\.\d+)/,y=D=>{var T,N;if(!D)return"";const O=D.match(C);return O&&((T=O.groups)!=null&&T.version)?(N=O.groups)==null?void 0:N.version:""},M=D=>` https://www.emqx.com/${n.value==="zh"?"zh":"en"}/changelogs/${bl?"enterprise":"broker"}/${D}`;return J(()=>{var D,O;return M(y((O=(D=f.value)==null?void 0:D.node)==null?void 0:O.version))}),m(async()=>{try{return await Promise.all([a(),v()]),s||(c.value=i.value[0].node,s=!0),d.value=!1,Promise.resolve()}catch{return d.value=!1,Promise.reject()}},o),(D,O)=>{const T=Rl,N=Se("el-col"),_=Se("el-tooltip"),H=Se("el-progress"),K=Se("el-row"),E=yl("loading");return q(),le("div",Hg,[Tn((q(),le("div",{class:"graph-entity",ref_key:"graph",ref:u},[I("div",Gg,[I("span",Fg,[O[1]||(O[1]=I("img",{src:lc,width:"12",height:"12",alt:"node"},null,-1)),I("span",Yg,[Q(T,{content:S(r)},null,8,["content"])]),S(r)?(q(),le("span",Xg,"-")):Me("",!0),_t(" "+te(D.$t("Dashboard.node",{n:S(i).length})),1)]),S(d)?Me("",!0):(q(),$e(Vg,{key:0,modelValue:S(c),"onUpdate:modelValue":O[0]||(O[0]=P=>Be(c)?c.value=P:null),nodes:S(i)},null,8,["modelValue","nodes"]))]),I("div",Ug,[S(f)?(q(),le("div",Zg,[I("div",Kg,[I("div",Wg,te(S(w)("nodeData")),1)]),I("div",qg,[Q(K,{gutter:26},{default:fe(()=>[Q(N,{span:14},{default:fe(()=>[I("div",Qg,[I("label",jg,te(S(w)("nodeName"))+": ",1),I("span",Jg,te(S(f).node.node),1)]),I("div",em,[I("label",tm,te(S(w)("uptime"))+": ",1),I("span",nm,te(S(h)(S(f).node.uptime)),1)]),I("div",om,[I("label",im,te(S(w)("currentConnection"))+": ",1),I("span",am,te(S(f).stats["connections.count"]),1)]),I("div",rm,[I("label",sm,te(S(w)("Subscription"))+": ",1),I("span",lm,te(S(f).stats["subscriptions.count"]),1)]),I("div",um,[I("label",cm,te(S(w)("topics"))+": ",1),I("span",dm,te(S(f).stats["topics.count"]),1)])]),_:1}),Q(N,{span:10},{default:fe(()=>{var P,k,z,L,V,F;return[I("div",fm,[I("label",hm,te(S(w)("nodeRole"))+": ",1),I("span",pm,te(S(f).node.role),1)]),I("div",vm,[I("label",gm,te(S(w)("version"))+": ",1),I("span",mm,te(S(f).node.version)+" ("+te(D.$t(S(t).title))+") ",1)]),I("div",ym,[I("label",_m,te(S(w)("maxFds"))+": ",1),I("span",bm,te(S(f).node.max_fds),1)]),I("div",wm,[I("label",Sm,te(S(w)("osCpuLoad"))+": ",1),I("span",xm,[Q(_,{class:"box-item",effect:"dark",content:"load1/load5/load15",placement:"top"},{default:fe(()=>[I("span",null,te(S(f).node.load1+"/"+S(f).node.load5+"/"+S(f).node.load15),1)]),_:1})])]),[0,"0"].includes((k=(P=S(f))==null?void 0:P.node)==null?void 0:k.memory_total)?Me("",!0):(q(),le("div",Em,[I("span",Am,te(S(w)("memory"))+": ",1),I("span",Nm,[Q(_,{class:"box-item",effect:"dark",content:`${(L=(z=S(f))==null?void 0:z.node)==null?void 0:L.memory_used}/${(F=(V=S(f))==null?void 0:V.node)==null?void 0:F.memory_total}`,placement:"top"},{default:fe(()=>[Q(H,{"stroke-width":14,format:()=>"",percentage:S(g)},null,8,["percentage"])]),_:1},8,["content"])])]))]}),_:1})]),_:1})])])):Me("",!0)])])),[[E,S(d),void 0,{lock:!0}]])])}}}),Cm=wl(Dm,[["__scopeId","data-v-32c4c554"]]),Im={class:"overview app-wrapper"},km={class:"rate-item"},$m={class:"rate-label"},Pm={class:"unit"},Tm={class:"line-wrapper"},Om={class:"rate-item"},Rm={class:"rate-label"},zm={class:"unit"},Lm={class:"line-wrapper"},Bm={class:"rate-item"},Vm={class:"rate-label"},Hm={class:"unit"},Gm={class:"line-wrapper"},Fm={class:"rate-item"},Ym={class:"rate-label"},Xm={class:"unit"},Um={class:"line-wrapper"},Zm={class:"count-item"},Km={class:"count-item-hd"},Wm={class:"info-label"},qm={class:"num"},Qm={class:"count-item"},jm={class:"count-item-hd"},Jm={class:"info-label"},ey={class:"num"},ty={class:"count-item"},ny={class:"count-item-hd"},oy={class:"info-label"},iy={class:"num"},ay={class:"count-item-hd"},ry={class:"info-label"},sy={class:"num"},ly={class:"count-item-hd"},uy={class:"info-label"},cy={class:"num"},dy=ve({name:"Overview"}),My=ve({...dy,setup(e){const{tl:n}=ht("Dashboard"),o=m=>({x:new Array(m).fill(void 0),y:new Array(m).fill(void 0)}),i=mt({received_msg_rate:o(32),sent_msg_rate:o(32),received_bytes_rate:o(32),sent_bytes_rate:o(32)}),a=oe({node:0,received_msg_rate:0,sent_msg_rate:0,received_bytes_rate:0,sent_bytes_rate:0,subscriptions:0,connections:0,topics:0,live_connections:0}),r=oe({"message.qos0.latency":7,"message.qos1.latency":3,"message.qos2.latency":12}),s=J(()=>!ct.isUndefined(a.value.sessions_hist_hwmark)),l=oe("msg"),u=m=>m===void 0?0:Sl(m),{syncPolling:c}=oi(),d=async()=>{const m=await kl();if(m){if(a.value=m,h(m),!m.received_msg_rate)return;const v=await $l();v&&(r.value=v)}},f=()=>Ga().format("HH:mm:ss"),h=(m={})=>{["received_msg_rate","sent_msg_rate","received_bytes_rate","sent_bytes_rate"].forEach(v=>{i[v]=i[v]||{x:[],y:[]};const b=m[v]||0;i[v].x.push(f()),i[v].y.push(b),i[v].x.length>=16&&(i[v].x.shift(),i[v].y.shift())})};return c(d,2e3),(m,v)=>{const b=Se("el-card"),w=Se("el-col"),g=Se("router-link"),C=Se("el-row");return q(),le("div",Im,[Q(C,{class:"block",gutter:16},{default:fe(()=>[Q(w,{span:S(s)?7:8},{default:fe(()=>[Q(b,{class:"rate-card"},{default:fe(()=>[S(l)==="msg"?(q(),le(Pe,{key:0},[I("div",km,[I("div",null,[I("label",$m,te(m.$t("Dashboard.currentMessageInRate")),1),I("span",Pm,te(m.$t("Dashboard.strip",{n:S(a).received_msg_rate}))+"/"+te(m.$t("Dashboard.second")),1)]),I("div",Tm,[Q(pn,{value:S(i).received_msg_rate,type:"bar",color:"#3D7FF9"},null,8,["value"])])]),I("div",Om,[I("div",null,[I("label",Rm,te(m.$t("Dashboard.currentMessageOutRate")),1),I("span",zm,te(m.$t("Dashboard.strip",{n:S(a).sent_msg_rate}))+"/"+te(m.$t("Dashboard.second")),1)]),I("div",Lm,[Q(pn,{value:S(i).sent_msg_rate,type:"bar",color:"#5D4EFF"},null,8,["value"])])])],64)):(q(),le(Pe,{key:1},[I("div",Bm,[I("div",null,[I("label",Vm,te(m.$t("Dashboard.currentMessageInRate")),1),I("span",null,te(u(S(a).received_bytes_rate)),1),I("span",Hm,te(m.$t("Dashboard.byte"))+"/"+te(m.$t("Dashboard.second")),1)]),I("div",Gm,[Q(pn,{value:S(i).received_bytes_rate,type:"bar",color:"#3D7FF9"},null,8,["value"])])]),I("div",Fm,[I("div",null,[I("label",Ym,te(m.$t("Dashboard.currentMessageOutRate")),1),I("span",null,te(u(S(a).sent_bytes_rate)),1),I("span",Xm,te(m.$t("Dashboard.byte"))+"/"+te(m.$t("Dashboard.second")),1)]),I("div",Um,[Q(pn,{value:S(i).sent_bytes_rate,type:"bar",color:"#5D4EFF"},null,8,["value"])])])],64))]),_:1})]),_:1},8,["span"]),Q(w,{span:S(s)?17:16},{default:fe(()=>[Q(b,{class:"main-info-item"},{default:fe(()=>[I("div",Zm,[I("div",Km,[v[0]||(v[0]=I("img",{src:so,width:"16",height:"16",alt:"clients"},null,-1)),I("p",Wm,te(S(n)("messageLatency",{target:"QoS 0"})),1)]),I("div",qm,[_t(te(S(r)["message.qos0.latency"])+" ",1),v[1]||(v[1]=I("span",{class:"unit"},"ms",-1))])]),I("div",Qm,[I("div",jm,[v[2]||(v[2]=I("img",{src:so,width:"16",height:"16",alt:"clients"},null,-1)),I("p",Jm,te(S(n)("messageLatency",{target:"QoS 1"})),1)]),I("div",ey,[_t(te(S(r)["message.qos1.latency"])+" ",1),v[3]||(v[3]=I("span",{class:"unit"},"ms",-1))])]),I("div",ty,[I("div",ny,[v[4]||(v[4]=I("img",{src:so,width:"16",height:"16",alt:"clients"},null,-1)),I("p",oy,te(S(n)("messageLatency",{target:"QoS 2"})),1)]),I("div",iy,[_t(te(S(r)["message.qos2.latency"])+" ",1),v[5]||(v[5]=I("span",{class:"unit"},"ms",-1))])])]),_:1}),Q(b,{class:"main-info-item with-three-items"},{default:fe(()=>[Q(g,{class:"count-item",to:{name:"subscription"}},{default:fe(()=>[I("div",ay,[v[6]||(v[6]=I("img",{src:Ql,width:"16",height:"16",alt:"subs"},null,-1)),I("p",ry,te(m.$t("Dashboard.subscriptionNumber")),1)]),I("div",sy,te(u(S(a).subscriptions)),1)]),_:1}),Q(g,{class:"count-item",to:{name:"topics"}},{default:fe(()=>[I("div",ly,[v[7]||(v[7]=I("img",{src:jl,width:"16",height:"16",alt:"topics"},null,-1)),I("p",uy,te(m.$t("Dashboard.topics")),1)]),I("div",cy,te(u(S(a).topics)),1)]),_:1})]),_:1})]),_:1},8,["span"])]),_:1}),Q(b,{class:"cluster-card block allow-overflow"},{default:fe(()=>[Q(Cm)]),_:1}),Q(sc)])}}});export{My as default};
