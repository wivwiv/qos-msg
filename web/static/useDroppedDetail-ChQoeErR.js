import{F as G,j as W,_ as I,W as M,a as b,aO as en,aP as lt,C as Gt,J as zt,h as E,ac as J,O as P,aQ as nn,aR as rn,aS as an,ai as on,ab as Ct,aT as X,aU as sn,aV as un,ah as nt,aW as Te,g as R,aX as we,aY as ln,v as jt,w as qt,a7 as N,aZ as De,af as rt,a_ as cn,a$ as Re,a2 as dt,$ as it,b0 as pn,e as fn,b1 as vt,a3 as ot,b2 as gn,b3 as Qt,b as At,R as Ie,aw as Jt,i as ct,f as dn,b4 as vn,G as st,a6 as hn,ao as mn,an as yn,ak as xn,aj as Oe,b5 as _n,b6 as bn,b7 as Pe,b8 as Sn,b9 as Cn,Z as K,ba as An,V as Tn,K as te,bb as wn,bc as Dn,s as Rn,ae as ee,ag as In,bd as On,A as Pn,aa as Ln,a1 as Mn,be as kn,N as Bn,u as En,a0 as Gn}from"./pie-Bag65DYr.js";import{z as zn,j as Vt,M as pt,q as Le,h as Vn}from"./index-Dp_94g6t.js";var ne=["x","y","radius","angle","single"],Wn=["cartesian2d","polar","singleAxis"];function Nn(n){var e=n.get("coordinateSystem");return W(Wn,e)>=0}function V(n){return n+"Axis"}function Zn(n,e){var t=G(),r=[],i=G();n.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||u(c)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&s(c)&&(u(c),a=!0)}function u(c){i.set(c.uid,!0),r.push(c),l(c)}function s(c){var d=!1;return c.eachTargetAxis(function(f,g){var p=t.get(f);p&&p[g]&&(d=!0)}),d}function l(c){c.eachTargetAxis(function(d,f){(t.get(d)||t.set(d,[]))[f]=!0})}return r}function pi(n){var e=n.ecModel,t={infoList:[],infoMap:G()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(V(r),i);if(a){var o=a.getCoordSysModel();if(o){var u=o.uid,s=t.infoMap.get(u);s||(s={model:o,axisModels:[]},t.infoList.push(s),t.infoMap.set(u,s)),s.axisModels.push(a)}}}),t}var yt=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),Fn=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=re(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=re(t);M(this.option,t,!0),M(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;b([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=G(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return b(ne,function(i){var a=this.getReferringComponents(V(i),en);if(a.specified){r=!0;var o=new yt;b(a.models,function(u){o.add(u.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",u=i.findComponents({mainType:o+"Axis"});s(u,o)}if(a){var u=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});s(u,"single")}function s(l,c){var d=l[0];if(d){var f=new yt;if(f.add(d.componentIndex),t.set(c,f),a=!1,c==="x"||c==="y"){var g=d.getReferringComponents("grid",lt).models[0];g&&b(l,function(p){d.componentIndex!==p.componentIndex&&g===p.getReferringComponents("grid",lt).models[0]&&f.add(p.componentIndex)})}}}a&&b(ne,function(l){if(a){var c=i.findComponents({mainType:V(l),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var d=new yt;d.add(c[0].componentIndex),t.set(l,d),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");b([["start","startValue"],["end","endValue"]],function(a,o){var u=t[a[0]]!=null,s=t[a[1]]!=null;u&&!s?r[o]="percent":!u&&s?r[o]="value":i?r[o]=i[o]:u&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(V(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){b(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(V(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;b([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;b(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],u=this._targetAxisInfoMap.get(o),s=0;s<u.indexList.length;s++){var l=this.getAxisProxy(o,u.indexList[s]);if(l.hostedBy(this))return l;r||(r=l)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Gt);function re(n){var e={};return b(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var Hn=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Fn),Un=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(zt),$n=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Un);function Me(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=U(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var u=Math.abs(e[1]-e[0]);u=U(u,[0,o]),i=a=U(u,[i,a]),r=0}e[0]=U(e[0],t),e[1]=U(e[1],t);var s=xt(e,r);e[r]+=n;var l=i||0,c=t.slice();s.sign<0?c[0]+=l:c[1]-=l,e[r]=U(e[r],c);var d;return d=xt(e,r),i!=null&&(d.sign!==s.sign||d.span<i)&&(e[1-r]=e[r]+s.sign*i),d=xt(e,r),a!=null&&d.span>a&&(e[1-r]=e[r]+d.sign*a),e}function xt(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function U(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var Y=b,ie=on,Yn=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(Nn(t)){var r=V(this._dimName),i=t.getReferringComponents(r,lt).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return E(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],u=[],s=[],l;Y(["start","end"],function(f,g){var p=e[f],v=e[f+"Value"];a[g]==="percent"?(p==null&&(p=o[g]),v=i.parse(J(p,o,t))):(l=!0,v=v==null?t[g]:i.parse(v),p=J(v,t,o)),s[g]=v==null||isNaN(v)?t[g]:v,u[g]=p==null||isNaN(p)?o[g]:p}),ie(s),ie(u);var c=this._minMaxSpan;l?d(s,u,t,o,!1):d(u,s,o,t,!0);function d(f,g,p,v,m){var y=m?"Span":"ValueSpan";Me(0,f,p,"all",c["min"+y],c["max"+y]);for(var h=0;h<2;h++)g[h]=J(f[h],p,v,!0),m&&(g[h]=i.parse(g[h]))}return{valueWindow:s,percentWindow:u}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=Xn(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Y(i,function(s){var l=s.getData(),c=l.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var d=l.getStore(),f=P(c,function(g){return l.getDimensionIndex(g)},l);l.filterSelf(function(g){for(var p,v,m,y=0;y<c.length;y++){var h=d.get(f[y],g),x=!isNaN(h),_=h<o[0],S=h>o[1];if(x&&!_&&!S)return!0;x&&(m=!0),_&&(p=!0),S&&(v=!0)}return m&&p&&v})}else Y(c,function(g){if(a==="empty")s.setData(l=l.map(g,function(v){return u(v)?v:NaN}));else{var p={};p[g]=o,l.selectRange(p)}});Y(c,function(g){l.setApproximateExtent(o,g)})}});function u(s){return s>=o[0]&&s<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;Y(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=J(r[0]+o,r,[0,100],!0):a!=null&&(o=J(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=nn(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function Xn(n,e,t){var r=[1/0,-1/0];Y(t,function(o){rn(r,o.getData(),e)});var i=n.getAxisModel(),a=an(i.axis.scale,i,r).calculate();return[a.min,a.max]}var Kn={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,u){var s=n.getComponent(V(o),u);i(o,u,s,a)})})}e(function(i,a,o,u){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,u){o.__dzAxisProxy||(o.__dzAxisProxy=new Yn(i,a,u,n),t.push(o.__dzAxisProxy))});var r=G();return b(t,function(i){b(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function jn(n){n.registerAction("dataZoom",function(e,t){var r=Zn(t,e);b(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var ae=!1;function qn(n){ae||(ae=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,Kn),jn(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Qn(n){n.registerComponentModel(Hn),n.registerComponentView($n),qn(n)}var L=function(){function n(){}return n}(),ke={};function tt(n,e){ke[n]=e}function Be(n){return ke[n]}var Jn=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;b(this.option.feature,function(r,i){var a=Be(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),M(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Gt);function tr(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=Ct(r,a,i);X(e.get("orient"),n,e.get("itemGap"),o.width,o.height),sn(n,r,a,i)}function Ee(n,e){var t=un(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new nt({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var er=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var u=+t.get("itemSize"),s=t.get("orient")==="vertical",l=t.get("feature")||{},c=this._features||(this._features={}),d=[];b(l,function(p,v){d.push(v)}),new Te(this._featureNames||[],d).add(f).update(f).remove(R(f,null)).execute(),this._featureNames=d;function f(p,v){var m=d[p],y=d[v],h=l[m],x=new we(h,t,t.ecModel),_;if(a&&a.newTitle!=null&&a.featureName===m&&(h.title=a.newTitle),m&&!y){if(nr(m))_={onclick:x.option.onclick,featureName:m};else{var S=Be(m);if(!S)return;_=new S}c[m]=_}else if(_=c[y],!_)return;_.uid=ln("toolbox-feature"),_.model=x,_.ecModel=r,_.api=i;var C=_ instanceof L;if(!m&&y){C&&_.dispose&&_.dispose(r,i);return}if(!x.get("show")||C&&_.unusable){C&&_.remove&&_.remove(r,i);return}g(x,_,m),x.setIconStatus=function(A,T){var D=this.option,w=this.iconPaths;D.iconStatus=D.iconStatus||{},D.iconStatus[A]=T,w[A]&&(T==="emphasis"?jt:qt)(w[A])},_ instanceof L&&_.render&&_.render(x,r,i,a)}function g(p,v,m){var y=p.getModel("iconStyle"),h=p.getModel(["emphasis","iconStyle"]),x=v instanceof L&&v.getIcons?v.getIcons():p.get("icon"),_=p.get("title")||{},S,C;N(x)?(S={},S[m]=x):S=x,N(_)?(C={},C[m]=_):C=_;var A=p.iconPaths={};b(S,function(T,D){var w=De(T,{},{x:-u/2,y:-u/2,width:u,height:u});w.setStyle(y.getItemStyle());var z=w.ensureState("emphasis");z.style=h.getItemStyle();var O=new rt({style:{text:C[D],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:cn({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},r)},ignore:!0});w.setTextContent(O),Re({el:w,componentModel:t,itemName:D,formatterParamsExtra:{title:C[D]}}),w.__title=C[D],w.on("mouseover",function(){var k=h.getItemStyle(),H=s?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";O.setStyle({fill:h.get("textFill")||k.fill||k.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),w.setTextConfig({position:h.get("textPosition")||H}),O.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",D])!=="emphasis"&&i.leaveEmphasis(this),O.hide()}),(p.get(["iconStatus",D])==="emphasis"?jt:qt)(w),o.add(w),w.on("click",dt(v.onclick,v,r,i,D)),A[D]=w})}tr(o,t,i),o.add(Ee(o.getBoundingRect(),t)),s||o.eachChild(function(p){var v=p.__title,m=p.ensureState("emphasis"),y=m.textConfig||(m.textConfig={}),h=p.getTextContent(),x=h&&h.ensureState("emphasis");if(x&&!it(x)&&v){var _=x.style||(x.style={}),S=pn(v,rt.makeFont(_)),C=p.x+o.x,A=p.y+o.y+u,T=!1;A+S.height>i.getHeight()&&(y.position="top",T=!0);var D=T?-5-S.height:u+10;C+S.width/2>i.getWidth()?(y.position=["100%",D],_.align="right"):C-S.width/2<0&&(y.position=[0,D],_.align="left")}})},e.prototype.updateView=function(t,r,i,a){b(this._features,function(o){o instanceof L&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){b(this._features,function(i){i instanceof L&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){b(this._features,function(i){i instanceof L&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(zt);function nr(n){return n.indexOf("my")===0}var rr=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",u=o?"svg":i.get("type",!0)||"png",s=r.getConnectedDataURL({type:u,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),l=fn.browser;if(typeof MouseEvent=="function"&&(l.newEdge||!l.ie&&!l.edge)){var c=document.createElement("a");c.download=a+"."+u,c.target="_blank",c.href=s;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var f=s.split(","),g=f[0].indexOf("base64")>-1,p=o?decodeURIComponent(f[1]):f[1];g&&(p=window.atob(p));var v=a+"."+u;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,y=new Uint8Array(m);m--;)y[m]=p.charCodeAt(m);var h=new Blob([y]);window.navigator.msSaveOrOpenBlob(h,v)}else{var x=document.createElement("iframe");document.body.appendChild(x);var _=x.contentWindow,S=_.document;S.open("image/svg+xml","replace"),S.write(p),S.close(),_.focus(),S.execCommand("SaveAs",!0,v),document.body.removeChild(x)}}else{var C=i.get("lang"),A='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',T=window.open();T.document.write(A),T.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(L),oe="__ec_magicType_stack__",ir=[["line","bar"],["stack"]],ar=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return b(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(se[i]){var u={series:[]},s=function(d){var f=d.subType,g=d.id,p=se[i](f,g,d,a);p&&(ot(p,d.option),u.series.push(p));var v=d.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var m=v.getAxesByScale("ordinal")[0];if(m){var y=m.dim,h=y+"Axis",x=d.getReferringComponents(h,lt).models[0],_=x.componentIndex;u[h]=u[h]||[];for(var S=0;S<=_;S++)u[h][_]=u[h][_]||{};u[h][_].boundaryGap=i==="bar"}}};b(ir,function(d){W(d,i)>=0&&b(d,function(f){a.setIconStatus(f,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},s);var l,c=i;i==="stack"&&(l=M({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:u,newTitle:l,featureName:"magicType"})}},e}(L),se={line:function(n,e,t,r){if(n==="bar")return M({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return M({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===oe;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),M({id:e,stack:i?"":oe},r.get(["option","stack"])||{},!0)}};vt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var ht=new Array(60).join("-"),j="	";function or(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var u=o.dim+"_"+o.index;e[u]||(e[u]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[u].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function sr(n){var e=[];return b(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,u=[" "].concat(P(t.series,function(g){return g.name})),s=[i.model.getCategories()];b(t.series,function(g){var p=g.getRawData();s.push(g.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var l=[u.join(j)],c=0;c<s[0].length;c++){for(var d=[],f=0;f<s.length;f++)d.push(s[f][c]);l.push(d.join(j))}e.push(l.join(`
`))}),e.join(`

`+ht+`

`)}function ur(n){return P(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],u=t.getName(o),s=0;s<a-1;s++)i[s]=arguments[s];r.push((u?u+j:"")+i.join(j))}),r.join(`
`)}).join(`

`+ht+`

`)}function lr(n){var e=or(n);return{value:Ie([sr(e.seriesGroupByCategoryAxis),ur(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+ht+`

`),meta:e.meta}}function ft(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function cr(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(j)>=0)return!0}var Tt=new RegExp("["+j+"]+","g");function pr(n){for(var e=n.split(/\n+/g),t=ft(e.shift()).split(Tt),r=[],i=P(t,function(s){return{name:s,data:[]}}),a=0;a<e.length;a++){var o=ft(e[a]).split(Tt);r.push(o.shift());for(var u=0;u<o.length;u++)i[u]&&(i[u].data[a]=o[u])}return{series:i,categories:r}}function fr(n){for(var e=n.split(/\n+/g),t=ft(e.shift()),r=[],i=0;i<e.length;i++){var a=ft(e[i]);if(a){var o=a.split(Tt),u="",s=void 0,l=!1;isNaN(o[0])?(l=!0,u=o[0],o=o.slice(1),r[i]={name:u,value:[]},s=r[i].value):s=r[i]=[];for(var c=0;c<o.length;c++)s.push(+o[c]);s.length===1&&(l?r[i].value=s[0]:r[i]=s[0])}}return{name:t,data:r}}function gr(n,e){var t=n.split(new RegExp(`
*`+ht+`
*`,"g")),r={series:[]};return b(t,function(i,a){if(cr(i)){var o=pr(i),u=e[a],s=u.axisDim+"Axis";u&&(r[s]=r[s]||[],r[s][u.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=fr(i);r.series.push(o)}}),r}var dr=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var u=document.createElement("h4"),s=a.get("lang")||[];u.innerHTML=s[0]||a.get("title"),u.style.cssText="margin:10px 20px",u.style.color=a.get("textColor");var l=document.createElement("div"),c=document.createElement("textarea");l.style.cssText="overflow:auto";var d=a.get("optionToContent"),f=a.get("contentToOption"),g=lr(t);if(it(d)){var p=d(r.getOption());N(p)?l.innerHTML=p:gn(p)&&l.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=g.value,l.appendChild(c)}var m=g.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var h="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),_=document.createElement("div");h+=";background-color:"+a.get("buttonColor"),h+=";color:"+a.get("buttonTextColor");var S=this;function C(){i.removeChild(o),S._dom=null}Qt(x,"click",C),Qt(_,"click",function(){if(f==null&&d!=null||f!=null&&d==null){C();return}var A;try{it(f)?A=f(l,r.getOption()):A=gr(c.value,m)}catch(T){throw C(),new Error("Data view format error "+T)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),C()}),x.innerHTML=s[1],_.innerHTML=s[2],_.style.cssText=x.style.cssText=h,!a.get("readOnly")&&y.appendChild(_),y.appendChild(x),o.appendChild(u),o.appendChild(l),o.appendChild(y),l.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(L);function vr(n,e){return P(n,function(t,r){var i=e&&e[r];if(Jt(i)&&!ct(i)){var a=Jt(t)&&!ct(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=ot(t,i),o&&delete t.name,t}else return t})}vt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];b(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(At({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:vr(r.data,a)})}}),e.mergeOption(ot({series:t},n.newOption))});var Ge=b,ze=dn();function hr(n,e){var t=Wt(n);Ge(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var u=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(u){var s=u.getPercentRange();t[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}}),t.push(e)}function mr(n){var e=Wt(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return Ge(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function yr(n){ze(n).snapshots=null}function xr(n){return Wt(n).length}function Wt(n){var e=ze(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var _r=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){yr(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(L);vt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var ue="\0_ec_interaction_mutex";function br(n,e,t){var r=Nt(n);r[e]=t}function Sr(n,e,t){var r=Nt(n),i=r[e];i===t&&(r[e]=null)}function fi(n,e){return!!Nt(n)[e]}function Nt(n){return n[ue]||(n[ue]={})}vt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},vn);var Z=!0,at=Math.min,q=Math.max,Cr=Math.pow,Ar=1e4,Tr=6,wr=6,le="globalPan",Dr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Rr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ce={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Ir=0,Or=function(n){I(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new st,r._uid="brushController_"+Ir++,b(Gr,function(i,a){this._handlers[a]=dt(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||br(r,le,this._uid),b(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=M(E(ce),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Sr(t,le,this._uid),b(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};b(t,function(i){r[i.panelId]=E(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=P(t,function(f){return M(E(ce),f,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,u=this._creatingCover;return new Te(i,t,l,s).add(c).update(c).remove(d).execute(),this;function s(f,g){return(f.id!=null?f.id:r+g)+"-"+f.brushType}function l(f,g){return s(f.__brushOption,g)}function c(f,g){var p=t[f];if(g!=null&&i[g]===u)a[f]=i[g];else{var v=a[f]=g!=null?(i[g].__brushOption=p,i[g]):We(o,Ve(o,p));Zt(o,v)}}function d(f){i[f]!==u&&o.group.remove(i[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),wt(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(hn);function Ve(n,e){var t=mt[e.brushType].createCover(n,e);return t.__brushOption=e,Ze(t,e),n.group.add(t),t}function We(n,e){var t=Ft(e);return t.endCreating&&(t.endCreating(n,e),Ze(e,e.__brushOption)),e}function Ne(n,e){var t=e.__brushOption;Ft(e).updateCoverShape(n,e,t.range,t)}function Ze(n,e){var t=e.z;t==null&&(t=Ar),n.traverse(function(r){r.z=t,r.z2=t})}function Zt(n,e){Ft(e).updateCommon(n,e),Ne(n,e)}function Ft(n){return mt[n.__brushOption.brushType]}function Ht(n,e,t){var r=n._panels;if(!r)return Z;var i,a=n._transform;return b(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function Fe(n,e){var t=n._panels;if(!t)return Z;var r=e.__brushOption.panelId;return r!=null?t[r]:Z}function wt(n){var e=n._covers,t=e.length;return b(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function F(n,e){var t=P(n._covers,function(r){var i=r.__brushOption,a=E(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Pr(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=Cr(i*i+a*a,.5);return o>Tr}function He(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function Ue(n,e,t,r){var i=new st;return i.add(new nt({name:"main",style:Ut(t),silent:!0,draggable:!0,cursor:"move",drift:R(pe,n,e,i,["n","s","w","e"]),ondragend:R(F,e,{isEnd:!0})})),b(r,function(a){i.add(new nt({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:R(pe,n,e,i,a),ondragend:R(F,e,{isEnd:!0})}))}),i}function $e(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=q(i,wr),o=t[0][0],u=t[1][0],s=o-i/2,l=u-i/2,c=t[0][1],d=t[1][1],f=c-a+i/2,g=d-a+i/2,p=c-o,v=d-u,m=p+i,y=v+i;B(n,e,"main",o,u,p,v),r.transformable&&(B(n,e,"w",s,l,a,y),B(n,e,"e",f,l,a,y),B(n,e,"n",s,l,m,a),B(n,e,"s",s,g,m,a),B(n,e,"nw",s,l,a,a),B(n,e,"ne",f,l,a,a),B(n,e,"sw",s,g,a,a),B(n,e,"se",f,g,a,a))}function Dt(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(Ut(t)),i.attr({silent:!r,cursor:r?"move":"default"}),b([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),u=a.length===1?Rt(n,a[0]):Mr(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?Rr[u]+"-resize":null})})}function B(n,e,t,r,i,a,o){var u=e.childOfName(t);u&&u.setShape(Br($t(n,e,[[r,i],[r+a,i+o]])))}function Ut(n){return ot({strokeNoScale:!0},n.brushStyle)}function Ye(n,e,t,r){var i=[at(n,t),at(e,r)],a=[q(n,t),q(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Lr(n){return Oe(n.group)}function Rt(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=xn(t[e],Lr(n));return r[i]}function Mr(n,e){var t=[Rt(n,e[0]),Rt(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function pe(n,e,t,r,i,a){var o=t.__brushOption,u=n.toRectRange(o.range),s=Xe(e,i,a);b(r,function(l){var c=Dr[l];u[c[0]][c[1]]+=s[c[0]]}),o.range=n.fromRectRange(Ye(u[0][0],u[1][0],u[0][1],u[1][1])),Zt(e,t),F(e,{isEnd:!1})}function kr(n,e,t,r){var i=e.__brushOption.range,a=Xe(n,t,r);b(i,function(o){o[0]+=a[0],o[1]+=a[1]}),Zt(n,e),F(n,{isEnd:!1})}function Xe(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function $t(n,e,t){var r=Fe(n,e);return r&&r!==Z?r.clipPath(t,n._transform):E(t)}function Br(n){var e=at(n[0][0],n[1][0]),t=at(n[0][1],n[1][1]),r=q(n[0][0],n[1][0]),i=q(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function Er(n,e,t){if(!(!n._brushType||zr(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=Ht(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var u=i[o].__brushOption;if(a&&(a===Z||u.panelId===a.panelId)&&mt[u.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function It(n){var e=n.event;e.preventDefault&&e.preventDefault()}function Ot(n,e,t){return n.childOfName("main").contain(e,t)}function Ke(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,u;if(n._track.push(t.slice()),Pr(n)||i){if(a&&!i){o.brushMode==="single"&&wt(n);var s=E(o);s.brushType=fe(s.brushType,a),s.panelId=a===Z?null:a.panelId,i=n._creatingCover=Ve(n,s),n._covers.push(i)}if(i){var l=mt[fe(n._brushType,a)],c=i.__brushOption;c.range=l.getCreatingRange($t(n,i,n._track)),r&&(We(n,i),l.updateCommon(n,i)),Ne(n,i),u={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&Ht(n,e,t)&&wt(n)&&(u={isEnd:r,removeOnClick:!0});return u}function fe(n,e){return n==="auto"?e.defaultBrushType:n}var Gr={mousedown:function(n){if(this._dragging)ge(this,n);else if(!n.target||!n.target.draggable){It(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=Ht(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(Er(this,n,r),this._dragging){It(n);var i=Ke(this,n,r,!1);i&&F(this,i)}},mouseup:function(n){ge(this,n)}};function ge(n,e){if(n._dragging){It(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=Ke(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&F(n,a)}}function zr(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var mt={lineX:de(0),lineY:de(1),rect:{createCover:function(n,e){function t(r){return r}return Ue({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=He(n);return Ye(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){$e(n,e,t,r)},updateCommon:Dt,contain:Ot},polygon:{createCover:function(n,e){var t=new st;return t.add(new mn({name:"main",style:Ut(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new yn({name:"main",draggable:!0,drift:R(kr,n,e),ondragend:R(F,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:$t(n,e,t)})},updateCommon:Dt,contain:Ot}};function de(n){return{createCover:function(e,t){return Ue({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=He(e),r=at(t[0][n],t[1][n]),i=q(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=Fe(e,t);if(o!==Z&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var u=e._zr;a=[0,[u.getWidth(),u.getHeight()][1-n]]}var s=[r,a];n&&s.reverse(),$e(e,t,s,i)},updateCommon:Dt,contain:Ot}}var Vr={axisPointer:1,tooltip:1,brush:1};function Wr(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!Vr.hasOwnProperty(r.mainType)&&i&&i.model!==t}function Nr(n){return n=Yt(n),function(e){return _n(e,n)}}function Zr(n,e){return n=Yt(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function Fr(n,e,t){var r=Yt(n);return function(i,a){return r.contain(a[0],a[1])&&!Wr(i,e,t)}}function Yt(n){return bn.create(n)}var Hr=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],je=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=ve(t,e);b(Ur,function(o,u){(!r||!r.include||W(r.include,u)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=_t[r.brushType](0,a,i);r.__rangeOffset={offset:xe[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){b(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&b(a.coordSyses,function(o){var u=_t[i.brushType](1,o,i.range,!0);r(i,u.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){b(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=_t[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?xe[r.brushType](a.values,o.offset,$r(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return P(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:Nr(i),isTargetByCursor:Fr(i,e,r.coordSysModel),getLinearBrushOtherExtent:Zr(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&W(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=ve(t,e),a=0;a<r.length;a++){var o=r[a],u=e.panelId;if(u){if(o.panelId===u)return o}else for(var s=0;s<he.length;s++)if(he[s](i,o))return o}return!0},n}();function Pt(n){return n[0]>n[1]&&n.reverse(),n}function ve(n,e){return Pe(n,e,{includeMainTypes:Hr})}var Ur={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=G(),o={},u={};!t&&!r&&!i||(b(t,function(s){var l=s.axis.grid.model;a.set(l.id,l),o[l.id]=!0}),b(r,function(s){var l=s.axis.grid.model;a.set(l.id,l),u[l.id]=!0}),b(i,function(s){a.set(s.id,s),o[s.id]=!0,u[s.id]=!0}),a.each(function(s){var l=s.coordinateSystem,c=[];b(l.getCartesians(),function(d,f){(W(t,d.getAxis("x").model)>=0||W(r,d.getAxis("y").model)>=0)&&c.push(d)}),e.push({panelId:"grid--"+s.id,gridModel:s,coordSysModel:s,coordSys:c[0],coordSyses:c,getPanelRect:me.grid,xAxisDeclared:o[s.id],yAxisDeclared:u[s.id]})}))},geo:function(n,e){b(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:me.geo})})}},he=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],me={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(Oe(n)),e}},_t={lineX:R(ye,0),lineY:R(ye,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[Pt([i[0],a[0]]),Pt([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=P(t,function(o){var u=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],u[0]),i[1][0]=Math.min(i[1][0],u[1]),i[0][1]=Math.max(i[0][1],u[0]),i[1][1]=Math.max(i[1][1],u[1]),u});return{values:a,xyMinMax:i}}};function ye(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=Pt(P([0,1],function(u){return e?i.coordToData(i.toLocalCoord(r[u]),!0):i.toGlobalCoord(i.dataToCoord(r[u]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var xe={lineX:R(_e,0),lineY:R(_e,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return P(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function _e(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function $r(n,e){var t=be(n),r=be(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function be(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var Lt=b,Yr=Cn("toolbox-dataZoom_"),Xr=function(n){I(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new Or(i.getZr()),this._brushController.on("brush",dt(this._onBrush,this)).mount()),qr(t,r,this,a,i),jr(t,r)},e.prototype.onclick=function(t,r,i){Kr[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new je(Xt(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(l,c,d){if(d.type==="cartesian2d"){var f=l.brushType;f==="rect"?(u("x",d,c[0]),u("y",d,c[1])):u({lineX:"x",lineY:"y"}[f],d,c)}}),hr(a,i),this._dispatchZoomAction(i);function u(l,c,d){var f=c.getAxis(l),g=f.model,p=s(l,g,a),v=p.findRepresentativeAxisProxy(g).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(d=Me(0,d.slice(),f.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:d[0],endValue:d[1]})}function s(l,c,d){var f;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var p=g.getAxisModel(l,c.componentIndex);p&&(f=g)}),f}},e.prototype._dispatchZoomAction=function(t){var r=[];Lt(t,function(i,a){r.push(E(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(L),Kr={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(mr(this.ecModel))}};function Xt(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function jr(n,e){n.setIconStatus("back",xr(e)>1?"emphasis":"normal")}function qr(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new je(Xt(n),e,{include:["grid"]}),u=o.makePanelOpts(i,function(s){return s.xAxisDeclared&&!s.yAxisDeclared?"lineX":!s.xAxisDeclared&&s.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(u).enableBrush(a&&u.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Sn("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=Xt(r),o=Pe(n,a);Lt(o.xAxisModels,function(s){return u(s,"xAxis","xAxisIndex")}),Lt(o.yAxisModels,function(s){return u(s,"yAxis","yAxisIndex")});function u(s,l,c){var d=s.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Yr+l+d};f[c]=d,i.push(f)}return i});function Qr(n){n.registerComponentModel(Jn),n.registerComponentView(er),tt("saveAsImage",rr),tt("magicType",ar),tt("dataView",dr),tt("dataZoom",Xr),tt("restore",_r),K(Qn)}K(Qr);var Jr=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},Mt=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),ct(r)&&b(r,function(a,o){N(a)&&(a={type:a}),r[o]=M(a,Jr(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(s){var l=s.name;i.push(l);var c;if(s.legendVisualProvider){var d=s.legendVisualProvider,f=d.getAllNames();t.isSeriesFiltered(s)||(i=i.concat(f)),f.length?r=r.concat(f):c=!0}else c=!0;c&&An(s)&&r.push(s.name)}),this._availableNames=i;var a=this.get("data")||r,o=G(),u=P(a,function(s){return(N(s)||Tn(s))&&(s={name:s}),o.get(s.name)?null:(o.set(s.name,!0),new we(s,this,this.ecModel))},this);this._data=Ie(u,function(s){return!!s})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;b(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;b(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;b(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&W(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Gt),$=R,kt=b,ut=st,qe=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new ut),this.group.add(this._selectorGroup=new ut),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),u=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&u==="vertical"?"right":"left");var s=t.get("selector",!0),l=t.get("selectorPosition",!0);s&&(!l||l==="auto")&&(l=u==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,s,u,l);var c=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},f=t.get("padding"),g=Ct(c,d,f),p=this.layoutInner(t,o,g,a,s,l),v=Ct(ot({width:p.width,height:p.height},c),d,f);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Ee(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,u,s){var l=this.getContentGroup(),c=G(),d=r.get("selectedMode"),f=[];i.eachRawSeries(function(g){!g.get("legendHoverLink")&&f.push(g.id)}),kt(r.getData(),function(g,p){var v=g.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new ut;m.newline=!0,l.add(m);return}var y=i.getSeriesByName(v)[0];if(!c.get(v))if(y){var h=y.getData(),x=h.getVisual("legendLineStyle")||{},_=h.getVisual("legendIcon"),S=h.getVisual("style"),C=this._createItem(y,v,p,g,r,t,x,S,_,d,a);C.on("click",$(Se,v,null,a,f)).on("mouseover",$(Bt,y.name,null,a,f)).on("mouseout",$(Et,y.name,null,a,f)),i.ssr&&C.eachChild(function(A){var T=te(A);T.seriesIndex=y.seriesIndex,T.dataIndex=p,T.ssrType="legend"}),c.set(v,!0)}else i.eachRawSeries(function(A){if(!c.get(v)&&A.legendVisualProvider){var T=A.legendVisualProvider;if(!T.containName(v))return;var D=T.indexOfName(v),w=T.getItemVisual(D,"style"),z=T.getItemVisual(D,"legendIcon"),O=wn(w.fill);O&&O[3]===0&&(O[3]=.2,w=At(At({},w),{fill:Dn(O,"rgba")}));var k=this._createItem(A,v,p,g,r,t,{},w,z,d,a);k.on("click",$(Se,null,v,a,f)).on("mouseover",$(Bt,null,v,a,f)).on("mouseout",$(Et,null,v,a,f)),i.ssr&&k.eachChild(function(H){var Q=te(H);Q.seriesIndex=A.seriesIndex,Q.dataIndex=p,Q.ssrType="legend"}),c.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,u,s)},e.prototype._createSelector=function(t,r,i,a,o){var u=this.getSelectorGroup();kt(t,function(l){var c=l.type,d=new rt({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});u.add(d);var f=r.getModel("selectorLabel"),g=r.getModel(["emphasis","selectorLabel"]);Rn(d,{normal:f,emphasis:g},{defaultText:l.title}),ee(d)})},e.prototype._createItem=function(t,r,i,a,o,u,s,l,c,d,f){var g=t.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),m=o.isSelected(r),y=a.get("symbolRotate"),h=a.get("symbolKeepAspect"),x=a.get("icon");c=x||c||"roundRect";var _=ti(c,a,s,l,g,m,f),S=new ut,C=a.getModel("textStyle");if(it(t.getLegendIcon)&&(!x||x==="inherit"))S.add(t.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:y,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:h}));else{var A=x==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;S.add(ei({itemWidth:p,itemHeight:v,icon:c,iconRotate:A,itemStyle:_.itemStyle,lineStyle:_.lineStyle,symbolKeepAspect:h}))}var T=u==="left"?p+5:-5,D=u,w=o.get("formatter"),z=r;N(w)&&w?z=w.replace("{name}",r??""):it(w)&&(z=w(r));var O=m?C.getTextColor():a.get("inactiveColor");S.add(new rt({style:In(C,{text:z,x:T,y:v/2,fill:O,align:D,verticalAlign:"middle"},{inheritColor:O})}));var k=new nt({shape:S.getBoundingRect(),style:{fill:"transparent"}}),H=a.getModel("tooltip");return H.get("show")&&Re({el:k,componentModel:o,itemName:r,itemTooltipOption:H.option}),S.add(k),S.eachChild(function(Q){Q.silent=!0}),k.silent=!d,this.getContentGroup().add(S),ee(S),S.__legendDataIndex=i,S},e.prototype.layoutInner=function(t,r,i,a,o,u){var s=this.getContentGroup(),l=this.getSelectorGroup();X(t.get("orient"),s,t.get("itemGap"),i.width,i.height);var c=s.getBoundingRect(),d=[-c.x,-c.y];if(l.markRedraw(),s.markRedraw(),o){X("horizontal",l,t.get("selectorItemGap",!0));var f=l.getBoundingRect(),g=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),v=t.getOrient().index,m=v===0?"width":"height",y=v===0?"height":"width",h=v===0?"y":"x";u==="end"?g[v]+=c[m]+p:d[v]+=f[m]+p,g[1-v]+=c[y]/2-f[y]/2,l.x=g[0],l.y=g[1],s.x=d[0],s.y=d[1];var x={x:0,y:0};return x[m]=c[m]+p+f[m],x[y]=Math.max(c[y],f[y]),x[h]=Math.min(0,f[h]+g[1-v]),x}else return s.x=d[0],s.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(zt);function ti(n,e,t,r,i,a,o){function u(m,y){m.lineWidth==="auto"&&(m.lineWidth=y.lineWidth>0?2:0),kt(m,function(h,x){m[x]==="inherit"&&(m[x]=y[x])})}var s=e.getModel("itemStyle"),l=s.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=s.getShallow("decal");l.decal=!d||d==="inherit"?r.decal:On(d,o),l.fill==="inherit"&&(l.fill=r[i]),l.stroke==="inherit"&&(l.stroke=r[c]),l.opacity==="inherit"&&(l.opacity=(i==="fill"?r:t).opacity),u(l,r);var f=e.getModel("lineStyle"),g=f.getLineStyle();if(u(g,t),l.fill==="auto"&&(l.fill=r.fill),l.stroke==="auto"&&(l.stroke=r.fill),g.stroke==="auto"&&(g.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),v=l[c];l.lineWidth=p==="auto"?r.lineWidth>0&&v?2:0:l.lineWidth,l.fill=e.get("inactiveColor"),l.stroke=e.get("inactiveBorderColor"),g.stroke=f.get("inactiveColor"),g.lineWidth=f.get("inactiveWidth")}return{itemStyle:l,lineStyle:g}}function ei(n){var e=n.icon||"roundRect",t=Pn(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function Se(n,e,t,r){Et(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),Bt(n,e,t,r)}function Qe(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function Bt(n,e,t,r){Qe(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function Et(n,e,t,r){Qe(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function ni(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function et(n,e,t){var r={},i=n==="toggleSelected",a;return t.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):n==="allSelect"||n==="inverseSelect"?o[n]():(o[n](e.name),a=o.isSelected(e.name));var u=o.getData();b(u,function(s){var l=s.get("name");if(!(l===`
`||l==="")){var c=o.isSelected(l);r.hasOwnProperty(l)?r[l]=r[l]&&c:r[l]=c}})}),n==="allSelect"||n==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function ri(n){n.registerAction("legendToggleSelect","legendselectchanged",R(et,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",R(et,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",R(et,"inverseSelect")),n.registerAction("legendSelect","legendselected",R(et,"select")),n.registerAction("legendUnSelect","legendunselected",R(et,"unSelect"))}function Je(n){n.registerComponentModel(Mt),n.registerComponentView(qe),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,ni),n.registerSubTypeDefaulter("legend",function(){return"plain"}),ri(n)}var ii=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=Ln(t);n.prototype.init.call(this,t,r,i),Ce(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),Ce(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Mn(Mt.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Mt);function Ce(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,kn(e,t,{type:"box",ignoreSize:!!i})}var Ae=st,bt=["width","height"],St=["x","y"],ai=function(n){I(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Ae),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Ae)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,u,s){var l=this;n.prototype.renderInner.call(this,t,r,i,a,o,u,s);var c=this._controllerGroup,d=r.get("pageIconSize",!0),f=ct(d)?d:[d,d];p("pagePrev",0);var g=r.getModel("pageTextStyle");c.add(new rt({name:"pageText",style:{text:"xx/xx",fill:g.getTextColor(),font:g.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var y=v+"DataIndex",h=De(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:dt(l._pageGo,l,y,r,a)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});h.name=v,c.add(h)}},e.prototype.layoutInner=function(t,r,i,a,o,u){var s=this.getSelectorGroup(),l=t.getOrient().index,c=bt[l],d=St[l],f=bt[1-l],g=St[1-l];o&&X("horizontal",s,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),v=s.getBoundingRect(),m=[-v.x,-v.y],y=E(i);o&&(y[c]=i[c]-v[c]-p);var h=this._layoutContentAndController(t,a,y,l,c,f,g,d);if(o){if(u==="end")m[l]+=h[c]+p;else{var x=v[c]+p;m[l]-=x,h[d]-=x}h[c]+=v[c]+p,m[1-l]+=h[g]+h[f]/2-v[f]/2,h[f]=Math.max(h[f],v[f]),h[g]=Math.min(h[g],v[g]+m[1-l]),s.x=m[0],s.y=m[1],s.markRedraw()}return h},e.prototype._layoutContentAndController=function(t,r,i,a,o,u,s,l){var c=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;X(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),X("horizontal",f,t.get("pageButtonItemGap",!0));var g=c.getBoundingRect(),p=f.getBoundingRect(),v=this._showController=g[o]>i[o],m=[-g.x,-g.y];r||(m[a]=c[l]);var y=[0,0],h=[-p.x,-p.y],x=Bn(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(v){var _=t.get("pageButtonPosition",!0);_==="end"?h[a]+=i[o]-p[o]:y[a]+=p[o]+x}h[1-a]+=g[u]/2-p[u]/2,c.setPosition(m),d.setPosition(y),f.setPosition(h);var S={x:0,y:0};if(S[o]=v?i[o]:g[o],S[u]=Math.max(g[u],p[u]),S[s]=Math.min(0,p[s]+h[1-a]),d.__rectSize=i[o],v){var C={x:0,y:0};C[o]=Math.max(i[o]-p[o]-x,0),C[u]=S[u],d.setClipPath(new nt({shape:C})),d.__rectSize=C[o]}else f.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&En(c,{x:A.contentPosition[0],y:A.contentPosition[1]},v?t:null),this._updatePageInfoView(t,A),S},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;b(["pagePrev","pageNext"],function(c){var d=c+"DataIndex",f=r[d]!=null,g=i.childOfName(c);g&&(g.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),g.cursor=f?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),u=r.pageIndex,s=u!=null?u+1:0,l=r.pageCount;a&&o&&a.setStyle("text",N(o)?o.replace("{current}",s==null?"":s+"").replace("{total}",l==null?"":l+""):o({current:s,total:l}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,u=bt[o],s=St[o],l=this._findTargetItemIndex(r),c=i.children(),d=c[l],f=c.length,g=f?1:0,p={contentPosition:[i.x,i.y],pageCount:g,pageIndex:g-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var v=_(d);p.contentPosition[o]=-v.s;for(var m=l+1,y=v,h=v,x=null;m<=f;++m)x=_(c[m]),(!x&&h.e>y.s+a||x&&!S(x,y.s))&&(h.i>y.i?y=h:y=x,y&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=y.i),++p.pageCount)),h=x;for(var m=l-1,y=v,h=v,x=null;m>=-1;--m)x=_(c[m]),(!x||!S(h,x.s))&&y.i<h.i&&(h=y,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=y.i),++p.pageCount,++p.pageIndex),y=x;return p;function _(C){if(C){var A=C.getBoundingRect(),T=A[s]+C[s];return{s:T,e:T+A[u],i:C.__legendDataIndex}}}function S(C,A){return C.e>=A&&C.s<=A+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,u){var s=o.__legendDataIndex;a==null&&s!=null&&(a=u),s===t&&(r=u)}),r??a},e.type="legend.scroll",e}(qe);function oi(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function si(n){K(Je),n.registerComponentModel(ii),n.registerComponentView(ai),oi(n)}function ui(n){K(Je),K(si)}K(ui);const tn=()=>{const{te:n,t:e}=zn(),t=/[^.]+$/,r=g=>{var p;return((p=t.exec(g))==null?void 0:p[0])??g},i=g=>{const p=r(g),v=`Dashboard.dropped_${p}`;return n(v)?e(v):pt.startCase(p)},a=g=>g.sort((p,v)=>v.value-p.value),o=(g,p)=>{const v=Object.entries(pt.pickBy(g,(m,y)=>p.test(y))).reduce((m,[y,h])=>(m.push({value:h,name:i(y)}),m),[]);return a(v)},u=110,s=(g,p)=>({backgroundColor:"transparent",animation:!1,grid:{left:u+10},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",minInterval:1},yAxis:{type:"category",data:g.map(({name:v})=>v),axisLabel:{width:u,overflow:"break"}},series:[{name:"Messages",type:"bar",data:g.map(({value:v})=>v),itemStyle:p}]}),l=(g,p)=>({backgroundColor:"transparent",animation:!1,tooltip:{trigger:"item",formatter:"{b} {d}%"},legend:{left:"center",bottom:0},series:[{type:"pie",radius:"50%",data:g,itemStyle:p,label:{formatter:"{b} {d}%"}}]}),c=Vn(),d=Vt(()=>c.state.theme==="dark"?"dark":"light");return{getLastKey:r,getTypeName:i,filterMetrics:o,initChart:g=>Gn(g,d.value),getBarChartOptions:s,getPieChartOptions:l}};var Kt=(n=>(n.MessagesDropped="messages.dropped",n.AwaitPubrelTimeout="messages.dropped.await_pubrel_timeout",n.NoSubscribers="messages.dropped.no_subscribers",n.QuotaExceeded="messages.dropped.quota_exceeded",n.ReceiveMaximum="messages.dropped.receive_maximum",n.DeliveryDropped="delivery.dropped",n.Qos0Msg="delivery.dropped.qos0_msg",n.Expired="delivery.dropped.expired",n.QueueFull="delivery.dropped.queue_full",n.NoLocal="delivery.dropped.no_local",n.TooLarge="delivery.dropped.too_large",n))(Kt||{});const gt="#c2c8d1",gi=n=>{const e=new RegExp(`^(${pt.escapeRegExp("messages.dropped")}\\.(.)+)`),{getLastKey:t,getTypeName:r}=tn(),i=new Map([[r("messages.dropped.await_pubrel_timeout")??"","#fdafa6"],[r("messages.dropped.no_subscribers")??"","#bac1cd"],[r("messages.dropped.quota_exceeded")??"","#ffd78e"],[r("messages.dropped.receive_maximum")??"","#7fd7b8"]]),a=Vt(()=>({color:function({name:l}){return n.value===0?gt:i.get(l)??gt}})),{tl:o,te:u}=Le("Dashboard"),s=Object.values(Kt).filter(l=>e.test(l)).map(l=>{const c=t(l),d=`dropped_${c}_desc`;return{key:l,name:r(l),desc:u(d)?o(d):"",impact:o(`dropped_${c}_impact`)}});return{metricsKeyReg:e,itemStyle:a,messageDroppedDesc:s}},di=n=>{const e=new RegExp(`^${pt.escapeRegExp("delivery.dropped")}\\.(.)+`),{getLastKey:t,getTypeName:r}=tn(),i=new Map([[r("delivery.dropped.qos0_msg")??"","#469cf7"],[r("delivery.dropped.expired")??"","#ffd78e"],[r("delivery.dropped.queue_full")??"","#fdafa6"],[r("delivery.dropped.no_local")??"","#c5a3e5"],[r("delivery.dropped.too_large")??"","#7fd7b8"]]),a=Vt(()=>({color:function({name:s}){return n.value===0?gt:i.get(s)??gt}})),{tl:o}=Le("Dashboard"),u=Object.values(Kt).filter(s=>e.test(s)).map(s=>{const l=t(s);return{key:s,name:r(s),impact:o(`dropped_${l}_impact`)}});return{metricsKeyReg:e,itemStyle:a,deliveryDroppedDesc:u}};export{Fn as D,Kt as M,Un as a,qn as b,pi as c,gi as d,di as e,V as g,fi as i,Me as s,tn as u};
