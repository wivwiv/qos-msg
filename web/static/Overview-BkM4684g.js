import{_ as Ca}from"./MarkdownContent.vue_vue_type_style_index_0_lang-oyE4YyGM.js";import{_ as Ia,d as ve,o as Q,c as le,a as C,q as ht,g as ie,A as mt,J as ye,C as ze,h as Un,j as ee,a0 as ys,l as Qe,a1 as ka,M as ct,m as Pe,w as ce,u as S,y as Le,s as _s,r as be,b as W,e as Xn,t as j,a2 as Io,a3 as Ve,z as Pa,a4 as me,F as Te,k as ot,n as Ye,x as Ee,a5 as bs,N as Ta,Q as ti,a6 as $e,a7 as $a,a8 as Me,a9 as wt,aa as nn,ab as zt,ac as Pt,ad as ws,ae as Ra,af as Sn,ag as Ss,ah as xs,ai as As,aj as Oa,D as Ba,ak as Es,al as _e,am as Dt,an as xe,ao as Ns,ap as Ms,R as Ds,W as Cs,p as kn,aq as ko,ar as Ze,B as Is,as as ks,V as Ps,at as Ts,I as $s,f as Rs,au as Os,av as Bs}from"./index-Dp_94g6t.js";import{i as Ke,_ as Oe,e as zs,a as Ge,b as Tt,c as yi,D as za,C as Ls,m as Vs,d as Hs,f as Zn,g as We,h as ni,j as Po,k as Fs,l as Gs,p as _i,L as Ys,B as Us,n as La,P as Xs,o as Zs,u as Ks,q as Va,S as bi,s as Ws,r as qs,t as Qs,v as Js,w as js,x as el,G as Pn,y as Ha,z as Fa,A as To,E as tl,F as $o,H as nl,I as ol,J as il,K as Ro,M as Ga,N as sn,O as pt,Q as xn,R as Ya,T as al,U as rl,V as sl,W as wi,X as $t,Y as ll,Z as Kt,$ as tt,a0 as Ua,a1 as Xa,a2 as De,a3 as ul,a4 as Si,a5 as Tn,a6 as cl,a7 as Za,a8 as Ka,a9 as dl,aa as fl,ab as hl,ac as je,ad as pl,ae as vl,af as gl,ag as ml,ah as An,ai as ln,aj as yl,ak as _l,al as xi,am as bl,an as wl,ao as Sl,ap as xl}from"./pie-Bag65DYr.js";import{S as Al,u as Wa,a as oi}from"./useSyncPolling-EuuWKCYU.js";import{_ as El}from"./InfoTooltip-CtXDYqOe.js";import{D as $n,i as Ai,c as qa,a as Qa,s as ii,b as Ja,g as Nl,u as Ml,d as Dl,M as Ei}from"./useDroppedDetail-ChQoeErR.js";import{d as Cl,r as Il,e as kl,f as Pl,g as Tl}from"./common-7tZUksOK.js";import{u as $l}from"./useOperationConfirm-DftZFsPf.js";import{c as Rl}from"./close-ebScOGTJ.js";import{_ as Ol}from"./CommonOverflowTooltip.vue_vue_type_style_index_0_lang-qVzbqlOC.js";import{u as Bl}from"./useEditionConfigs-BX9wkpw0.js";import{u as zl}from"./useClusterNodes-BxiAU_C5.js";import{u as Ll}from"./useDurationStr-BcUh8ux3.js";import"./http-DdqGSA6b.js";import"./compareVersions-DqEOhma6.js";const Vl=ve({name:"DataAnalysis"}),Hl={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Fl=C("path",{fill:"currentColor",d:"m665.216 768 110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32l110.848-192H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32H665.216zM832 192H192v512h640V192zM352 448a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0v-64a32 32 0 0 1 32-32zm160-64a32 32 0 0 1 32 32v128a32 32 0 0 1-64 0V416a32 32 0 0 1 32-32zm160-64a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V352a32 32 0 0 1 32-32z"},null,-1),Gl=[Fl];function Yl(e,t,n,o,i,a){return Q(),le("svg",Hl,Gl)}var Ul=Ia(Vl,[["render",Yl]]);const Xl=ve({name:"FullScreen"}),Zl={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Kl=C("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),Wl=[Kl];function ql(e,t,n,o,i,a){return Q(),le("svg",Zl,Wl)}var Ni=Ia(Xl,[["render",ql]]);const Ql="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF9SURBVHgB7ZY/T8JAGMafa6uQ+CdlYMAJdgdWR76Agp9A/QI66mCEgcRBI34CN1dY3HF0EgfjZrthDAmNiUZCr+e1Q1OIptd/qST9Lb1e3vfep/fc2xyQkTJEOLJ7XIZsHgKsilCQAahyjca5HlyAXVyaPvKRimjosJZqXhGSUJpkdmMobsN3cXo2s7RvSvdIDb/tv8BQRyAB8Xz5n+uJWZAgqQtQ5ieaY02VTbieP49eyw9vT/Dj25xg+DVCUMhMYUpu+LCOkBiTD9y+3GH46SNk59Kt61qgUOkqSnEbNbeOg81dFPJrwjmOgPZYqzKwPcRAXslhqyTetY4AShFfn3NKK0Xh2KwN0xBgIFUBBD2kKEDnJ77lnVCQADl52QDhFxAvFPeA2UGjYyQuYGO1OMD2RU0kNmvD/yGAMH46Y4XoopGOgNNipc8ffcSELFst0VjXAiqzff7SQxSI/ZdjjZNCRRdPmaP9rlUtCWUW8DJq20gVDJqFioGMReIHnJ5iLv1qfYAAAAAASUVORK5CYII=",Mi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIdSURBVHgB7ZbBaxNBFMa/2awkoJUEa9GCNduTBaHJxaJgMb1Vb57Ei+DVix5FwQiKR+M/IPRgj0XB3oriSfDSHoQVFBOFUtBqVoOQxew+5y1Ed9tOOjGzp+Z3SXYf877vzZvdfcCQvY5QBR5s1IsdG0UYwCJ4t8acNegYuN+sl8JAPJR/z8EgQqCRsahys+A0lAaqzXrRDsVLIjOV74BnZ6gcN2HFo3Zg3UlRnMl3AlyP30gYIFARKSMgpuPXNgzifvuI1a8ucpks5iZmkM+O7LrGmIHVLy6W3q/8vW4HPi6fuLDrOi0Dnv8Ti+4ymn4LZ8anUTk2k4g3fqwnxCMDv32d1MkzoIKTb/zaRLvj48XnN9FWd+H7T94tb1tzerwEHbQMcE8Thj6syF1pReKP3y5FxuLMO7OYOjQJHbRaUJEHyv3+r2oWXHSfR33eKs7t4TbporUDR/ePRlXF4eqb7dY28bmJU+gHLQMMV1Uem1LG/0e8LwPMeecsCrkRY+J9G8jZWVw9eTH6NSHO9P0iymcP4lrpEl6vr+HIgcM925KKga6J+clZmCDZAqJXSJmQ6BlUBgIbNR4ckBKce5+Np0oD1YLjdeTUIm0uyO+mB1NwrpAeydzlrRPREOVUfG/z0xUSVJNjUh6DCPCZIlG9PXp8Yae4+kUkqDqoOMMzphz1aqq41WPhwOJdRI8DrTYAumHkkZTiYUB3MUTBHxj1ug3BP6GsAAAAAElFTkSuQmCC",Jl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHkSURBVHgB7Ze7S8NAHMe/l0ZaxYrFFwg+6qLg4GNQcPA1KYLg5CBi/Q90FHzE16ziLnVyEwXRRbQ4Ozg4uGgjCIIWGqpiq7XnXdXSWNsmMViQfODgfpf75fdN7ve7SwCLHEOSjaX76xVKaDMMcqXcYN9/goK8fAzX96FQLDibLquZzOQjJhufwbthgHA0gp3LQwTDD3F79/IIIw0DWf0EmET4LZIIzrl9DGjyM02AUSwBORegKsPFgHyMLFVw+xTAASs1JRJKuZachByXw8nH5G8RfXhzTmJIUrgpQidbF3spgdLxOa9WNUjhgRC6Zj2Jm7qX4Dn6AhNIbHa6BfRUteOXKIjFJr4M3UvQUdmE1vIGtvGo30QwHMLG+XbCLrYXYbRx0Ld+ujmeImBoVTEsgOMQ7fGmhqbMq8h3gQWTkQFrH/g/Ahw2dU647E5NfuYJYEn5VaK831/XqcnPUBWko7e6Ld70YCWhPgGE7WKUzgsx2kJBxwmBjF+iKQfYme2jLPBMqduXNHzGmnch4PcIIGPU4MesmCEqOzTomijCO+Vyy+mmzZa6vVyIFPTX2l4hERvpovTbEaxHAH9aELobFdhNS9wKNCJ9iPTwfvytEDL3w/GQ5SbsKWAiy3d+wz85Fn/GOysUlMy+T3xPAAAAAElFTkSuQmCC",jl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAL/SURBVHgBxVfPaxNBFP5mN1ilWFP6Q2tRsuIlgpheFD1IKl4EQejRkz/+Ae9a21g9CvbSm1Yv9lb04NXWi6IIbrHQmxuUWrAtiZWChWbH+bZsusludjfb1H6XzGTfvPfNe2/evAH2GAIJ8OiXlatoyHmUlDUbxbu9hokmEZvA2LKVhxAjakUOEukG2srq26yEfH2/23geR28kARoWmpiUEhk0ASFQtKUsRBFpSGC0ZKU1WxsRUt7BDiCleGKn7MJop1FGXAI0rttiRrkzh1ZAwKxocjCIhNh14xEktHo5ur3lxgmlU9tUun28PHiwYt0QEJPYTUg5ONxjzLrTGg9oPGYJUfy9GEuOJ6rGpjvg7ps9ai7KG2t4Oj+Nx59fqPGfUFnacGpKPQEd4hp2CIfI12ksra+EC3o8XSVgA3m0ACQxYU5h5sfHMDFvGVe1vWTl7Ir4gibBuC+tL8NaW8TC6jff9wtHz+CKcTFwrWbLAd4dKU7sSvzY/93cwIclE+9/zjnjMFDGUiSvZ68i3XawjoHjBdMJgUSDy6UO3OXE3BTefv8UadwF84F50Ug+FUcJFzOm3FESMC9IxDjUj6YJ0Piz+RiZHYLBY+d8xlXSl6sEdB2myoNAhBnfn2rDAX2fMy4FnH9+Hzp5GdmuE75vbGD4Wy3FYyvFEupygW5nvF0YHf2OsiPtPehr73YMEHQxi5AX6bYO3D495E++LZSHuzOdHHhDwHYqX5VQSmmcRs735Zwj5RqMAkly543kpZTv3HHK829BVai8O2XGc5eBRygEjPel42fDhQRebQ89eLhatNz7gBl/Su0kjnEm6suFNxg4nMVAbzZUlq3ava6M4c5rToG05U0lMcMxXR4XdPUtFe84YJ/onddcx1v3tBzHrkGO1zepvo6oomOU7RNaDbZk1O37OwD/synVguQpyAWtCYccb2R8i1sE2CmxVUvyMGFSe/u/RAS8RNg12UIVq5CnmZAwVaEpRBneXpIAfJzaGjLea1y3YSZ5nO45/gFhEVSbHAXtmAAAAABJRU5ErkJggg==",eu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKpSURBVHgB7VbPaxNBFH6z2dq0JnFTtVgEuzmptyiC3pL8A4ZcPcV7QSEp6EGag6DgDzyIFw/25jGm4rnruUhzUA+i7B4sNcbQjRZrcDfjbrHJzrzZZrchUGg/yJL55tt5X2bmvReAgw4SSl29pYJsqQxnyQYU7htI+2Y+DV2qsNpYHQoV00vJEAYR64WzaJYlrZzzMJDW6i47T4Vjk7xMgjCgNI24wkMNcdX5NA5O0K8PZ0C0KAFNLLaxUaBvRUrhEdxb11Wee/7pVX5jq81wk2OTxpxAe3vlaQYoy52dUvWiR9uJgllJpkzhJbzbMnRKQYU94tnqS1j//YPhSpeKoIzH+wSluTsnUxo6gsqGrg4T/I/VQcGV8QQbHMB0g7tfkAHJhiwMAb29hriZ2Alm7Gx7vRePF0sgZWAIGO2viEslTrMEpbV+PB6Ez/Nw4Ld/28Ax1gD17ECwSlgrrzqvsanVlS5A4UEda0vc/QcT8o+S4IPBdaB6U0HB3UVFwV+Xs4gjgHWhDMhy4KICtIu1lIi1gQ10BVlBJE0sJhnB+z7aoAYI4EVtn22lohSODXkEI2hAXvR6gVsBIxYUvZM/O5vKu+8fmUUn5KhxpTlX4Rda+qLNrjTeM9z5qRRca+qM1qmAFaGBiA1pIGTBO5mIxiF35jIfS3U+CzxpUZun4OL0OXfN3g46Oa/xGqk/KeVhCHzbbCLuVGyaGVOKs6d/B4jgrAMiYANyoYHIwP8OuGcDQRqQi50O6MX2HRj7CwqVyKJ3orHVUtd+NbJe7vhEsj4bn0Fp9aH12dWpXi5x5KhGgBg7Y0IE/xtht15QKz1xnjdYNb0OVx8vIu1Sedk54CzD+fUKDrvUAUFVsyM+BQh1UDNIcH8DI25Agw2MuAENNjDiBnSIfYV/NTr1d0OaNRcAAAAASUVORK5CYII=",tu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHUSURBVHgB7ZZNSwJRFIbfawMGUVkk9LGoqRYFRbUsKGzRomxRLl3WL2gZVAa1r19Q/QKhlYs24qKWKUQGkaOLDMrUkkBBu82VlJmxwWvNoITPQu716H3Pec+ZD6BJnSF6gYPXmAeUOmAAlNLzPbt4DN4E9lPSUEuBSDCOtNBCZ7a7xKg2YPnp10LB4oGx2Ao6Z1Y4YEL1ZWQXRK0LFQ6YUH2ZfIGcar9TOWBm9WUoXdy1i/7SVlDGhDzWQMgZTIVOyx9+NAqqFhy+xI4oKWZoniAlwR374FZpr2rBt7gDZkKoamtBnflfCWTzOVw/hxF9e+T+jwCDSOfecXLjRSqbKe5Xhucx21d9nrkduIoH4YsEZKFMRYxVrhRnhBMRnmP5HPBJAVzGQ8X1bVLC5qQLNmu7rjijt83OczSfA08fifKaWe29v1CJK+MMsWOg2AIeuBwY6x6BpBgstmaupOR2aMX72nrgHneCF64E5vqncJd8UCVRaolWfGPChVbBCl64h9A95kRXa7tu3GbtkCtfrUm8pgTYweujS9ATVw6mKQkwxM4BLIsLhonXnACDzUPpBsOm/S/ijF/dCdklxnuZVaPuDyO1A580RCwEpiK/kKBJI/EF/SWkEZhdYxIAAAAASUVORK5CYII=";function ja(e,t){if(!e)return!1;for(var n=Ke(e)?e:[e],o=0;o<n.length;o++)if(n[o]&&n[o][t])return!0;return!1}function un(e){Hs(e,"label",["show"])}var cn=Zn(),St=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return t.prototype.init=function(n,o,i){this.mergeDefaultAndTheme(n,i),this._mergeOption(n,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(zs.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},t.prototype.mergeOption=function(n,o){this._mergeOption(n,o,!1,!1)},t.prototype._mergeOption=function(n,o,i,a){var r=this.mainType;i||o.eachSeries(function(s){var l=s.get(this.mainType,!0),u=cn(s)[r];if(!l||!l.data){cn(s)[r]=null;return}u?u._mergeOption(l,o,!0):(a&&un(l),Ge(l.data,function(c){c instanceof Array?(un(c[0]),un(c[1])):un(c)}),u=this.createMarkerModelFromSeries(l,this,o),Tt(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),cn(s)[r]=u},this)},t.prototype.formatTooltip=function(n,o,i){var a=this.getData(),r=this.getRawValue(n),s=a.getName(n);return yi("section",{header:this.name,blocks:[yi("nameValue",{name:s,value:r,noName:!s,noValue:r==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(n){this._data=n},t.prototype.getDataParams=function(n,o){var i=za.prototype.getDataParams.call(this,n,o),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},t.getMarkerModelFromSeries=function(n,o){return cn(n)[o]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ls);Vs(St,za.prototype);var nu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,i){return new t(n,o,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(St);function ou(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function iu(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function dn(e,t,n,o,i,a){var r=[],s=Fs(t,o),l=s?t.getCalculationInfo("stackResultDimension"):o,u=ai(t,l,e),c=t.indicesOfNearest(l,u)[0];r[i]=t.get(n,c),r[a]=t.get(l,c);var d=t.get(o,c),f=Gs(t.get(o,c));return f=Math.min(f,20),f>=0&&(r[a]=+r[a].toFixed(f)),[r,d]}var so={min:We(dn,"min"),max:We(dn,"max"),average:We(dn,"average"),median:We(dn,"median")};function Oo(e,t){if(t){var n=e.getData(),o=e.coordinateSystem,i=o&&o.dimensions;if(!iu(t)&&!Ke(t.coord)&&Ke(i)){var a=er(t,n,o,e);if(t=ni(t),t.type&&so[t.type]&&a.baseAxis&&a.valueAxis){var r=Po(i,a.baseAxis.dim),s=Po(i,a.valueAxis.dim),l=so[t.type](n,a.baseDataDim,a.valueDataDim,r,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!Ke(i))t.coord=[];else for(var u=t.coord,c=0;c<2;c++)so[u[c]]&&(u[c]=ai(n,n.mapDimension(i[c]),u[c]));return t}}function er(e,t,n,o){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=n.getAxis(au(o,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=o.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function au(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}function Bo(e,t){return e&&e.containData&&t.coord&&!ou(t)?e.containData(t.coord):!0}function tr(e,t){return e?function(n,o,i,a){var r=a<2?n.coord&&n.coord[a]:n.value;return _i(r,t[a])}:function(n,o,i,a){return _i(n.value,t[a])}}function ai(e,t,n){if(n==="average"){var o=0,i=0;return e.each(t,function(a,r){isNaN(a)||(o+=a,i++)}),o/i}else return n==="median"?e.getMedian(t):e.getDataExtent(t)[n==="max"?1:0]}var Di=Ys.prototype,lo=Us.prototype,nr=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Oe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(nr);function uo(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var ru=function(e){Oe(t,e);function t(n){var o=e.call(this,n)||this;return o.type="ec-line",o}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new nr},t.prototype.buildPath=function(n,o){uo(o)?Di.buildPath.call(this,n,o):lo.buildPath.call(this,n,o)},t.prototype.pointAt=function(n){return uo(this.shape)?Di.pointAt.call(this,n):lo.pointAt.call(this,n)},t.prototype.tangentAt=function(n){var o=this.shape,i=uo(o)?[o.x2-o.x1,o.y2-o.y1]:lo.tangentAt.call(this,n);return La(i,i)},t}(Xs),co=["fromSymbol","toSymbol"];function Ci(e){return"_"+e+"Type"}function Ii(e,t,n){var o=t.getItemVisual(n,e);if(!o||o==="none")return o;var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=Ha(i),u=Fa(r||0,l);return o+l+u+(a||"")+(s||"")}function ki(e,t,n){var o=t.getItemVisual(n,e);if(!(!o||o==="none")){var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),r=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=Ha(i),u=Fa(r||0,l),c=To(o,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=e,c}}function su(e){var t=new ru({name:"line",subPixelOptimize:!0});return zo(t.shape,e),t}function zo(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var lu=function(e){Oe(t,e);function t(n,o,i){var a=e.call(this)||this;return a._createLine(n,o,i),a}return t.prototype._createLine=function(n,o,i){var a=n.hostModel,r=n.getItemLayout(o),s=su(r);s.shape.percent=0,Zs(s,{shape:{percent:1}},a,o),this.add(s),Ge(co,function(l){var u=ki(l,n,o);this.add(u),this[Ci(l)]=Ii(l,n,o)},this),this._updateCommonStl(n,o,i)},t.prototype.updateData=function(n,o,i){var a=n.hostModel,r=this.childOfName("line"),s=n.getItemLayout(o),l={shape:{}};zo(l.shape,s),Ks(r,l,a,o),Ge(co,function(u){var c=Ii(u,n,o),d=Ci(u);if(this[d]!==c){this.remove(this.childOfName(u));var f=ki(u,n,o);this.add(f)}this[d]=c},this),this._updateCommonStl(n,o,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(n,o,i){var a=n.hostModel,r=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,d=i&&i.emphasisDisabled,f=i&&i.focus,h=i&&i.blurScope;if(!i||n.hasItemOption){var g=n.getItemModel(o),m=g.getModel("emphasis");s=m.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),u=g.getModel(["select","lineStyle"]).getLineStyle(),d=m.get("disabled"),f=m.get("focus"),h=m.get("blurScope"),c=Va(g)}var b=n.getItemVisual(o,"style"),w=b.stroke;r.useStyle(b),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=s,r.ensureState("blur").style=l,r.ensureState("select").style=u,Ge(co,function(R){var D=this.childOfName(R);if(D){D.setColor(w),D.style.opacity=b.opacity;for(var O=0;O<bi.length;O++){var $=bi[O],M=r.getState($);if(M){var _=M.style||{},H=D.ensureState($),K=H.style||(H.style={});_.stroke!=null&&(K[D.__isEmptyBrush?"stroke":"fill"]=_.stroke),_.opacity!=null&&(K.opacity=_.opacity)}}D.markRedraw()}},this);var v=a.getRawValue(o);Ws(this,c,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(R,D){return a.getFormattedLabel(R,D,n.dataType)}},inheritColor:w||"#000",defaultOpacity:b.opacity,defaultText:(v==null?n.getName(o):isFinite(v)?qs(v):v)+""});var I=this.getTextContent();if(I){var y=c.normal;I.__align=I.style.align,I.__verticalAlign=I.style.verticalAlign,I.__position=y.get("position")||"middle";var N=y.get("distance");Ke(N)||(N=[N,N]),I.__labelDistance=N}this.setTextConfig({position:null,local:!0,inside:!1}),Qs(this,f,h,d)},t.prototype.highlight=function(){Js(this)},t.prototype.downplay=function(){js(this)},t.prototype.updateLayout=function(n,o){this.setLinePoints(n.getItemLayout(o))},t.prototype.setLinePoints=function(n){var o=this.childOfName("line");zo(o.shape,n),o.dirty()},t.prototype.beforeUpdate=function(){var n=this,o=n.childOfName("fromSymbol"),i=n.childOfName("toSymbol"),a=n.getTextContent();if(!o&&!i&&(!a||a.ignore))return;for(var r=1,s=this.parent;s;)s.scaleX&&(r/=s.scaleX),s=s.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),f=el([],d,c);La(f,f);function h(M,_){var H=M.__specifiedRotation;if(H==null){var K=l.tangentAt(_);M.attr("rotation",(_===1?-1:1)*Math.PI/2-Math.atan2(K[1],K[0]))}else M.attr("rotation",H)}if(o&&(o.setPosition(c),h(o,0),o.scaleX=o.scaleY=r*u,o.markRedraw()),i&&(i.setPosition(d),h(i,1),i.scaleX=i.scaleY=r*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var g=void 0,m=void 0,b=a.__labelDistance,w=b[0]*r,v=b[1]*r,I=u/2,y=l.tangentAt(I),N=[y[1],-y[0]],R=l.pointAt(I);N[1]>0&&(N[0]=-N[0],N[1]=-N[1]);var D=y[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var O=-Math.atan2(y[1],y[0]);d[0]<c[0]&&(O=Math.PI+O),a.rotation=O}var $=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":$=-v,m="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":$=v,m="top";break;default:$=0,m="middle"}switch(a.__position){case"end":a.x=f[0]*w+d[0],a.y=f[1]*v+d[1],g=f[0]>.8?"left":f[0]<-.8?"right":"center",m=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":a.x=-f[0]*w+c[0],a.y=-f[1]*v+c[1],g=f[0]>.8?"right":f[0]<-.8?"left":"center",m=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=w*D+c[0],a.y=c[1]+$,g=y[0]<0?"right":"left",a.originX=-w*D,a.originY=-$;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=R[0],a.y=R[1]+$,g="center",a.originY=-$;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-w*D+d[0],a.y=d[1]+$,g=y[0]>=0?"right":"left",a.originX=w*D,a.originY=-$;break}a.scaleX=a.scaleY=r,a.setStyle({verticalAlign:a.__verticalAlign||m,align:a.__align||g})}},t}(Pn),uu=function(){function e(t){this.group=new Pn,this._LineCtor=t||lu}return e.prototype.updateData=function(t){var n=this;this._progressiveEls=null;var o=this,i=o.group,a=o._lineData;o._lineData=t,a||i.removeAll();var r=Pi(t);t.diff(a).add(function(s){n._doAdd(t,s,r)}).update(function(s,l){n._doUpdate(a,t,l,s,r)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(n,o){n.updateLayout(t,o)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Pi(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,n){this._progressiveEls=[];function o(s){!s.isGroup&&!cu(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=n.getItemLayout(i);if(fo(a)){var r=new this._LineCtor(n,i,this._seriesScope);r.traverse(o),this.group.add(r),n.setItemGraphicEl(i,r),this._progressiveEls.push(r)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){tl(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,n,o){var i=t.getItemLayout(n);if(fo(i)){var a=new this._LineCtor(t,n,o);t.setItemGraphicEl(n,a),this.group.add(a)}},e.prototype._doUpdate=function(t,n,o,i,a){var r=t.getItemGraphicEl(o);if(!fo(n.getItemLayout(i))){this.group.remove(r);return}r?r.updateData(n,i,a):r=new this._LineCtor(n,i,a),n.setItemGraphicEl(i,r),this.group.add(r)},e}();function cu(e){return e.animators&&e.animators.length>0}function Pi(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:Va(t)}}function Ti(e){return isNaN(e[0])||isNaN(e[1])}function fo(e){return e&&!Ti(e[0])&&!Ti(e[1])}var ho=Zn(),or=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this.markerGroupMap=$o()},t.prototype.render=function(n,o,i){var a=this,r=this.markerGroupMap;r.each(function(s){ho(s).keep=!1}),o.eachSeries(function(s){var l=St.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,o,i)}),r.each(function(s){!ho(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(n){ho(n).keep=!0},t.prototype.toggleBlurSeries=function(n,o){var i=this;Ge(n,function(a){var r=St.getMarkerModelFromSeries(a,i.type);if(r){var s=r.getData();s.eachItemGraphicEl(function(l){l&&(o?nl(l):ol(l))})}})},t.type="marker",t}(il),fn=Zn(),du=function(e,t,n,o){var i=e.getData(),a;if(Ke(o))a=o;else{var r=o.type;if(r==="min"||r==="max"||r==="average"||r==="median"||o.xAxis!=null||o.yAxis!=null){var s=void 0,l=void 0;if(o.yAxis!=null||o.xAxis!=null)s=t.getAxis(o.yAxis!=null?"y":"x"),l=al(o.yAxis,o.xAxis);else{var u=er(o,i,t,e);s=u.valueAxis;var c=rl(i,u.valueDataDim);l=ai(i,c,r)}var d=s.dim==="x"?0:1,f=1-d,h=ni(o),g={coord:[]};h.type=null,h.coord=[],h.coord[f]=-1/0,g.coord[f]=1/0;var m=n.get("precision");m>=0&&sl(l)&&(l=+l.toFixed(Math.min(m,20))),h.coord[d]=g.coord[d]=l,a=[h,g,{type:r,valueIndex:o.valueIndex,value:l}]}else a=[]}var b=[Oo(e,a[0]),Oo(e,a[1]),Tt({},a[2])];return b[2].type=b[2].type||null,wi(b[2],b[0]),wi(b[2],b[1]),b};function Rn(e){return!isNaN(e)&&!isFinite(e)}function $i(e,t,n,o){var i=1-e,a=o.dimensions[e];return Rn(t[i])&&Rn(n[i])&&t[e]===n[e]&&o.getAxis(a).containData(t[e])}function fu(e,t){if(e.type==="cartesian2d"){var n=t[0].coord,o=t[1].coord;if(n&&o&&($i(1,n,o,e)||$i(0,n,o,e)))return!0}return Bo(e,t[0])&&Bo(e,t[1])}function po(e,t,n,o,i){var a=o.coordinateSystem,r=e.getItemModel(t),s,l=$t(r.get("x"),i.getWidth()),u=$t(r.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(o.getMarkerPosition)s=o.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,d=e.get(c[0],t),f=e.get(c[1],t);s=a.dataToPoint([d,f])}if(ll(a,"cartesian2d")){var h=a.getAxis("x"),g=a.getAxis("y"),c=a.dimensions;Rn(e.get(c[0],t))?s[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):Rn(e.get(c[1],t))&&(s[1]=g.toGlobalCoord(g.getExtent()[n?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var hu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,i){o.eachSeries(function(a){var r=St.getMarkerModelFromSeries(a,"markLine");if(r){var s=r.getData(),l=fn(r).from,u=fn(r).to;l.each(function(c){po(l,c,!0,a,i),po(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(n,o,i,a){var r=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new uu);this.group.add(c.group);var d=pu(r,n,o),f=d.from,h=d.to,g=d.line;fn(o).from=f,fn(o).to=h,o.setData(g);var m=o.get("symbol"),b=o.get("symbolSize"),w=o.get("symbolRotate"),v=o.get("symbolOffset");Ke(m)||(m=[m,m]),Ke(b)||(b=[b,b]),Ke(w)||(w=[w,w]),Ke(v)||(v=[v,v]),d.from.each(function(y){I(f,y,!0),I(h,y,!1)}),g.each(function(y){var N=g.getItemModel(y).getModel("lineStyle").getLineStyle();g.setItemLayout(y,[f.getItemLayout(y),h.getItemLayout(y)]),N.stroke==null&&(N.stroke=f.getItemVisual(y,"style").fill),g.setItemVisual(y,{fromSymbolKeepAspect:f.getItemVisual(y,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(y,"symbolOffset"),fromSymbolRotate:f.getItemVisual(y,"symbolRotate"),fromSymbolSize:f.getItemVisual(y,"symbolSize"),fromSymbol:f.getItemVisual(y,"symbol"),toSymbolKeepAspect:h.getItemVisual(y,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(y,"symbolOffset"),toSymbolRotate:h.getItemVisual(y,"symbolRotate"),toSymbolSize:h.getItemVisual(y,"symbolSize"),toSymbol:h.getItemVisual(y,"symbol"),style:N})}),c.updateData(g),d.line.eachItemGraphicEl(function(y){Ro(y).dataModel=o,y.traverse(function(N){Ro(N).dataModel=o})});function I(y,N,R){var D=y.getItemModel(N);po(y,N,R,n,a);var O=D.getModel("itemStyle").getItemStyle();O.fill==null&&(O.fill=Ga(l,"color")),y.setItemVisual(N,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:sn(D.get("symbolOffset",!0),v[R?0:1]),symbolRotate:sn(D.get("symbolRotate",!0),w[R?0:1]),symbolSize:sn(D.get("symbolSize"),b[R?0:1]),symbol:sn(D.get("symbol",!0),m[R?0:1]),style:O})}this.markKeep(c),c.group.silent=o.get("silent")||n.get("silent")},t.type="markLine",t}(or);function pu(e,t,n){var o;e?o=pt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return Tt(Tt({},c),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var i=new xn(o,n),a=new xn(o,n),r=new xn([],n),s=pt(n.get("data"),We(du,t,e,n));e&&(s=Ya(s,We(fu,e)));var l=tr(!!e,o);return i.initData(pt(s,function(u){return u[0]}),null,l),a.initData(pt(s,function(u){return u[1]}),null,l),r.initData(pt(s,function(u){return u[2]})),r.hasItemOption=!0,{from:i,to:a,line:r}}function vu(e){e.registerComponentModel(nu),e.registerComponentView(hu),e.registerPreprocessor(function(t){ja(t.series,"markLine")&&(t.markLine=t.markLine||{})})}Kt(vu);var gu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,o,i){return new t(n,o,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(St);function Ri(e,t,n){var o=t.coordinateSystem;e.each(function(i){var a=e.getItemModel(i),r,s=$t(a.get("x"),n.getWidth()),l=$t(a.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(l))r=[s,l];else if(t.getMarkerPosition)r=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(o){var u=e.get(o.dimensions[0],i),c=e.get(o.dimensions[1],i);r=o.dataToPoint([u,c])}isNaN(s)||(r[0]=s),isNaN(l)||(r[1]=l),e.setItemLayout(i,r)})}var mu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,o,i){o.eachSeries(function(a){var r=St.getMarkerModelFromSeries(a,"markPoint");r&&(Ri(r.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(n,o,i,a){var r=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Al),d=yu(r,n,o);o.setData(d),Ri(o.getData(),n,a),d.each(function(f){var h=d.getItemModel(f),g=h.getShallow("symbol"),m=h.getShallow("symbolSize"),b=h.getShallow("symbolRotate"),w=h.getShallow("symbolOffset"),v=h.getShallow("symbolKeepAspect");if(tt(g)||tt(m)||tt(b)||tt(w)){var I=o.getRawValue(f),y=o.getDataParams(f);tt(g)&&(g=g(I,y)),tt(m)&&(m=m(I,y)),tt(b)&&(b=b(I,y)),tt(w)&&(w=w(I,y))}var N=h.getModel("itemStyle").getItemStyle(),R=Ga(l,"color");N.fill||(N.fill=R),d.setItemVisual(f,{symbol:g,symbolSize:m,symbolRotate:b,symbolOffset:w,symbolKeepAspect:v,style:N})}),c.updateData(d),this.group.add(c.group),d.eachItemGraphicEl(function(f){f.traverse(function(h){Ro(h).dataModel=o})}),this.markKeep(c),c.group.silent=o.get("silent")||n.get("silent")},t.type="markPoint",t}(or);function yu(e,t,n){var o;e?o=pt(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return Tt(Tt({},l),{name:s,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var i=new xn(o,n),a=pt(n.get("data"),We(Oo,t));e&&(a=Ya(a,We(Bo,e)));var r=tr(!!e,o);return i.initData(a,null,r),i}function _u(e){e.registerComponentModel(gu),e.registerComponentView(mu),e.registerPreprocessor(function(t){ja(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}Kt(_u);const bu=ve({name:"RateChart"}),hn=ve({...bu,props:{value:{type:Object,default:()=>({x:[],y:[]}),required:!1},color:{type:String,default:"#975fe4"},type:{type:String,default:"line"}},setup(e){const t=Un(),{tl:n}=ht("Base"),o=(f,h)=>{const g=document.createElement("div");return g.className="rate-chart-tooltip",h===void 0?g.innerHTML=`<p class="no-data">${n("noData")}</p>`:g.innerHTML=`
    <p class="x-value">${f}</p>
    <div class="tooltip-body">
      <i class="badge"></i>
      <p class="num">${h}</p>
    </div>`,g},i=e,a=ie();let r=null;const s=mt({color:[i.color],grid:{left:0,top:0,right:0,bottom:0},tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"none"},formatter:f=>{if(!f[0])return"";const{axisValue:h,value:g}=f[0];return o(h,g)}},xAxis:{type:"category",data:i.value.x,triggerEvent:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},series:[]});ye(()=>JSON.stringify(i.value),()=>{c()}),ye(()=>t.state.leftBarCollapse,()=>{setTimeout(c,500)});const{addListener:l,removeListener:u}=Wa(),c=async()=>{const{color:f,type:h}=i;s.series=[{data:i.value.y,smooth:!0,type:h,symbolSize:0,lineStyle:{color:f},label:{show:!1}}],r==null||r.setOption({...s})},d=async()=>{r&&(u(),r.dispose());const f=a.value;f&&(r=Ua(f),l(r))};return ze(()=>{d(),c()}),(f,h)=>(Q(),le("div",{ref_key:"chartEl",ref:a,class:"rate-chart"},null,512))}});var wu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.inside",t.defaultOption=Xa($n.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}($n),Su=function(e){Oe(t,e);function t(n){var o=e.call(this)||this;o._zr=n;var i=De(o._mousedownHandler,o),a=De(o._mousemoveHandler,o),r=De(o._mouseupHandler,o),s=De(o._mousewheelHandler,o),l=De(o._pinchHandler,o);return o.enable=function(u,c){this.disable(),this._opt=ul(ni(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",r)),(u===!0||u==="scale"||u==="zoom")&&(n.on("mousewheel",s),n.on("pinch",l))},o.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",r),n.off("mousewheel",s),n.off("pinch",l)},o}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(n){this.pointerChecker=n},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(n){if(!Si(n)){for(var o=n.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!En("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||Ai(this._zr,"globalPan"))){var o=n.offsetX,i=n.offsetY,a=this._x,r=this._y,s=o-a,l=i-r;this._x=o,this._y=i,this._opt.preventDefaultMouseMove&&Tn(n.event),ir(this,"pan","moveOnMouseMove",n,{dx:s,dy:l,oldX:a,oldY:r,newX:o,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(n){Si(n)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(n){var o=En("zoomOnMouseWheel",n,this._opt),i=En("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,r=Math.abs(a),s=n.offsetX,l=n.offsetY;if(!(a===0||!o&&!i)){if(o){var u=r>3?1.4:r>1?1.2:1.1,c=a>0?u:1/u;vo(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),f=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);vo(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(n){if(!Ai(this._zr,"globalPan")){var o=n.pinchScale>1?1.1:1/1.1;vo(this,"zoom",null,n,{scale:o,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},t}(cl);function vo(e,t,n,o,i){e.pointerChecker&&e.pointerChecker(o,i.originX,i.originY)&&(Tn(o.event),ir(e,t,n,o,i))}function ir(e,t,n,o,i){i.isAvailableBehavior=De(En,null,n,o),e.trigger(t,i)}function En(e,t,n){var o=n[e];return!e||o&&(!Za(o)||t.event[o+"Key"])}var ri=Zn();function xu(e,t,n){ri(e).coordSysRecordMap.each(function(o){var i=o.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)})}function Au(e,t){for(var n=ri(e).coordSysRecordMap,o=n.keys(),i=0;i<o.length;i++){var a=o[i],r=n.get(a),s=r.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||ar(n,r))}}}function ar(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function Eu(e,t){var n={model:t,containsPoint:We(Mu,t),dispatchAction:We(Nu,e),dataZoomInfoMap:null,controller:null},o=n.controller=new Su(e.getZr());return Ge(["pan","zoom","scrollMove"],function(i){o.on(i,function(a){var r=[];n.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!s.model.get("disabled",!0)&&u&&r.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),r.length&&n.dispatchAction(r)})}),n}function Nu(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Mu(e,t,n,o){return e.coordinateSystem.containPoint([n,o])}function Du(e){var t,n="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each(function(a){var r=a.model,s=r.get("disabled",!0)?!1:r.get("zoomLock",!0)?"move":!0;o[n+s]>o[n+t]&&(t=s),i=i&&r.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Cu(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,n){var o=ri(n),i=o.coordSysRecordMap||(o.coordSysRecordMap=$o());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var r=qa(a);Ge(r.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,Eu(n,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=$o());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var r=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){ar(i,a);return}var c=Du(l);r.enable(c.controlType,c.opt),r.setPointerChecker(a.containsPoint),Ka(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var Iu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return t.prototype.render=function(n,o,i){if(e.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),xu(i,n,{pan:De(go.pan,this),zoom:De(go.zoom,this),scrollMove:De(go.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Au(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Qa),go={zoom:function(e,t,n,o){var i=this.range,a=i.slice(),r=e.axisModels[0];if(r){var s=mo[t](null,[o.originX,o.originY],r,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/o.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(ii(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Oi(function(e,t,n,o,i,a){var r=mo[o]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return r.signal*(e[1]-e[0])*r.pixel/r.pixelLength}),scrollMove:Oi(function(e,t,n,o,i,a){var r=mo[o]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n);return r.signal*(e[1]-e[0])*a.scrollDelta})};function Oi(e){return function(t,n,o,i){var a=this.range,r=a.slice(),s=t.axisModels[0];if(s){var l=e(r,s,t,n,o,i);if(ii(l,r,[0,100],"all"),this.range=r,a[0]!==r[0]||a[1]!==r[1])return r}}}var mo={grid:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,n,o,i){var a=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),n.mainType==="radiusAxis"?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=u[1]-u[0],r.pixelStart=u[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,n,o,i){var a=n.axis,r=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}};function ku(e){Ja(e),e.registerComponentModel(wu),e.registerComponentView(Iu),Cu(e)}var Pu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Xa($n.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}($n),Lt=An,Bi=7,Tu=1,yo=30,$u=7,Vt="horizontal",zi="vertical",Ru=5,Ou=["line","bar","candlestick","scatter"],Bu={easing:"cubicOut",duration:100,delay:0},zu=function(e){Oe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return t.prototype.init=function(n,o){this.api=o,this._onBrush=De(this._onBrush,this),this._onBrushEnd=De(this._onBrushEnd,this)},t.prototype.render=function(n,o,i,a){if(e.prototype.render.apply(this,arguments),Ka(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){dl(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Pn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(o),this._positionGroup()},t.prototype._resetLocation=function(){var n=this.dataZoomModel,o=this.api,i=n.get("brushSelect"),a=i?$u:0,r=this._findCoordRect(),s={width:o.getWidth(),height:o.getHeight()},l=this._orient===Vt?{right:s.width-r.x-r.width,top:s.height-yo-Bi-a,width:r.width,height:yo}:{right:Bi,top:r.y,width:yo,height:r.height},u=fl(n.option);Ge(["right","top","width","height"],function(d){u[d]==="ph"&&(u[d]=l[d])});var c=hl(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===zi&&this._size.reverse()},t.prototype._positionGroup=function(){var n=this.group,o=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),r=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===Vt&&!r?{scaleY:l?1:-1,scaleX:1}:i===Vt&&r?{scaleY:l?1:-1,scaleX:-1}:i===zi&&!r?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=n.getBoundingRect([s]);n.x=o.x-u.x,n.y=o.y-u.y,n.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var n=this.dataZoomModel,o=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new Lt({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var r=new Lt({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:De(this._onClickPanel,this)}),s=this.api.getZr();a?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(r)},t.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var o=this._size,i=this._shadowSize||[],a=n.series,r=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&r.getDimensionInfo(s)?a.getShadowDim():n.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(r!==this._shadowData||l!==this._shadowDim||o[0]!==i[0]||o[1]!==i[1]){var d=r.getDataExtent(l),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var h=[0,o[1]],g=[0,o[0]],m=[[o[0],0],[0,0]],b=[],w=g[1]/(r.count()-1),v=0,I=Math.round(r.count()/o[0]),y;r.each([l],function($,M){if(I>0&&M%I){v+=w;return}var _=$==null||isNaN($)||$==="",H=_?0:je($,d,h,!0);_&&!y&&M?(m.push([m[m.length-1][0],0]),b.push([b[b.length-1][0],0])):!_&&y&&(m.push([v,0]),b.push([v,0])),m.push([v,H]),b.push([v,H]),v+=w,y=_}),u=this._shadowPolygonPts=m,c=this._shadowPolylinePts=b}this._shadowData=r,this._shadowDim=l,this._shadowSize=[o[0],o[1]];var N=this.dataZoomModel;function R($){var M=N.getModel($?"selectedDataBackground":"dataBackground"),_=new Pn,H=new wl({shape:{points:u},segmentIgnoreThreshold:1,style:M.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),K=new Sl({shape:{points:c},segmentIgnoreThreshold:1,style:M.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return _.add(H),_.add(K),_}for(var D=0;D<3;D++){var O=R(D===1);this._displayables.sliderGroup.add(O),this._displayables.dataShadowSegs.push(O)}},t.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,o=n.get("showDataShadow");if(o!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(r,s){var l=n.getAxisProxy(r,s).getTargetSeriesModels();Ge(l,function(u){if(!i&&!(o!==!0&&Po(Ou,u.get("type"))<0)){var c=a.getComponent(Nl(r),s).axis,d=Lu(r),f,h=u.coordinateSystem;d!=null&&h.getOtherAxis&&(f=h.getOtherAxis(c).inverse),d=u.getData().mapDimension(d),i={thisAxis:c,series:u,thisDim:r,otherDim:d,otherAxisInverse:f}}},this)},this),i}},t.prototype._renderHandle=function(){var n=this.group,o=this._displayables,i=o.handles=[null,null],a=o.handleLabels=[null,null],r=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,d=l.get("brushSelect"),f=o.filler=new Lt({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});r.add(f),r.add(new Lt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Tu,fill:"rgba(0,0,0,0)"}})),Ge([0,1],function(I){var y=l.get("handleIcon");!pl[y]&&y.indexOf("path://")<0&&y.indexOf("image://")<0&&(y="path://"+y);var N=To(y,-1,0,2,2,null,!0);N.attr({cursor:Li(this._orient),draggable:!0,drift:De(this._onDragMove,this,I),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1),z2:5});var R=N.getBoundingRect(),D=l.get("handleSize");this._handleHeight=$t(D,this._size[1]),this._handleWidth=R.width/R.height*this._handleHeight,N.setStyle(l.getModel("handleStyle").getItemStyle()),N.style.strokeNoScale=!0,N.rectHover=!0,N.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),vl(N);var O=l.get("handleColor");O!=null&&(N.style.fill=O),r.add(i[I]=N);var $=l.getModel("textStyle");n.add(a[I]=new gl({silent:!0,invisible:!0,style:ml($,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:$.getTextColor(),font:$.getFont()}),z2:10}))},this);var h=f;if(d){var g=$t(l.get("moveHandleSize"),s[1]),m=o.moveHandle=new An({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:g}}),b=g*.8,w=o.moveHandleIcon=To(l.get("moveHandleIcon"),-b/2,-b/2,b,b,"#fff",!0);w.silent=!0,w.y=s[1]+g/2-.5,m.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(s[1]/2,Math.max(g,10));h=o.moveZone=new An({invisible:!0,shape:{y:s[1]-v,height:g+v}}),h.on("mouseover",function(){u.enterEmphasis(m)}).on("mouseout",function(){u.leaveEmphasis(m)}),r.add(m),r.add(w),r.add(h)}h.attr({draggable:!0,cursor:Li(this._orient),drift:De(this._onDragMove,this,"all"),ondragstart:De(this._showDataInfo,this,!0),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[je(n[0],[0,100],o,!0),je(n[1],[0,100],o,!0)]},t.prototype._updateInterval=function(n,o){var i=this.dataZoomModel,a=this._handleEnds,r=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];ii(o,a,r,i.get("zoomLock")?"all":n,s.minSpan!=null?je(s.minSpan,l,r,!0):null,s.maxSpan!=null?je(s.maxSpan,l,r,!0):null);var u=this._range,c=this._range=ln([je(a[0],r,l,!0),je(a[1],r,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},t.prototype._updateView=function(n){var o=this._displayables,i=this._handleEnds,a=ln(i.slice()),r=this._size;Ge([0,1],function(h){var g=o.handles[h],m=this._handleHeight;g.attr({scaleX:m/2,scaleY:m/2,x:i[h]+(h?-1:1),y:r[1]/2-m/2})},this),o.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:r[1]});var s={x:a[0],width:a[1]-a[0]};o.moveHandle&&(o.moveHandle.setShape(s),o.moveZone.setShape(s),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=o.dataShadowSegs,u=[0,a[0],a[1],r[0]],c=0;c<l.length;c++){var d=l[c],f=d.getClipPath();f||(f=new An,d.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:r[1]})}this._updateDataInfo(n)},t.prototype._updateDataInfo=function(n){var o=this.dataZoomModel,i=this._displayables,a=i.handleLabels,r=this._orient,s=["",""];if(o.get("showDetail")){var l=o.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,d=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],u),this._formatLabel(d[1],u)]}}var f=ln(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(g){var m=yl(i.handles[g].parent,this.group),b=_l(g===0?"right":"left",m),w=this._handleWidth/2+Ru,v=xi([f[g]+(g===0?-w:w),this._size[1]/2],m);a[g].setStyle({x:v[0],y:v[1],verticalAlign:r===Vt?"middle":b,align:r===Vt?b:"center",text:s[g]})}},t.prototype._formatLabel=function(n,o){var i=this.dataZoomModel,a=i.get("labelFormatter"),r=i.get("labelPrecision");(r==null||r==="auto")&&(r=o.getPixelPrecision());var s=n==null||isNaN(n)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(r,20));return tt(a)?a(n,s):Za(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(n){n=this._dragging||n;var o=this._displayables,i=o.handleLabels;i[0].attr("invisible",!n),i[1].attr("invisible",!n),o.moveHandle&&this.api[n?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},t.prototype._onDragMove=function(n,o,i,a){this._dragging=!0,Tn(a.event);var r=this._displayables.sliderGroup.getLocalTransform(),s=xi([o,i],r,!0),l=this._updateInterval(n,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(n){var o=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>o[0]||i[1]<0||i[1]>o[1])){var a=this._handleEnds,r=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-r);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(n){var o=n.offsetX,i=n.offsetY;this._brushStart=new bl(o,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(n){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var i=o.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var r=this._getViewExtent(),s=[0,100];this._range=ln([je(i.x,r,s,!0),je(i.x+i.width,r,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(n){this._brushing&&(Tn(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},t.prototype._updateBrushRect=function(n,o){var i=this._displayables,a=this.dataZoomModel,r=i.brushRect;r||(r=i.brushRect=new Lt({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(r)),r.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(n,o),c=l.transformCoordToLocal(s.x,s.y),d=this._size;u[0]=Math.max(Math.min(d[0],u[0]),0),r.setShape({x:c[0],y:0,width:u[0]-c[0],height:d[1]})},t.prototype._dispatchZoomAction=function(n){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?Bu:null,start:o[0],end:o[1]})},t.prototype._findCoordRect=function(){var n,o=qa(this.dataZoomModel).infoList;if(!n&&o.length){var i=o[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),r=this.api.getHeight();n={x:a*.2,y:r*.2,width:a*.6,height:r*.6}}return n},t.type="dataZoom.slider",t}(Qa);function Lu(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function Li(e){return e==="vertical"?"ns-resize":"ew-resize"}function Vu(e){e.registerComponentModel(Pu),e.registerComponentView(zu),Ja(e)}function Hu(e){Kt(ku),Kt(Vu)}Kt(Hu);const Fu=["id"],Gu=ve({name:"PolylineChart"}),_o=ve({...Gu,props:{chartId:{type:String,required:!0},yTitle:{type:Array,default:()=>[""]},chartColors:{type:Array,default:()=>[]},chartData:{type:Array,default:()=>[{xData:[],yData:[]}]},height:{type:String,default:"190px"},isInstantaneousValue:{type:Boolean},unitTextKey:{type:[String,Array]},showFullScreen:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,o=Un(),i=ee(()=>o.state.theme),a={colorAxisLine:"#757575",colorAxisLabel:"#757575"},r=ie([]),s=ys(void 0),{addListener:l}=Wa();t({chart:s}),ye(()=>n.chartData,()=>{I()}),ze(()=>{I()});const u=-1;let c={};const d=(y,N,R)=>{y.forEach((D,O)=>{D===u&&(c[R]||(c[R]=[]),c[R].push(N[O]))})},f=y=>y.map(N=>N===u?0:N),h=()=>{r.value=[],c={};for(let y=0;y<n.yTitle.length;y+=1){const N=y%6===0&&y!==0?n.chartColors[6]:n.chartColors[y%6];d(n.chartData[y].yData,n.chartData[y].xData,n.yTitle[y]),r.value.push({name:n.yTitle[y],type:"line",smooth:!0,symbolSize:5,showSymbol:!1,data:f(n.chartData[y].yData),step:!1,lineStyle:{width:2},areaStyle:{color:new xl(0,0,0,1,[{offset:0,color:N},{offset:1,color:`${N}00`}]),opacity:.2}})}},g=(y,N="YYYY/MM/DD HH:mm")=>ka(parseInt(y)).format(N),m=(y,N,R)=>{const D=document.createElement("div");return D.className="tooltip-data-item",D.innerHTML=`
  <div>
    <i class="badge" style="background-color:${N}"></i>
    <span>${y}</span>
  </div>
  ${ct.isUndefined(R)?"":`<p class="num">${R}</p>`}`,D},b=(y,N)=>{const R=document.createElement("div");return R.innerHTML=`
  <div class="polyline-chart-tooltip">
    <p class="x-value">${g(y,"MM/DD HH:mm:ss")}</p>
    <div class="tooltip-body">
      ${N.map(D=>D.outerHTML).join("")}
    </div>
  </div>
  `,R},{t:w}=ht("Dashboard"),v=y=>{var R,D;const N=((D=(R=n.chartData)==null?void 0:R[0])==null?void 0:D.xData)||[];if(y===0&&!ct.isUndefined(N[0])&&!ct.isUndefined(N[1]))return N[1]-N[0];if(!ct.isUndefined(N[y])&&!ct.isUndefined(N[y-1]))return N[y]-N[y-1]},I=()=>{var R;h();const y=document.getElementById(n.chartId);s.value||(s.value=Ua(y,i.value==="dark"?"dark":"light"),l(s.value));const N={backgroundColor:"transparent",color:n.chartColors,grid:{top:"5%",right:30,bottom:"3%",left:24,containLabel:!0},legend:n.yTitle.length>1?{top:4,data:n.yTitle}:void 0,toolbox:{feature:{saveAsImage:{show:n.showFullScreen,title:"",name:"emqx-dashboard",emphasis:{iconStyle:{borderColor:"#044cb9"}}},dataZoom:{show:n.showFullScreen,yAxisIndex:!1,title:"",emphasis:{iconStyle:{borderColor:"#044cb9"}}}}},tooltip:{trigger:"axis",confine:!0,axisPointer:{type:"cross",label:{show:n.showFullScreen,formatter(D){const{value:O,axisDimension:$}=D;return $==="x"?`${g(O,"MM/DD")} ${g(O,"HH:mm")}`.trim():$==="y"?`${Math.round(O)}`.trim():""}}},formatter:D=>{if(!D[0])return"";const O=D.reduce(($,{axisValue:M,color:_,seriesName:H,seriesIndex:K,value:A,dataIndex:T})=>{var z;let k=A;const B=(z=c[H])==null?void 0:z.includes(M);if(B&&(k="NaN"),!n.unitTextKey)$.push(m(H,_,k));else{let V="";const G=v(T),U=Array.isArray(n.unitTextKey)?n.unitTextKey[K]:n.unitTextKey;!n.isInstantaneousValue&&G?V=w(U,{interval:G/1e3,n:A}):V=B?w(U,{n:0}):w(U,{n:A}),$.push(m(V,_))}return $},[]);return b(D[0].axisValue,O)}},dataZoom:n.showFullScreen?[{type:"inside"},{type:"slider",showDetail:!1}]:void 0,xAxis:{type:"category",boundaryGap:!1,data:n.chartData[0].xData,axisLine:{lineStyle:{color:a.colorAxisLine}},axisLabel:{hideOverlap:!0,showMinLabel:!0,color:a.colorAxisLabel,formatter(D){return`${g(D,"MM/DD")} ${g(D,"HH:mm")}`}},splitLine:{show:n.showFullScreen}},yAxis:{type:"value",axisLine:{lineStyle:{color:a.colorAxisLine}},splitLine:{show:n.showFullScreen},axisLabel:{color:a.colorAxisLabel},minInterval:1},series:r.value};(R=s.value)==null||R.setOption(N)};return(y,N)=>(Q(),le("div",{id:e.chartId,style:Qe({height:e.height,width:"100%"})},null,12,Fu))}}),Yu={class:"info-bar space-between"},Uu={class:"block-title"},Xu={key:0,class:"chart-wrapper"},Zu=["id"],Ku={key:1,class:"chart-wrapper"},Wu=["id"],qu={class:"dropped-desc"},Qu={class:"dropped-desc-hd"},Ju=ve({__name:"DroppedDetailDialog",props:{modelValue:{type:Boolean},metrics:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,i=ee({get:()=>n.modelValue,set:M=>{o("update:modelValue",M)}}),{t:a,tl:r}=ht("Dashboard"),{filterMetrics:s,initChart:l,getBarChartOptions:u,getPieChartOptions:c}=Ml(),d=ee(()=>n.metrics[Ei.MessagesDropped]),{metricsKeyReg:f,itemStyle:h,messageDroppedDesc:g}=Dl(d),m=ee(()=>s(n.metrics,f)),b=ie("bar"),w=ie(),v=()=>u(m.value,h.value),I=()=>{l(w.value).setOption(v())},y=ie(),N=()=>c(m.value,h.value),R=()=>{l(y.value).setOption(N())},D=async()=>{await Ve(),b.value==="bar"?I():R()};ye(i,M=>{M?D():b.value="bar"});const O=_s(),$=()=>O.push({name:"dropped-analysis"});return(M,_)=>{const H=be("el-switch"),K=be("el-table-column"),A=Ca,T=be("el-table"),k=be("el-button"),B=be("el-dialog");return Q(),Pe(B,{modelValue:S(i),"onUpdate:modelValue":_[1]||(_[1]=z=>Le(i)?i.value=z:null),width:"800px",top:"52px",class:"dropped-detail-dialog"},{footer:ce(()=>[W(k,{onClick:$},{default:ce(()=>[Xn(j(S(r)("viewDetailAnalysis")),1)]),_:1})]),default:ce(()=>[C("div",Yu,[C("div",Uu,[C("label",null,j(S(r)("totalDroppedMessages"))+": ",1),C("span",null,j(M.metrics[("MetricKey"in M?M.MetricKey:S(Ei)).MessagesDropped]),1)]),C("div",null,[C("span",null,j(S(r)("bar")),1),W(H,{modelValue:S(b),"onUpdate:modelValue":_[0]||(_[0]=z=>Le(b)?b.value=z:null),"inactive-value":"bar","active-value":"pie",onChange:D},null,8,["modelValue","inactive-value","active-value"]),C("span",null,j(S(r)("pie")),1)])]),S(b)==="bar"?(Q(),le("div",Xu,[C("div",{class:"chart",ref_key:"BarChartEle",ref:w,id:("createRandomString"in M?M.createRandomString:S(Io))()},null,8,Zu)])):(Q(),le("div",Ku,[C("div",{class:"chart",ref_key:"PieChartEle",ref:y,id:("createRandomString"in M?M.createRandomString:S(Io))()},null,8,Wu)])),C("div",qu,[C("div",Qu,j(S(r)("dropReasonsTitle")),1),W(T,{data:S(g)},{default:ce(()=>[W(K,{prop:"name",label:S(a)("Clients.reason")},null,8,["label"]),W(K,{prop:"desc",label:S(a)("Base.description")},null,8,["label"]),W(K,{prop:"impact",label:S(r)("causeAnalysis")},{default:ce(({row:z})=>[W(A,{content:z.impact},null,8,["content"])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1},8,["modelValue"])}}}),ju={class:"polyline-cards"},ec={class:"chart-option"},tc={class:"block"},nc={class:"card-title"},oc={class:"icons-container"},ic={class:"block"},ac={class:"card-title"},rc={class:"icons-container"},sc={class:"full-screen-header"},lc=["id"],uc=ve({name:"PolylineCards"}),cc=ve({...uc,setup(e){const{t:n}=Pa(),{tl:o}=ht("Dashboard"),i=ie(3600),a=ie(!1),r=ie(!1),s=ie(null),l=[{label:o("lastHour"),value:3600},{label:o("last6Hours"),value:21600},{label:o("last12Hours"),value:43200},{label:o("lastDay"),value:86400},{label:o("last3Days"),value:259200},{label:o("last7Days"),value:604800}];ye(i,()=>{K()});const u=Y=>Array.from({length:Y},()=>({xData:[],yData:[]})),c=mt({[me.Received]:n("Dashboard.messageIn"),[me.Sent]:n("Dashboard.messageOut"),[me.Dropped]:n("Dashboard.messageDrop")}),d=mt({[me.Connections]:n("Dashboard.currentConnection"),[me.Topics]:n("Dashboard.topics"),[me.Subscriptions]:n("Dashboard.Subscription")}),f={[me.Received]:"Dashboard.messagesUnit",[me.Sent]:"Dashboard.messagesUnit",[me.Dropped]:"Dashboard.messagesUnit",[me.Connections]:"Dashboard.connectionsUnit",[me.LiveConnections]:"Dashboard.liveConnectionsUnit",[me.Topics]:"Dashboard.topicsUnit",[me.Subscriptions]:"Dashboard.subscriptionsUnit"},h=mt({[me.Connections]:u(1),[me.LiveConnections]:u(1),[me.Topics]:u(1),[me.Subscriptions]:u(1),[me.Received]:u(1),[me.Sent]:u(1),[me.Dropped]:u(1),[me.SentBytes]:u(1),[me.ReceivedBytes]:u(1)}),g=mt([me.Dropped,me.Connections,me.LiveConnections,me.Topics,me.Subscriptions,me.Sent,me.Received]),m=ie(null),b=ie(""),w=ee(()=>{var Y;return((Y=m.value)==null?void 0:Y.value)===me.Connections}),v=ee(()=>{const Y=m.value?m.value.text:"";return w.value?[Y,n("Dashboard.liveConnections")]:[Y]}),I=ee(()=>{const Y=m.value?h[m.value.value]:[];return w.value?[Y[0],h[me.LiveConnections][0]]:Y}),y=ee(()=>{var X;const Y=f[((X=m.value)==null?void 0:X.value)??""];return w.value?[Y,f[me.LiveConnections]]:Y}),N=ee(()=>{var X;const Y=[...$.value[((X=m.value)==null?void 0:X.value)??""]];return w.value&&Y.splice(1,0,"#308FFF"),Y}),R=ee(()=>Object.entries(c).map(([Y,X])=>({text:X,value:Y}))),D=ee(()=>Object.entries(d).map(([Y,X])=>({text:X,value:Y}))),O=Y=>{const X=["#1695EF","#00B48F","#757789","#6461FF","#D56F00","#66CFDA"],pe=[...X.splice(0,1,X[Y])];return X.splice(Y,1,pe[0]),X},$=ee(()=>({received:O(0),sent:O(1),dropped:O(2),connections:O(3),topics:O(4),subscriptions:O(5)})),{syncPolling:M}=oi(),_=Y=>{Y.forEach(X=>{g.forEach(pe=>{const ue=h[pe][0];ue.xData.push(X.time_stamp),ue.yData.push(X[pe])})})},H=Y=>{g.forEach(X=>{h[X]=u(1)}),_(Y)},K=async()=>{try{r.value=!0;const Y=await Cl(i.value);return H(Y),r.value=!1,Promise.resolve()}catch{return r.value=!1,Promise.reject()}},{operationWarning:A}=$l(),T=async()=>{let Y=0;K();const X=async()=>{Y++,!(Y>5)&&(await Ta(4e3),await K(),X())};X()},k=async()=>{try{await A(o("confirmResetMonitorData")),await Il(),bs.success(n("RuleEngine.resetSuccessfully")),T()}catch{}},B=Y=>{a.value=!0,m.value=Y;const X=[me.Received,me.Dropped,me.Sent].includes(Y.value)?"Dashboard.chartMessages":"Dashboard.chartConnection";b.value=n(X,{type:Y.text})},z=async()=>{var Y,X;await Ve(),(X=(Y=s.value)==null?void 0:Y.chart)==null||X.resize()},V=Y=>{const X=Y.filter(te=>ct.isNumber(te)&&te!==-1);X.length;const pe=Math.max(...X),ue=Math.min(...X);X.reduce((te,oe)=>te+oe,0);const he=Y[Y.length-1];return{max:pe,min:ue,last:he}},G=Y=>Y.map(X=>V(X.yData)),U=ie(!1),de=ie({}),ne=()=>{U.value=!0},q=async()=>{try{return de.value=await kl(),Promise.resolve()}catch{return Promise.reject()}};return M(async()=>{try{return await Promise.allSettled([K(),q()]),Promise.resolve()}catch{return Promise.reject()}},6e4),(Y,X)=>{const pe=be("el-option"),ue=be("el-select"),he=be("el-button"),te=be("el-tooltip"),oe=be("el-icon"),Z=be("el-card"),p=be("el-col"),x=be("el-row"),P=El,E=be("el-table-column"),F=be("el-table"),re=be("el-dialog");return Q(),le("div",ju,[C("div",ec,[W(ue,{class:"interval-select",modelValue:S(i),"onUpdate:modelValue":X[0]||(X[0]=L=>Le(i)?i.value=L:null)},{default:ce(()=>[(Q(),le(Te,null,ot(l,L=>W(pe,{key:L.label,label:L.label,value:L.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),W(te,{content:S(o)("resetMonitorData"),placement:"top"},{default:ce(()=>[W(he,{class:"icon-button",icon:S(Rl),onClick:k},null,8,["icon"])]),_:1},8,["content"])]),C("div",tc,[W(x,{gutter:26},{default:ce(()=>[(Q(!0),le(Te,null,ot(S(R),L=>(Q(),Pe(p,{key:L.value,span:8},{default:ce(()=>[W(Z,{class:"polyline-card"},{default:ce(()=>[C("div",nc,[C("span",null,j(L.text),1),C("div",oc,[L.value===S(me).Dropped?(Q(),Pe(oe,{key:0,onClick:ne},{default:ce(()=>[W(S(Ul))]),_:1})):Ee("",!0),W(oe,{onClick:fe=>B(L)},{default:ce(()=>[W(S(Ni))]),_:2},1032,["onClick"])])]),W(_o,{"chart-id":`${L.value}-polyline`,"y-title":[L.text],"chart-data":S(h)[L.value],"chart-colors":S($)[L.value],"unit-text-key":f[L.value]},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),C("div",ic,[W(x,{gutter:26},{default:ce(()=>[(Q(!0),le(Te,null,ot(S(D),L=>(Q(),Pe(p,{key:L.value,span:8},{default:ce(()=>[W(Z,{class:"polyline-card"},{default:ce(()=>[C("div",ac,[C("span",null,j(L.text),1),C("div",rc,[W(oe,{onClick:fe=>B(L)},{default:ce(()=>[W(S(Ni))]),_:2},1032,["onClick"])])]),W(_o,{"chart-id":`${L.value}-polyline`,"y-title":[L.text],"chart-data":S(h)[L.value],"chart-colors":S($)[L.value],"unit-text-key":f[L.value],"is-instantaneous-value":""},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),W(re,{modelValue:S(a),"onUpdate:modelValue":X[2]||(X[2]=L=>Le(a)?a.value=L:null),width:"95%",top:"24px","destroy-on-close":"","align-center":"",onOpened:z,class:"full-screen-dialog"},{header:ce(({titleId:L,titleClass:fe})=>{var ge;return[C("div",sc,[C("div",{id:L,class:Ye(fe)},j((ge=S(m))==null?void 0:ge.text),11,lc),W(P,{place:"right",content:S(b)},null,8,["content"])])]}),default:ce(()=>[S(m)?(Q(),Pe(x,{key:0,class:"full-screen-chart"},{default:ce(()=>[W(p,{span:4},{default:ce(()=>[W(ue,{class:"interval-select",modelValue:S(i),"onUpdate:modelValue":X[1]||(X[1]=L=>Le(i)?i.value=L:null)},{default:ce(()=>[(Q(),le(Te,null,ot(l,L=>W(pe,{key:L.label,label:L.label,value:L.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),W(p,{span:24},{default:ce(()=>[W(_o,{ref_key:"fullScreenChart",ref:s,"chart-id":`${S(m).value}-polyline-full-screen`,"y-title":S(v),"chart-data":S(I),"chart-colors":S(N),"unit-text-key":S(y),height:"65vh","show-full-screen":""},null,8,["chart-id","y-title","chart-data","chart-colors","unit-text-key"])]),_:1}),W(p,{span:24},{default:ce(()=>[W(F,{data:G(S(I))},{default:ce(()=>[S(v).length>1?(Q(),Pe(E,{key:0,label:S(n)("Base.name")},{default:ce(({$index:L})=>[Xn(j(S(v)[L]),1)]),_:1},8,["label"])):Ee("",!0),W(E,{prop:"last",label:S(n)("Base.last")},null,8,["label"]),W(E,{prop:"max",label:S(n)("Base.max")},null,8,["label"]),W(E,{prop:"min",label:S(n)("Base.min")},null,8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})):Ee("",!0)]),_:1},8,["modelValue"]),W(Ju,{modelValue:S(U),"onUpdate:modelValue":X[3]||(X[3]=L=>Le(U)?U.value=L:null),metrics:S(de)},null,8,["modelValue","metrics"])])}}}),dc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAu5QTFRFAAAAxNj5XZXzdKX1cKH0TY3yEnHuKHjvTY7yqsj3eKb1ZJn0IHXuEXDuFHLuGXTvPYXyVpT0kbf3oL/3ZZr0HHPuD2/tEXDtFHPuF3PvG3XvPITyaZ/1bZ7zL3rvEm/tFnTvGHXvKXvxRYrykbj3cqHzSIfwHXLtEG3sDm7sEW7tEnLuGnbwMoHya6H1jbL2YJXyKnbuD2zsDW3sDm7tE3DuFHPvG3XwHHfwHHfxO4XzhrH3UYvwMHnuDWrrDmvrDGzrHnjxJXvxN4XzcKT2aJrzO33uDmnrD2rrGHXwHnnxH3rxM4LzSI70dqj2j7T2LHXsGG7rD2jqDWnrIHnxInrxIXvyP4rzQYvzlLz3irD1U4rwHW/rD2fqDmjqI3vyJXzyX5z2bKL3wdX4Z5jyK3TsEWbpEWbqJH3yK4DzS5H1e633R4LtPHztEmjpEGXpEWXpEGbpJn3zJX7zM4b0WZr2lr34iq71SoPuF2jpEWPoEWTpJn/zKIH0OYj1baX3wNT4UIfuJnDqEGHoEWLoDWnqInzyJn/0J4D0U5f3ZKH3bZrxK3HqD2DnEmHoDmvsInryJH3zJ4L1Oor2Upf3T4buD1/nHXbwKIH1KYL1KoP1UIbuJXzzEGHnF3PuHnjwJ4P1DGzsEWDnD2fpD2bqWIvvia30L3PrG2npSZL2aaX3bpvyPnztR5D1Z6P3UYjvHG3qEmTpOYj1U5f2lr34i6/0XpHxGm3qLIH0Ro/1jrj4b5zxQ4DtFGrqOof0fK33xtz6XpLxMXftMoPzeav3YZ72jLD1MnntLXbtMoPzU5X1lLv3daLzO33uIXPsI3vxSY/0cKX2xtv6jLL2Nn3vFW3sPIfyU5T0aJrzNn3vK33xbKH2xdr6XJPyK3juKHzxU5L0krn3jbT2SorwKXfuHXbvPYXyd6j2ZZn0NX/wHHTuM4Dxdqf2kbj3jrX2Y5n0Mn7wKnrwVJLzdab1j7b2VpLyLXvwUpDyeqn2dKX1+Ql/zgAAAPp0Uk5TAApOKknB/+B4FRqs+v///+BOBRB96v//////tipo1f////WcHyq7////////6nIKp////////////9BTffX//////7YvY9X///////WNJDmh////////6lgKFYL//////+U0BW3v////+qwVPtX////////vkgofsfX/////y2gVcv/////////BKlPg/////////5yS/////9uS/////9v/////kh+X/+BTKsH/fVPL//qcHwqS7//BSRWs+ttjBTS29Y0KCljV/6w5Go31/9VOBS+2//VoPtD/khVe6v+xKh+c9f/LaCq2/++NBQVO1fqhFQp44Ms0FagKfKoAAANLSURBVHicxZc9aBRBFMfnH4Tb+xDEGEHU2HgYwQ80auEH2ERBBMEihZWoGNCUYrBTQQutLGITEERUMKAgCIbYKCSF2CQ2Flp4JyLEJGhuZzxE9L25vb3d2dnd+wi4xXHczfvx/v958/YNRIcPUv4G/nQCWAF+VLuAHAVXHUYstAPo5khZdRiDL60DNnLqNUCGER9bAxS1+O8Qi8V5ZBZX54HZFgA7OdotlAR6Z5y+cgZr3QL9MtUs4CDH/5ShDEQhSz++agYwQOJzaklIzPse9JULIssEPE8DnOBVFQUGUAayqjPYrwF6P/A4CXBKh2sA3JoEzoAkeADO4l4s4KzeeVRcEchAA/wMsuDCGrUDhr2tqwQkBE30AFrIrShgRGffJTkDqiCriTkG5AXruGYArnK4kG6XoAz636jINtYlbCkRJU9FgstBwG3SnpdKuJDSFa7KHX2gC0mJql9ITrcamM5iV0msgXB7gOEAYBRK0lflSbCYePF+wwPOYD1wPgAY+80AiiUQfcyleFAQsYAuT4Jaqp0F6UsQ2bCEjBXge9AuoOaBlkCwhgQNCEkwAMtiYnPbeMi1SqAMVn3lQtKlbBTSzeu6lIfG/UISBVdsyJyO9cAzsS0PmjpM7IGRQVTCmTthgGliFNDzOc6DUAb1wxQFpEhoNBTyIApYDhPrEnZPehKIZ26jyidtIxeSPkwUr9u68WJxsog/C41S7p8IeWC2dd+DhOPc1mGymNhmQ8GeCaMjsQQCcB2EAYnb2HJLC/eDkImRN1OsiX4/4G2s94O+mbi2nl5Iln6QXEj/tycux3HuuKGkSEjZxoc/OjTxEY2FLbb1bRgMAIQYR0nWX66Y8/uBrNr7QREnvcDGjPQMeFuBVCEPolMaS9gHHBcRgHgBvGymJ9IkeqQRFZoTJ4EnqQPGIHBYxACEeI0x+3HmOmDAOeBAKMIcdadpBvRMtGRwCdhrBESH7XfAFfuL5QaNgjvM5bZx/z1wYSlyX3BGsdWy2H5j+YAh8zA9BTbblsbdmT7hWNCDu8Am+8LYS1eJdrv+YpkC1sWtS7g3fgO260qcBbpjVyVdPBeA3l9OGViZsCj56lvhId5JXJJy+aYx72/ygjRA6vMPJzpDbttYrkYAAAAASUVORK5CYII=",rr=()=>{const t=ie(0),n=ie(0),o=ie(0),i=ie(0),a=()=>$e(t.value*Math.cos(Math.PI/6),3),r=()=>n.value*1.5,s=()=>t.value*1.5;return{INNER_SIDE_MULTIPLES:1.5,coreNodeHeight:t,coreNodeWidth:n,SVGHeight:o,SVGWidth:i,setCoreNodeHeight:u=>{t.value=u,n.value=a(),o.value=s(),i.value=r()}}},Nn=37*1.28,Kn=53*1.28,on=89*1.28,sr=6,lr=()=>{const e=on-Kn,t=e/5/2,n=e/3/2,o=n*2;return{nonactivatedRadius:t,activatedInnerRadius:n,activatedOuterRadius:o}},ur=()=>({SVGSideLength:(on+sr/2)*2}),fc=20,hc=e=>{const{state:t}=Un(),n=ie(),o=ie(640),i=ie(243),a=ie(20),{coreNodeHeight:r,coreNodeWidth:s,setCoreNodeHeight:l}=rr(),u=ee(()=>e.nodes.some(({role:$})=>$==="replicant")),c=ie({x:200,y:0}),{SVGSideLength:d}=ur(),f=()=>{const $=n.value.$el,{width:M,height:_}=$.getBoundingClientRect();o.value=$e(M,2),i.value=$e(_,2)},h=()=>{c.value={x:$e(o.value/2-d/2,2),y:$e(i.value/2-d/2,2)}},g=ee(()=>e.nodes.filter(({role:$})=>$!=="replicant").length),m=()=>{g.value===1?a.value=$e(u.value?Nn/1.5:i.value/2.8,3):a.value=u.value?10+$e(Nn/(g.value*2),3):24+$e(i.value/(g.value*2),3),l(a.value)},{nonactivatedRadius:b}=lr(),w=($,M,_)=>{const H=_!=="replicant",K=Math.PI/2*M,A=$e(K+Math.PI*2/M*$,2);let T=0;H?T=$e((u.value?Nn*.84:i.value/2)-a.value*Math.log10(M)*1.5,3):T=(Kn+on)/2;const k=o.value/2;let B=i.value/2;!u.value&&M===3&&_==="core"&&(B+=T/2*Math.sin(Math.PI/6));const z=H&&M===1?0:T*Math.cos(A),V=H&&M===1?0:T*Math.sin(A),G=H?s.value:b*2,U=H?r.value:b*2;return{x:$e(k+z-G/2,2),y:$e(B+V-U/2,2)}},v=({node:$,node_status:M,role:_})=>{const H=_||"core";return{type:H,class:`node-${H}`,id:$,label:$,data:{node_status:M}}},I=$=>{const M=[],_=[];return $.forEach(H=>(H.role!=="replicant"?M:_).push(H)),_.length>fc&&_.splice(20,_.length-20),M.map((H,K)=>({...v(H),position:w(K,M.length,H.role)})).concat(_.map((H,K)=>({...v(H),position:w(K,_.length,H.role)})))},y=$=>{const M=[],_=$.filter(({role:H})=>H!=="replicant");for(let H=0;H<_.length;H++){const K=_[H].node;for(let A=H+1;A<_.length;A++){const T=_[A].node;M.push({id:`${K}-${T}`,source:K,target:T,type:"straight"})}}return M},N=$=>{const M=I($),_=y($);return[...M,..._]},R=()=>{f(),h()},D=()=>{window.addEventListener("resize",R)},O=()=>{window.removeEventListener("resize",R)};return ye(()=>t.leftBarCollapse,async()=>{await Ta(300),R()}),ti(()=>{O()}),ze(()=>{f(),h(),m(),l(a.value),D()}),{FlowInstance:n,flowEleWidth:o,showBackgroundCircle:u,backgroundCirclePosition:c,coreNodeHeight:a,countCoreNodeHeight:m,generateFlowData:N}};function Wn(e){return Ra()?(Sn(e),!0):!1}function nt(e){return typeof e=="function"?e():S(e)}const pc=typeof window<"u"&&typeof document<"u",vc=e=>typeof e<"u",gc=Object.prototype.toString,mc=e=>gc.call(e)==="[object Object]",yc=()=>{};function _c(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const cr=e=>e();function bc(e=cr){const t=ie(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:Ns(t),pause:n,resume:o,eventFilter:i}}function Vi(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function wc(e,t,n={}){const{eventFilter:o=cr,...i}=n;return ye(e,_c(o,t),i)}function Mt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:r,resume:s,isActive:l}=bc(o);return{stop:wc(e,t,{...i,eventFilter:a}),pause:r,resume:s,isActive:l}}function Sc(e,t={}){if(!Le(e))return Ss(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=xs(()=>({get(){return e.value[o]},set(i){var a;if((a=nt(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=i,e.value=s}else{const s={...e.value,[o]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=i}}));return n}function Lo(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:g,throwOnTimeout:m}={}){let b=null;const v=[new Promise(I=>{b=ye(e,y=>{d(y)!==t&&(b==null||b(),I(y))},{flush:f,deep:h,immediate:!0})})];return g!=null&&v.push(Vi(g,m).then(()=>nt(e)).finally(()=>b==null?void 0:b())),Promise.race(v)}function o(d,f){if(!Le(d))return n(y=>y===d,f);const{flush:h="sync",deep:g=!1,timeout:m,throwOnTimeout:b}=f??{};let w=null;const I=[new Promise(y=>{w=ye([e,d],([N,R])=>{t!==(N===R)&&(w==null||w(),y(N))},{flush:h,deep:g,immediate:!0})})];return m!=null&&I.push(Vi(m,b).then(()=>nt(e)).finally(()=>(w==null||w(),nt(e)))),Promise.race(I)}function i(d){return n(f=>!!f,d)}function a(d){return o(null,d)}function r(d){return o(void 0,d)}function s(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const g=Array.from(h);return g.includes(d)||g.includes(nt(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(nt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return Lo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:r,changed:u,changedTimes:c,get not(){return Lo(e,!t)}}}function Vo(e){return Lo(e)}function xc(e){var t;const n=nt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const dr=pc?window:void 0;function fr(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=dr):[t,n,o,i]=e,!t)return yc;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],r=()=>{a.forEach(c=>c()),a.length=0},s=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=ye(()=>[xc(t),nt(i)],([c,d])=>{if(r(),!c)return;const f=mc(d)?{...d}:d;a.push(...n.flatMap(h=>o.map(g=>s(c,h,g,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),r()};return Wn(u),u}function Ac(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Hi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=dr,eventName:a="keydown",passive:r=!1,dedupe:s=!1}=o,l=Ac(t);return fr(i,a,c=>{c.repeat&&nt(s)||l(c)&&n(c)},r)}function Ec(e){return JSON.parse(JSON.stringify(e))}function bo(e,t,n,o={}){var i,a,r;const{clone:s=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=nn(),g=n||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((r=(a=h==null?void 0:h.proxy)==null?void 0:a.$emit)==null?void 0:r.bind(h==null?void 0:h.proxy));let m=u;t||(t="modelValue"),m=m||`update:${t.toString()}`;const b=I=>s?typeof s=="function"?s(I):Ec(I):I,w=()=>vc(e[t])?b(e[t]):d,v=I=>{f?f(I)&&g(m,I):g(m,I)};if(l){const I=w(),y=ie(I);let N=!1;return ye(()=>e[t],R=>{N||(N=!0,y.value=b(R),Ve(()=>N=!1))}),ye(y,R=>{!N&&(R!==e[t]||c)&&v(R)},{deep:c}),y}else return ee({get(){return w()},set(I){v(I)}})}var Nc={value:()=>{}};function qn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Mn(n)}function Mn(e){this._=e}function Mc(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Mn.prototype=qn.prototype={constructor:Mn,on:function(e,t){var n=this._,o=Mc(e+"",n),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=Dc(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(i=(e=o[a]).type)n[i]=Fi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Fi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Dc(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Fi(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Nc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ho="http://www.w3.org/1999/xhtml";const Gi={svg:"http://www.w3.org/2000/svg",xhtml:Ho,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gi.hasOwnProperty(t)?{space:Gi[t],local:e}:e}function Cc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ho&&t.documentElement.namespaceURI===Ho?t.createElement(e):t.createElementNS(n,e)}}function Ic(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hr(e){var t=Qn(e);return(t.local?Ic:Cc)(t)}function kc(){}function si(e){return e==null?kc:function(){return this.querySelector(e)}}function Pc(e){typeof e!="function"&&(e=si(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=new Array(r),l,u,c=0;c<r;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Be(o,this._parents)}function Tc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $c(){return[]}function pr(e){return e==null?$c:function(){return this.querySelectorAll(e)}}function Rc(e){return function(){return Tc(e.apply(this,arguments))}}function Oc(e){typeof e=="function"?e=Rc(e):e=pr(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r=t[a],s=r.length,l,u=0;u<s;++u)(l=r[u])&&(o.push(e.call(l,l.__data__,u,r)),i.push(l));return new Be(o,i)}function vr(e){return function(){return this.matches(e)}}function gr(e){return function(t){return t.matches(e)}}var Bc=Array.prototype.find;function zc(e){return function(){return Bc.call(this.children,e)}}function Lc(){return this.firstElementChild}function Vc(e){return this.select(e==null?Lc:zc(typeof e=="function"?e:gr(e)))}var Hc=Array.prototype.filter;function Fc(){return Array.from(this.children)}function Gc(e){return function(){return Hc.call(this.children,e)}}function Yc(e){return this.selectAll(e==null?Fc:Gc(typeof e=="function"?e:gr(e)))}function Uc(e){typeof e!="function"&&(e=vr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=[],l,u=0;u<r;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new Be(o,this._parents)}function mr(e){return new Array(e.length)}function Xc(){return new Be(this._enter||this._groups.map(mr),this._parents)}function On(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}On.prototype={constructor:On,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zc(e){return function(){return e}}function Kc(e,t,n,o,i,a){for(var r=0,s,l=t.length,u=a.length;r<u;++r)(s=t[r])?(s.__data__=a[r],o[r]=s):n[r]=new On(e,a[r]);for(;r<l;++r)(s=t[r])&&(i[r]=s)}function Wc(e,t,n,o,i,a,r){var s,l,u=new Map,c=t.length,d=a.length,f=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(f[s]=h=r.call(l,l.__data__,s,t)+"",u.has(h)?i[s]=l:u.set(h,l));for(s=0;s<d;++s)h=r.call(e,a[s],s,a)+"",(l=u.get(h))?(o[s]=l,l.__data__=a[s],u.delete(h)):n[s]=new On(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function qc(e){return e.__data__}function Qc(e,t){if(!arguments.length)return Array.from(this,qc);var n=t?Wc:Kc,o=this._parents,i=this._groups;typeof e!="function"&&(e=Zc(e));for(var a=i.length,r=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=o[u],d=i[u],f=d.length,h=Jc(e.call(c,c&&c.__data__,u,o)),g=h.length,m=s[u]=new Array(g),b=r[u]=new Array(g),w=l[u]=new Array(f);n(c,d,m,b,w,h,t);for(var v=0,I=0,y,N;v<g;++v)if(y=m[v]){for(v>=I&&(I=v+1);!(N=b[I])&&++I<g;);y._next=N||null}}return r=new Be(r,o),r._enter=s,r._exit=l,r}function Jc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jc(){return new Be(this._exit||this._groups.map(mr),this._parents)}function ed(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function td(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),s=new Array(i),l=0;l<r;++l)for(var u=n[l],c=o[l],d=u.length,f=s[l]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;l<i;++l)s[l]=n[l];return new Be(s,this._parents)}function nd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function od(e){e||(e=id);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r=n[a],s=r.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=r[c])&&(l[c]=u);l.sort(t)}return new Be(i,this._parents).order()}function id(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ad(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rd(){return Array.from(this)}function sd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function ld(){let e=0;for(const t of this)++e;return e}function ud(){return!this.node()}function cd(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,r=i.length,s;a<r;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function dd(e){return function(){this.removeAttribute(e)}}function fd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hd(e,t){return function(){this.setAttribute(e,t)}}function pd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function md(e,t){var n=Qn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fd:dd:typeof t=="function"?n.local?gd:vd:n.local?pd:hd)(n,t))}function yr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yd(e){return function(){this.style.removeProperty(e)}}function _d(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bd(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function wd(e,t,n){return arguments.length>1?this.each((t==null?yd:typeof t=="function"?bd:_d)(e,t,n??"")):Rt(this.node(),e)}function Rt(e,t){return e.style.getPropertyValue(t)||yr(e).getComputedStyle(e,null).getPropertyValue(t)}function Sd(e){return function(){delete this[e]}}function xd(e,t){return function(){this[e]=t}}function Ad(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ed(e,t){return arguments.length>1?this.each((t==null?Sd:typeof t=="function"?Ad:xd)(e,t)):this.node()[e]}function _r(e){return e.trim().split(/^|\s+/)}function li(e){return e.classList||new br(e)}function br(e){this._node=e,this._names=_r(e.getAttribute("class")||"")}br.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wr(e,t){for(var n=li(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Sr(e,t){for(var n=li(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Nd(e){return function(){wr(this,e)}}function Md(e){return function(){Sr(this,e)}}function Dd(e,t){return function(){(t.apply(this,arguments)?wr:Sr)(this,e)}}function Cd(e,t){var n=_r(e+"");if(arguments.length<2){for(var o=li(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Dd:t?Nd:Md)(n,t))}function Id(){this.textContent=""}function kd(e){return function(){this.textContent=e}}function Pd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Td(e){return arguments.length?this.each(e==null?Id:(typeof e=="function"?Pd:kd)(e)):this.node().textContent}function $d(){this.innerHTML=""}function Rd(e){return function(){this.innerHTML=e}}function Od(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bd(e){return arguments.length?this.each(e==null?$d:(typeof e=="function"?Od:Rd)(e)):this.node().innerHTML}function zd(){this.nextSibling&&this.parentNode.appendChild(this)}function Ld(){return this.each(zd)}function Vd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hd(){return this.each(Vd)}function Fd(e){var t=typeof e=="function"?e:hr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gd(){return null}function Yd(e,t){var n=typeof e=="function"?e:hr(e),o=t==null?Gd:typeof t=="function"?t:si(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ud(){var e=this.parentNode;e&&e.removeChild(this)}function Xd(){return this.each(Ud)}function Zd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wd(e){return this.select(e?Kd:Zd)}function qd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qd(e){return function(t){e.call(this,t,this.__data__)}}function Jd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function jd(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function ef(e,t,n){return function(){var o=this.__on,i,a=Qd(t);if(o){for(var r=0,s=o.length;r<s;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function tf(e,t,n){var o=Jd(e+""),i,a=o.length,r;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(s=t?ef:jd,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function xr(e,t,n){var o=yr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nf(e,t){return function(){return xr(this,e,t)}}function of(e,t){return function(){return xr(this,e,t.apply(this,arguments))}}function af(e,t){return this.each((typeof t=="function"?of:nf)(e,t))}function*rf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var Ar=[null];function Be(e,t){this._groups=e,this._parents=t}function an(){return new Be([[document.documentElement]],Ar)}function sf(){return this}Be.prototype=an.prototype={constructor:Be,select:Pc,selectAll:Oc,selectChild:Vc,selectChildren:Yc,filter:Uc,data:Qc,enter:Xc,exit:jc,join:ed,merge:td,selection:sf,order:nd,sort:od,call:ad,nodes:rd,node:sd,size:ld,empty:ud,each:cd,attr:md,style:wd,property:Ed,classed:Cd,text:Td,html:Bd,raise:Ld,lower:Hd,append:Fd,insert:Yd,remove:Xd,clone:Wd,datum:qd,on:tf,dispatch:af,[Symbol.iterator]:rf};function He(e){return typeof e=="string"?new Be([[document.querySelector(e)]],[document.documentElement]):new Be([[e]],Ar)}function lf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xe(e,t){if(e=lf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const uf={passive:!1},Wt={capture:!0,passive:!1};function wo(e){e.stopImmediatePropagation()}function Ct(e){e.preventDefault(),e.stopImmediatePropagation()}function Er(e){var t=e.document.documentElement,n=He(e).on("dragstart.drag",Ct,Wt);"onselectstart"in t?n.on("selectstart.drag",Ct,Wt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nr(e,t){var n=e.document.documentElement,o=He(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ct,Wt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pn=e=>()=>e;function Fo(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:r,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Fo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cf(e){return!e.ctrlKey&&!e.button}function df(){return this.parentNode}function ff(e,t){return t??{x:e.x,y:e.y}}function hf(){return navigator.maxTouchPoints||"ontouchstart"in this}function pf(){var e=cf,t=df,n=ff,o=hf,i={},a=qn("start","drag","end"),r=0,s,l,u,c,d=0;function f(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",w,uf).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,N){if(!(c||!e.call(this,y,N))){var R=I(this,t.call(this,y,N),y,N,"mouse");R&&(He(y.view).on("mousemove.drag",g,Wt).on("mouseup.drag",m,Wt),Er(y.view),wo(y),u=!1,s=y.clientX,l=y.clientY,R("start",y))}}function g(y){if(Ct(y),!u){var N=y.clientX-s,R=y.clientY-l;u=N*N+R*R>d}i.mouse("drag",y)}function m(y){He(y.view).on("mousemove.drag mouseup.drag",null),Nr(y.view,u),Ct(y),i.mouse("end",y)}function b(y,N){if(e.call(this,y,N)){var R=y.changedTouches,D=t.call(this,y,N),O=R.length,$,M;for($=0;$<O;++$)(M=I(this,D,y,N,R[$].identifier,R[$]))&&(wo(y),M("start",y,R[$]))}}function w(y){var N=y.changedTouches,R=N.length,D,O;for(D=0;D<R;++D)(O=i[N[D].identifier])&&(Ct(y),O("drag",y,N[D]))}function v(y){var N=y.changedTouches,R=N.length,D,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<R;++D)(O=i[N[D].identifier])&&(wo(y),O("end",y,N[D]))}function I(y,N,R,D,O,$){var M=a.copy(),_=Xe($||R,N),H,K,A;if((A=n.call(y,new Fo("beforestart",{sourceEvent:R,target:f,identifier:O,active:r,x:_[0],y:_[1],dx:0,dy:0,dispatch:M}),D))!=null)return H=A.x-_[0]||0,K=A.y-_[1]||0,function T(k,B,z){var V=_,G;switch(k){case"start":i[O]=T,G=r++;break;case"end":delete i[O],--r;case"drag":_=Xe(z||B,N),G=r;break}M.call(k,y,new Fo(k,{sourceEvent:B,subject:A,target:f,identifier:O,active:G,x:_[0]+H,y:_[1]+K,dx:_[0]-V[0],dy:_[1]-V[1],dispatch:M}),D)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:pn(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:pn(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:pn(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:pn(!!y),f):o},f.on=function(){var y=a.on.apply(a,arguments);return y===a?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function ui(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function rn(){}var qt=.7,Bn=1/qt,It="\\s*([+-]?\\d+)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vf=/^#([0-9a-f]{3,8})$/,gf=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),mf=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),yf=new RegExp(`^rgba\\(${It},${It},${It},${Qt}\\)$`),_f=new RegExp(`^rgba\\(${qe},${qe},${qe},${Qt}\\)$`),bf=new RegExp(`^hsl\\(${Qt},${qe},${qe}\\)$`),wf=new RegExp(`^hsla\\(${Qt},${qe},${qe},${Qt}\\)$`),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ui(rn,Jt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ui,formatHex:Ui,formatHex8:Sf,formatHsl:xf,formatRgb:Xi,toString:Xi});function Ui(){return this.rgb().formatHex()}function Sf(){return this.rgb().formatHex8()}function xf(){return Dr(this).formatHsl()}function Xi(){return this.rgb().formatRgb()}function Jt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zi(t):n===3?new Re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?vn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?vn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gf.exec(e))?new Re(t[1],t[2],t[3],1):(t=mf.exec(e))?new Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yf.exec(e))?vn(t[1],t[2],t[3],t[4]):(t=_f.exec(e))?vn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bf.exec(e))?qi(t[1],t[2]/100,t[3]/100,1):(t=wf.exec(e))?qi(t[1],t[2]/100,t[3]/100,t[4]):Yi.hasOwnProperty(e)?Zi(Yi[e]):e==="transparent"?new Re(NaN,NaN,NaN,0):null}function Zi(e){return new Re(e>>16&255,e>>8&255,e&255,1)}function vn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Re(e,t,n,o)}function Af(e){return e instanceof rn||(e=Jt(e)),e?(e=e.rgb(),new Re(e.r,e.g,e.b,e.opacity)):new Re}function Go(e,t,n,o){return arguments.length===1?Af(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ui(Re,Go,Mr(rn,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Re(_t(this.r),_t(this.g),_t(this.b),zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ki,formatHex:Ki,formatHex8:Ef,formatRgb:Wi,toString:Wi}));function Ki(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}`}function Ef(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}${yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wi(){const e=zn(this.opacity);return`${e===1?"rgb(":"rgba("}${_t(this.r)}, ${_t(this.g)}, ${_t(this.b)}${e===1?")":`, ${e})`}`}function zn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yt(e){return e=_t(e),(e<16?"0":"")+e.toString(16)}function qi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fe(e,t,n,o)}function Dr(e){if(e instanceof Fe)return new Fe(e.h,e.s,e.l,e.opacity);if(e instanceof rn||(e=Jt(e)),!e)return new Fe;if(e instanceof Fe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,s=a-i,l=(a+i)/2;return s?(t===a?r=(n-o)/s+(n<o)*6:n===a?r=(o-t)/s+2:r=(t-n)/s+4,s/=l<.5?a+i:2-a-i,r*=60):s=l>0&&l<1?0:r,new Fe(r,s,l,e.opacity)}function Nf(e,t,n,o){return arguments.length===1?Dr(e):new Fe(e,t,n,o??1)}function Fe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ui(Fe,Nf,Mr(rn,{brighter(e){return e=e==null?Bn:Math.pow(Bn,e),new Fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new Fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Re(So(e>=240?e-240:e+120,i,o),So(e,i,o),So(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Fe(Qi(this.h),gn(this.s),gn(this.l),zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zn(this.opacity);return`${e===1?"hsl(":"hsla("}${Qi(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qi(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function So(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Cr=e=>()=>e;function Mf(e,t){return function(n){return e+n*t}}function Df(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Cf(e){return(e=+e)==1?Ir:function(t,n){return n-t?Df(t,n,e):Cr(isNaN(t)?n:t)}}function Ir(e,t){var n=t-e;return n?Mf(e,n):Cr(isNaN(e)?t:e)}const Ji=function e(t){var n=Cf(t);function o(i,a){var r=n((i=Go(i)).r,(a=Go(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Ir(i.opacity,a.opacity);return function(c){return i.r=r(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function lt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xo=new RegExp(Yo.source,"g");function If(e){return function(){return e}}function kf(e){return function(t){return e(t)+""}}function Pf(e,t){var n=Yo.lastIndex=xo.lastIndex=0,o,i,a,r=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Yo.exec(e))&&(i=xo.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[r]?s[r]+=a:s[++r]=a),(o=o[0])===(i=i[0])?s[r]?s[r]+=i:s[++r]=i:(s[++r]=null,l.push({i:r,x:lt(o,i)})),n=xo.lastIndex;return n<t.length&&(a=t.slice(n),s[r]?s[r]+=a:s[++r]=a),s.length<2?l[0]?kf(l[0].x):If(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}var ji=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kr(e,t,n,o,i,a){var r,s,l;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ji,skewX:Math.atan(l)*ji,scaleX:r,scaleY:s}}var mn;function Tf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uo:kr(t.a,t.b,t.c,t.d,t.e,t.f)}function $f(e){return e==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",e),!(e=mn.transform.baseVal.consolidate()))?Uo:(e=e.matrix,kr(e.a,e.b,e.c,e.d,e.e,e.f))}function Pr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,f,h,g){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:lt(u,d)},{i:m-2,x:lt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:lt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:lt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function l(u,c,d,f,h,g){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");g.push({i:m-4,x:lt(u,d)},{i:m-2,x:lt(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,m=f.length,b;++g<m;)d[(b=f[g]).i]=b.x(h);return d.join("")}}}var Rf=Pr(Tf,"px, ","px)","deg)"),Of=Pr($f,", ",")",")"),Bf=1e-12;function ea(e){return((e=Math.exp(e))+1/e)/2}function zf(e){return((e=Math.exp(e))-1/e)/2}function Lf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Vf=function e(t,n,o){function i(a,r){var s=a[0],l=a[1],u=a[2],c=r[0],d=r[1],f=r[2],h=c-s,g=d-l,m=h*h+g*g,b,w;if(m<Bf)w=Math.log(f/u)/t,b=function(D){return[s+D*h,l+D*g,u*Math.exp(t*D*w)]};else{var v=Math.sqrt(m),I=(f*f-u*u+o*m)/(2*u*n*v),y=(f*f-u*u-o*m)/(2*f*n*v),N=Math.log(Math.sqrt(I*I+1)-I),R=Math.log(Math.sqrt(y*y+1)-y);w=(R-N)/t,b=function(D){var O=D*w,$=ea(N),M=u/(n*v)*($*Lf(t*O+N)-zf(N));return[s+M*h,l+M*g,u*$/ea(t*O+N)]}}return b.duration=w*1e3*t/Math.SQRT2,b}return i.rho=function(a){var r=Math.max(.001,+a),s=r*r,l=s*s;return e(r,s,l)},i}(Math.SQRT2,2,4);var Ot=0,Gt=0,Ht=0,Tr=1e3,Ln,Yt,Vn=0,xt=0,Jn=0,jt=typeof performance=="object"&&performance.now?performance:Date,$r=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ci(){return xt||($r(Hf),xt=jt.now()+Jn)}function Hf(){xt=0}function Hn(){this._call=this._time=this._next=null}Hn.prototype=Rr.prototype={constructor:Hn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ci():+n)+(t==null?0:+t),!this._next&&Yt!==this&&(Yt?Yt._next=this:Ln=this,Yt=this),this._call=e,this._time=n,Xo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xo())}};function Rr(e,t,n){var o=new Hn;return o.restart(e,t,n),o}function Ff(){ci(),++Ot;for(var e=Ln,t;e;)(t=xt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ot}function ta(){xt=(Vn=jt.now())+Jn,Ot=Gt=0;try{Ff()}finally{Ot=0,Yf(),xt=0}}function Gf(){var e=jt.now(),t=e-Vn;t>Tr&&(Jn-=t,Vn=e)}function Yf(){for(var e,t=Ln,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ln=n);Yt=e,Xo(o)}function Xo(e){if(!Ot){Gt&&(Gt=clearTimeout(Gt));var t=e-xt;t>24?(e<1/0&&(Gt=setTimeout(ta,e-jt.now()-Jn)),Ht&&(Ht=clearInterval(Ht))):(Ht||(Vn=jt.now(),Ht=setInterval(Gf,Tr)),Ot=1,$r(ta))}}function na(e,t,n){var o=new Hn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Uf=qn("start","end","cancel","interrupt"),Xf=[],Or=0,oa=1,Zo=2,Dn=3,ia=4,Ko=5,Cn=6;function jn(e,t,n,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;Zf(e,n,{name:t,index:o,group:i,on:Uf,tween:Xf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Or})}function di(e,t){var n=Ue(e,t);if(n.state>Or)throw new Error("too late; already scheduled");return n}function Je(e,t){var n=Ue(e,t);if(n.state>Dn)throw new Error("too late; already running");return n}function Ue(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zf(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Rr(a,0,n.time);function a(u){n.state=oa,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,h;if(n.state!==oa)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Dn)return na(r);h.state===ia?(h.state=Cn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Cn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(na(function(){n.state===Dn&&(n.state=ia,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Zo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zo){for(n.state=Dn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ko,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Ko&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Cn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function In(e,t){var n=e.__transition,o,i,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){a=!1;continue}i=o.state>Zo&&o.state<Ko,o.state=Cn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}a&&delete e.__transition}}function Kf(e){return this.each(function(){In(this,e)})}function Wf(e,t){var n,o;return function(){var i=Je(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,s=o.length;r<s;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function qf(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=Je(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Qf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ue(this.node(),n).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Wf:qf)(n,e,t))}function fi(e,t,n){var o=e._id;return e.each(function(){var i=Je(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ue(i,o).value[t]}}function Br(e,t){var n;return(typeof t=="number"?lt:t instanceof Jt?Ji:(n=Jt(t))?(t=n,Ji):Pf)(e,t)}function Jf(e){return function(){this.removeAttribute(e)}}function jf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eh(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function th(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function nh(e,t,n){var o,i,a;return function(){var r,s=n(this),l;return s==null?void this.removeAttribute(e):(r=this.getAttribute(e),l=s+"",r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s)))}}function oh(e,t,n){var o,i,a;return function(){var r,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),l=s+"",r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s)))}}function ih(e,t){var n=Qn(e),o=n==="transform"?Of:Br;return this.attrTween(e,typeof t=="function"?(n.local?oh:nh)(n,o,fi(this,"attr."+e,t)):t==null?(n.local?jf:Jf)(n):(n.local?th:eh)(n,o,t))}function ah(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sh(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&rh(e,a)),n}return i._value=t,i}function lh(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ah(e,a)),n}return i._value=t,i}function uh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Qn(e);return this.tween(n,(o.local?sh:lh)(o,t))}function ch(e,t){return function(){di(this,e).delay=+t.apply(this,arguments)}}function dh(e,t){return t=+t,function(){di(this,e).delay=t}}function fh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ch:dh)(t,e)):Ue(this.node(),t).delay}function hh(e,t){return function(){Je(this,e).duration=+t.apply(this,arguments)}}function ph(e,t){return t=+t,function(){Je(this,e).duration=t}}function vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hh:ph)(t,e)):Ue(this.node(),t).duration}function gh(e,t){if(typeof t!="function")throw new Error;return function(){Je(this,e).ease=t}}function mh(e){var t=this._id;return arguments.length?this.each(gh(t,e)):Ue(this.node(),t).ease}function yh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Je(this,e).ease=n}}function _h(e){if(typeof e!="function")throw new Error;return this.each(yh(this._id,e))}function bh(e){typeof e!="function"&&(e=vr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,s=o[i]=[],l,u=0;u<r;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new at(o,this._parents,this._name,this._id)}function wh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,d=r[s]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;s<o;++s)r[s]=t[s];return new at(r,this._parents,this._name,this._id)}function Sh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xh(e,t,n){var o,i,a=Sh(t)?di:Je;return function(){var r=a(this,e),s=r.on;s!==o&&(i=(o=s).copy()).on(t,n),r.on=i}}function Ah(e,t){var n=this._id;return arguments.length<2?Ue(this.node(),n).on.on(e):this.each(xh(n,e,t))}function Eh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nh(){return this.on("end.remove",Eh(this._id))}function Mh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=si(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var s=o[r],l=s.length,u=a[r]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,jn(u[f],t,n,f,u,Ue(c,n)));return new at(a,this._parents,t,n)}function Dh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pr(e));for(var o=this._groups,i=o.length,a=[],r=[],s=0;s<i;++s)for(var l=o[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,g=Ue(c,n),m=0,b=f.length;m<b;++m)(h=f[m])&&jn(h,t,n,m,f,g);a.push(f),r.push(c)}return new at(a,r,t,n)}var Ch=an.prototype.constructor;function Ih(){return new Ch(this._groups,this._parents)}function kh(e,t){var n,o,i;return function(){var a=Rt(this,e),r=(this.style.removeProperty(e),Rt(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function zr(e){return function(){this.style.removeProperty(e)}}function Ph(e,t,n){var o,i=n+"",a;return function(){var r=Rt(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}function Th(e,t,n){var o,i,a;return function(){var r=Rt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Rt(this,e))),r===l?null:r===o&&l===i?a:(i=l,a=t(o=r,s))}}function $h(e,t){var n,o,i,a="style."+t,r="end."+a,s;return function(){var l=Je(this,e),u=l.on,c=l.value[a]==null?s||(s=zr(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),l.on=o}}function Rh(e,t,n){var o=(e+="")=="transform"?Rf:Br;return t==null?this.styleTween(e,kh(e,o)).on("end.style."+e,zr(e)):typeof t=="function"?this.styleTween(e,Th(e,o,fi(this,"style."+e,t))).each($h(this._id,e)):this.styleTween(e,Ph(e,o,t),n).on("end.style."+e,null)}function Oh(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Bh(e,t,n){var o,i;function a(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Oh(e,r,n)),o}return a._value=t,a}function zh(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Bh(e,t,n??""))}function Lh(e){return function(){this.textContent=e}}function Vh(e){return function(){var t=e(this);this.textContent=t??""}}function Hh(e){return this.tween("text",typeof e=="function"?Vh(fi(this,"text",e)):Lh(e==null?"":e+""))}function Fh(e){return function(t){this.textContent=e.call(this,t)}}function Gh(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Fh(i)),t}return o._value=e,o}function Yh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Gh(e))}function Uh(){for(var e=this._name,t=this._id,n=Lr(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],s=r.length,l,u=0;u<s;++u)if(l=r[u]){var c=Ue(l,t);jn(l,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new at(o,this._parents,e,n)}function Xh(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,r){var s={value:r},l={value:function(){--i===0&&a()}};n.each(function(){var u=Je(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var Zh=0;function at(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Lr(){return++Zh}var et=an.prototype;at.prototype={constructor:at,select:Mh,selectAll:Dh,selectChild:et.selectChild,selectChildren:et.selectChildren,filter:bh,merge:wh,selection:Ih,transition:Uh,call:et.call,nodes:et.nodes,node:et.node,size:et.size,empty:et.empty,each:et.each,on:Ah,attr:ih,attrTween:uh,style:Rh,styleTween:zh,text:Hh,textTween:Yh,remove:Nh,tween:Qf,delay:fh,duration:vh,ease:mh,easeVarying:_h,end:Xh,[Symbol.iterator]:et[Symbol.iterator]};function Kh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wh={time:null,delay:0,duration:250,ease:Kh};function qh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qh(e){var t,n;e instanceof at?(t=e._id,e=e._name):(t=Lr(),(n=Wh).time=ci(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],s=r.length,l,u=0;u<s;++u)(l=r[u])&&jn(l,e,t,u,r,n||qh(l,t));return new at(o,this._parents,e,t)}an.prototype.interrupt=Kf;an.prototype.transition=Qh;const yn=e=>()=>e;function Jh(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function it(e,t,n){this.k=e,this.x=t,this.y=n}it.prototype={constructor:it,scale:function(e){return e===1?this:new it(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new it(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bt=new it(1,0,0);it.prototype;function Ao(e){e.stopImmediatePropagation()}function Ft(e){e.preventDefault(),e.stopImmediatePropagation()}function jh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ep(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function aa(){return this.__zoom||Bt}function tp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function np(){return navigator.maxTouchPoints||"ontouchstart"in this}function op(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function ip(){var e=jh,t=ep,n=op,o=tp,i=np,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Vf,u=qn("start","zoom","end"),c,d,f,h=500,g=150,m=0,b=10;function w(A){A.property("__zoom",aa).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(A,T,k,B){var z=A.selection?A.selection():A;z.property("__zoom",aa),A!==z?N(A,T,k,B):z.interrupt().each(function(){R(this,arguments).event(B).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},w.scaleBy=function(A,T,k,B){w.scaleTo(A,function(){var z=this.__zoom.k,V=typeof T=="function"?T.apply(this,arguments):T;return z*V},k,B)},w.scaleTo=function(A,T,k,B){w.transform(A,function(){var z=t.apply(this,arguments),V=this.__zoom,G=k==null?y(z):typeof k=="function"?k.apply(this,arguments):k,U=V.invert(G),de=typeof T=="function"?T.apply(this,arguments):T;return n(I(v(V,de),G,U),z,r)},k,B)},w.translateBy=function(A,T,k,B){w.transform(A,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),r)},null,B)},w.translateTo=function(A,T,k,B,z){w.transform(A,function(){var V=t.apply(this,arguments),G=this.__zoom,U=B==null?y(V):typeof B=="function"?B.apply(this,arguments):B;return n(Bt.translate(U[0],U[1]).scale(G.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof k=="function"?-k.apply(this,arguments):-k),V,r)},B,z)};function v(A,T){return T=Math.max(a[0],Math.min(a[1],T)),T===A.k?A:new it(T,A.x,A.y)}function I(A,T,k){var B=T[0]-k[0]*A.k,z=T[1]-k[1]*A.k;return B===A.x&&z===A.y?A:new it(A.k,B,z)}function y(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function N(A,T,k,B){A.on("start.zoom",function(){R(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(B).end()}).tween("zoom",function(){var z=this,V=arguments,G=R(z,V).event(B),U=t.apply(z,V),de=k==null?y(U):typeof k=="function"?k.apply(z,V):k,ne=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),q=z.__zoom,ae=typeof T=="function"?T.apply(z,V):T,Y=l(q.invert(de).concat(ne/q.k),ae.invert(de).concat(ne/ae.k));return function(X){if(X===1)X=ae;else{var pe=Y(X),ue=ne/pe[2];X=new it(ue,de[0]-pe[0]*ue,de[1]-pe[1]*ue)}G.zoom(null,X)}})}function R(A,T,k){return!k&&A.__zooming||new D(A,T)}function D(A,T){this.that=A,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(A,T),this.taps=0}D.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,T){return this.mouse&&A!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var T=He(this.that).datum();u.call(A,this.that,new Jh(A,{sourceEvent:this.sourceEvent,target:w,type:A,transform:this.that.__zoom,dispatch:u}),T)}};function O(A,...T){if(!e.apply(this,arguments))return;var k=R(this,T).event(A),B=this.__zoom,z=Math.max(a[0],Math.min(a[1],B.k*Math.pow(2,o.apply(this,arguments)))),V=Xe(A);if(k.wheel)(k.mouse[0][0]!==V[0]||k.mouse[0][1]!==V[1])&&(k.mouse[1]=B.invert(k.mouse[0]=V)),clearTimeout(k.wheel);else{if(B.k===z)return;k.mouse=[V,B.invert(V)],In(this),k.start()}Ft(A),k.wheel=setTimeout(G,g),k.zoom("mouse",n(I(v(B,z),k.mouse[0],k.mouse[1]),k.extent,r));function G(){k.wheel=null,k.end()}}function $(A,...T){if(f||!e.apply(this,arguments))return;var k=A.currentTarget,B=R(this,T,!0).event(A),z=He(A.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",ne,!0),V=Xe(A,k),G=A.clientX,U=A.clientY;Er(A.view),Ao(A),B.mouse=[V,this.__zoom.invert(V)],In(this),B.start();function de(q){if(Ft(q),!B.moved){var ae=q.clientX-G,Y=q.clientY-U;B.moved=ae*ae+Y*Y>m}B.event(q).zoom("mouse",n(I(B.that.__zoom,B.mouse[0]=Xe(q,k),B.mouse[1]),B.extent,r))}function ne(q){z.on("mousemove.zoom mouseup.zoom",null),Nr(q.view,B.moved),Ft(q),B.event(q).end()}}function M(A,...T){if(e.apply(this,arguments)){var k=this.__zoom,B=Xe(A.changedTouches?A.changedTouches[0]:A,this),z=k.invert(B),V=k.k*(A.shiftKey?.5:2),G=n(I(v(k,V),B,z),t.apply(this,T),r);Ft(A),s>0?He(this).transition().duration(s).call(N,G,B,A):He(this).call(w.transform,G,B,A)}}function _(A,...T){if(e.apply(this,arguments)){var k=A.touches,B=k.length,z=R(this,T,A.changedTouches.length===B).event(A),V,G,U,de;for(Ao(A),G=0;G<B;++G)U=k[G],de=Xe(U,this),de=[de,this.__zoom.invert(de),U.identifier],z.touch0?!z.touch1&&z.touch0[2]!==de[2]&&(z.touch1=de,z.taps=0):(z.touch0=de,V=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(z.taps<2&&(d=de[0],c=setTimeout(function(){c=null},h)),In(this),z.start())}}function H(A,...T){if(this.__zooming){var k=R(this,T).event(A),B=A.changedTouches,z=B.length,V,G,U,de;for(Ft(A),V=0;V<z;++V)G=B[V],U=Xe(G,this),k.touch0&&k.touch0[2]===G.identifier?k.touch0[0]=U:k.touch1&&k.touch1[2]===G.identifier&&(k.touch1[0]=U);if(G=k.that.__zoom,k.touch1){var ne=k.touch0[0],q=k.touch0[1],ae=k.touch1[0],Y=k.touch1[1],X=(X=ae[0]-ne[0])*X+(X=ae[1]-ne[1])*X,pe=(pe=Y[0]-q[0])*pe+(pe=Y[1]-q[1])*pe;G=v(G,Math.sqrt(X/pe)),U=[(ne[0]+ae[0])/2,(ne[1]+ae[1])/2],de=[(q[0]+Y[0])/2,(q[1]+Y[1])/2]}else if(k.touch0)U=k.touch0[0],de=k.touch0[1];else return;k.zoom("touch",n(I(G,U,de),k.extent,r))}}function K(A,...T){if(this.__zooming){var k=R(this,T).event(A),B=A.changedTouches,z=B.length,V,G;for(Ao(A),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),V=0;V<z;++V)G=B[V],k.touch0&&k.touch0[2]===G.identifier?delete k.touch0:k.touch1&&k.touch1[2]===G.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(G=Xe(G,this),Math.hypot(d[0]-G[0],d[1]-G[1])<b)){var U=He(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return w.wheelDelta=function(A){return arguments.length?(o=typeof A=="function"?A:yn(+A),w):o},w.filter=function(A){return arguments.length?(e=typeof A=="function"?A:yn(!!A),w):e},w.touchable=function(A){return arguments.length?(i=typeof A=="function"?A:yn(!!A),w):i},w.extent=function(A){return arguments.length?(t=typeof A=="function"?A:yn([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),w):t},w.scaleExtent=function(A){return arguments.length?(a[0]=+A[0],a[1]=+A[1],w):[a[0],a[1]]},w.translateExtent=function(A){return arguments.length?(r[0][0]=+A[0][0],r[1][0]=+A[1][0],r[0][1]=+A[0][1],r[1][1]=+A[1][1],w):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},w.constrain=function(A){return arguments.length?(n=A,w):n},w.duration=function(A){return arguments.length?(s=+A,w):s},w.interpolate=function(A){return arguments.length?(l=A,w):l},w.on=function(){var A=u.on.apply(u,arguments);return A===u?w:A},w.clickDistance=function(A){return arguments.length?(m=(A=+A)*A,w):Math.sqrt(m)},w.tapDistance=function(A){return arguments.length?(b=+A,w):b},w}var se=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(se||{}),hi=(e=>(e.Partial="partial",e.Full="full",e))(hi||{}),vt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(vt||{}),At=(e=>(e.Strict="strict",e.Loose="loose",e))(At||{}),Wo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Wo||{}),Xt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Xt||{});function qo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,a=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||i||!!a}function ap(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ra(e,t,n,o){const i=t.split("+").map(a=>a.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((a,r)=>n.has(a)&&Array.from(n.values())[r]===i[r]))}function rp(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=sp(n.code,e);return Array.isArray(e)?e.some(i=>ra(n[o],i,t,n.type==="keyup")):ra(n[o],e,t,n.type==="keyup")}}function sp(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Zt(e,t){const n=Me(()=>_e(t==null?void 0:t.actInsideInputWithModifier)??!1),o=Me(()=>_e(t==null?void 0:t.target)??window),i=ie(_e(e)===!0);let a=!1;const r=new Set;let s=u(_e(e));ye(()=>_e(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&l(),s=u(c)},{immediate:!0}),ze(()=>{fr(window,["blur","contextmenu"],l)}),Hi((...c)=>s(...c),c=>{a=ap(c),!((!a||a&&!n.value)&&qo(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:o}),Hi((...c)=>s(...c),c=>{if(i.value){if((!a||a&&!n.value)&&qo(c))return;l()}},{eventName:"keyup",target:o});function l(){a=!1,r.clear(),i.value=!1}function u(c){return c===null?(l(),()=>!1):typeof c=="boolean"?(l(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?rp(c,r):c}return i}const Vr="vue-flow__node-desc",Hr="vue-flow__edge-desc",lp="vue-flow__aria-live",Fr=["Enter"," ","Escape"],kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Qo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Jo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function eo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Et(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Gr(e,t){return{x:Et(e.x,t[0][0],t[1][0]),y:Et(e.y,t[0][1],t[1][1])}}function sa(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function ft(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function bt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!ft(e)}function Ut(e){return bt(e)&&"computedPosition"in e}function _n(e){return!Number.isNaN(e)&&Number.isFinite(e)}function up(e){return _n(e.width)&&_n(e.height)&&_n(e.x)&&_n(e.y)}function cp(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Dt({width:0,height:0}),computedPosition:Dt({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ce(e.data)?e.data:{},events:Dt(Ce(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Yr(e,t,n){var o,i;const a={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ce(e.data)?e.data:{},events:Dt(Ce(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function Ur(e,t,n,o){const i=typeof e=="string"?e:e.id,a=new Set,r=o==="source"?"target":"source";for(const s of n)s[r]===i&&a.add(s[o]);return t.filter(s=>a.has(s.id))}function dp(...e){if(e.length===3){const[a,r,s]=e;return Ur(a,r,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>ft(a)&&a.source===o).map(a=>n.find(r=>bt(r)&&r.id===a.target))}function fp(...e){if(e.length===3){const[a,r,s]=e;return Ur(a,r,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>ft(a)&&a.target===o).map(a=>n.find(r=>bt(r)&&r.id===a.source))}function Xr({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function hp(e,t){return t.some(n=>ft(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Zr({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Fn({x:e,y:t},{x:n,y:o,zoom:i},a=!1,[r,s]=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return a?{x:r*Math.round(l.x/r),y:s*Math.round(l.y/s)}:l}function pp(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Kr({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function vp({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Wr(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=pp(t,Kr({...o.computedPosition,...o.dimensions}))}return vp(t)}function qr(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const a={...Fn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},r=[];for(const s of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=s,d=l.width??s.width??null,f=l.height??s.height??null;if(i&&!u||c)continue;const h=Jo(a,Qo(s)),g=d===null||f===null,m=o&&h>0,b=(d??0)*(f??0);(g||m||h>=b||s.dragging)&&r.push(s)}return r}function Qr(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function la(e,t,n,o,i,a=.1,r={x:0,y:0}){const s=t/(e.width*(1+a)),l=n/(e.height*(1+a)),u=Math.min(s,l),c=Et(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c+(r.x??0),g=n/2-f*c+(r.y??0);return{x:h,y:g,zoom:c}}function gp(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Jr(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Jr(n,t):!1}function en(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ua(e,t,n){return e<t?Et(Math.abs(e-t),1,t)/t:e>n?-Et(Math.abs(e-n),1,t)/t:0}function jr(e,t,n=15,o=40){const i=ua(e.x,o,t.width-o)*n,a=ua(e.y,o,t.height-o)*n;return[i,a]}function Eo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const r=t.style;return{...r(a),...i}}:t.style={...t.style,...i}}}}function ca(e,t){var n,o;const i=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of i)if(r.type==="add")t.findIndex(l=>l.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const s=t.findIndex(l=>l.id===r.id);s!==-1&&t.splice(s,1)}const a=t.map(r=>r.id);for(const r of t)for(const s of e)if(s.id===r.id)switch(s.type){case"select":r.selected=s.selected;break;case"position":if(Ut(r)&&(typeof s.position<"u"&&(r.position=s.position),typeof s.dragging<"u"&&(r.dragging=s.dragging),r.expandParent&&r.parentNode)){const l=t[a.indexOf(r.parentNode)];l&&Ut(l)&&Eo(r,l)}break;case"dimensions":if(Ut(r)&&(typeof s.dimensions<"u"&&(r.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(r.style={...r.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(r.resizing=s.resizing),r.expandParent&&r.parentNode)){const l=t[a.indexOf(r.parentNode)];l&&Ut(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Eo(r,l):Ve(()=>{Eo(r,l)}))}break}return t}function st(e,t){return{id:e,type:"select",selected:t}}function da(e){return{item:e,type:"add"}}function fa(e){return{id:e,type:"remove"}}function ha(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function ut(e,t=new Set,n=!1){const o=[];for(const[i,a]of e){const r=t.has(i);!(a.selected===void 0&&!r)&&a.selected!==r&&(n&&(a.selected=r),o.push(st(a.id,r)))}return o}function J(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=s=>{t.delete(s)};return{on:s=>{e&&n&&t.delete(e),t.add(s);const l=()=>{i(s),e&&n&&t.add(e)};return Wn(l),{off:l}},off:i,trigger:s=>Promise.all(Array.from(t).map(l=>l(s))),hasListeners:o,fns:t}}function pa(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function mp(e,t,n,o,i){var a,r;const s=[];for(const l of e)(l.selected||l.id===i)&&(!l.parentNode||!Jr(l,o))&&(l.draggable||t&&typeof l.draggable>"u")&&s.push(Dt({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((a=l.computedPosition)==null?void 0:a.x)||0,y:n.y-((r=l.computedPosition)==null?void 0:r.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent}));return s}function No({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const a=n(i.id);a&&o.push(a)}return[e?o.find(i=>i.id===e):o[0],o]}function es(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function yp(e,t,n){const[o,i,a,r]=typeof e!="string"?es(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function _p(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=yp(i,e,o);a&&(i=a)}else t(new ke(Ie.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+r],[i[1][0]+a,i[1][1]+r]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[a,r,s,l]=es(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+l,i.range[0][1]+c+a],[i.range[1][0]+u-r,i.range[1][1]+c-s]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function bp({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function pi(e,t,n,o,i){const a=bp(e.dimensions,_p(e,n,o,i)),r=Gr(t,a);return{position:{x:r.x-((i==null?void 0:i.computedPosition.x)||0),y:r.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:r}}function Gn(e,t,n=se.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:r}=t??xp(e);switch((t==null?void 0:t.position)??n){case se.Top:return{x:o+a/2,y:i};case se.Right:return{x:o+a,y:i+r/2};case se.Bottom:return{x:o+a/2,y:i+r};case se.Left:return{x:o,y:i+r/2}}}function va(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function wp({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:r,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Kr({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:r/l.zoom,height:s/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Sp(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const a=t(e.source),r=t(e.target);return!a||!r?0:(n&&(i=o?e.zIndex:Math.max(a.computedPosition.z||0,r.computedPosition.z||0)),i)}var Ie=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ie||{});const ga={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class ke extends Error{constructor(t,...n){var o;super((o=ga[t])==null?void 0:o.call(ga,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function vi(e){return"clientX"in e}function dt(e,t){var n,o;const i=vi(e),a=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const Yn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function xp(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function ts(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Mo(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ma(e,t,n,o){const i=[];for(const a of t[n]||[])if(`${e.id}-${a.id}-${n}`!==o){const{x:r,y:s}=Gn(e,a);i.push({id:a.id||null,type:n,nodeId:e.id,x:r,y:s})}return i}function Ap(e,t,n,o,i,a){const{x:r,y:s}=dt(e),u=t.elementsFromPoint(r,s).find(g=>g.classList.contains("vue-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const m=gi(void 0,u),b=u.getAttribute("data-handleid"),w=a({nodeId:g,id:b,type:m});if(w){const v=i.find(I=>I.nodeId===g&&I.type===m&&I.id===b);return{handle:{id:b,type:m,nodeId:g,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:w}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const g of i){const m=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(m<=o){const b=a(g);m<=d&&(m<d?c=[{handle:g,validHandleResult:b}]:m===d&&c.push({handle:g,validHandleResult:b}),d=m)}}if(!c.length)return{handle:null,validHandleResult:ts()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:g})=>g.isValid),h=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:m})=>h?g.type==="target":f?m.isValid:!0)||c[0]}function ya(e,t,n,o,i,a,r,s,l,u,c){const d=a==="target",f=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:h,y:g}=dt(e),m=s.elementFromPoint(h,g),b=m!=null&&m.classList.contains("vue-flow__handle")?m:f,w=ts();if(b){w.handleDomNode=b;const v=gi(void 0,b),I=b.getAttribute("data-nodeid"),y=b.getAttribute("data-handleid"),N=b.classList.contains("connectable"),R=b.classList.contains("connectableend"),D={source:d?I:o,sourceHandle:d?y:i,target:d?o:I,targetHandle:d?i:y};w.connection=D,N&&R&&(n===At.Strict?d&&v==="source"||!d&&v==="target":I!==o||y!==i)&&(w.isValid=r(D,{edges:l,nodes:u,sourceNode:c(D.source),targetNode:c(D.target)}),w.endHandle={nodeId:I,handleId:y,type:v,position:w.isValid?b.getAttribute("data-handlepos"):null})}return w}function Ep({nodes:e,nodeId:t,handleId:n,handleType:o}){const i=[];for(let a=0;a<e.length;a++){const r=e[a],{handleBounds:s}=r;let l=[],u=[];s&&(l=ma(r,s,"source",`${t}-${n}-${o}`),u=ma(r,s,"target",`${t}-${n}-${o}`)),i.push(...l,...u)}return i}function gi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Np(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Mp=["production","prod"];function to(e,...t){ns()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ns(){return!Mp.includes("production")}function _a(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(r=>{const s=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...eo(r)}})}function jo(e,t,n,o,i,a=!1,r){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),Ve(()=>{r.blur()})):n([e])}function Ce(e){return typeof S(e)<"u"}function Dp(e,t,n,o){if(!e||!e.source||!e.target)return n(new ke(Ie.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return ft(e)?i=e:i={...e,id:Xr(e)},i=Yr(i,void 0,o),hp(i,t)?!1:i}function Cp(e,t,n,o,i,a){if(!t.source||!t.target)return a(new ke(Ie.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return a(new ke(Ie.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...l}=e,u={...l,id:i?Xr(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,u),u}function ba(e,t,n){const o={},i=[];for(let a=0;a<e.length;++a){const r=e[a];if(!bt(r)){n(new ke(Ie.NODE_INVALID,r==null?void 0:r.id)||`[ID UNKNOWN|INDEX ${a}]`);continue}const s=cp(r,t(r.id),r.parentNode);r.parentNode&&(o[r.parentNode]=!0),i[a]=s}for(const a of i){const r=t(a.parentNode)||i.find(s=>s.id===a.parentNode);a.parentNode&&!r&&n(new ke(Ie.NODE_MISSING_PARENT,a.id,a.parentNode)),(a.parentNode||o[a.id])&&(o[a.id]&&(a.isParent=!0),r&&(r.isParent=!0))}return i}function wa(e,t){e.clear();for(const n of t){const{id:o,source:i,target:a,sourceHandle:r=null,targetHandle:s=null}=n,l=`${i}-source-${r}`,u=`${a}-target-${s}`,c=e.get(l)||new Map,d=e.get(u)||new Map,f=Dt({edgeId:o,source:i,target:a,sourceHandle:r,targetHandle:s});e.set(l,c.set(`${a}-${s}`,f)),e.set(u,d.set(`${i}-${r}`,f))}}function Sa(e,t,n,o,i,a,r,s){const l=[];for(const u of e){const c=ft(u)?u:Dp(u,s,i,a);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new ke(Ie.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new ke(Ie.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new ke(Ie.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:s,nodes:r,sourceNode:d,targetNode:f})){i(new ke(Ie.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...Yr(c,h,a),sourceNode:d,targetNode:f})}return l}const xa=Symbol("vueFlow"),os=Symbol("nodeId"),is=Symbol("nodeRef"),Ip=Symbol("edgeId"),kp=Symbol("edgeRef"),no=Symbol("slots");function as(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:a,nodeExtent:r,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:g,nodesSelectionActive:m,selectNodesOnDrag:b,removeSelectedElements:w,addSelectedNodes:v,updateNodePositions:I,emits:y}=Ne(),{onStart:N,onDrag:R,onStop:D,onClick:O,el:$,disabled:M,id:_,selectable:H,dragHandle:K}=e,A=ie(!1);let T=[],k,B=null,z={x:void 0,y:void 0},V={x:0,y:0},G=null,U=!1,de=0,ne=!1;const q=$p(),ae=({x:te,y:oe})=>{z={x:te,y:oe};let Z=!1;if(T=T.map(p=>{const x={x:te-p.distance.x,y:oe-p.distance.y};n.value&&(x.x=o.value[0]*Math.round(x.x/o.value[0]),x.y=o.value[1]*Math.round(x.y/o.value[1]));const{computedPosition:P}=pi(p,x,y.error,r.value,p.parentNode?h(p.parentNode):void 0);return Z=Z||p.position.x!==P.x||p.position.y!==P.y,p.position=P,p}),!!Z&&(I(T,!0,!0),A.value=!0,G)){const[p,x]=No({id:_,dragItems:T,findNode:h});R({event:G,node:p,nodes:x})}},Y=()=>{if(!B)return;const[te,oe]=jr(V,B,c.value);if(te!==0||oe!==0){const Z={x:(z.x??0)-te/l.value.zoom,y:(z.y??0)-oe/l.value.zoom};f({x:te,y:oe})&&ae(Z)}de=requestAnimationFrame(Y)},X=(te,oe)=>{U=!0;const Z=h(_);!b.value&&!g.value&&Z&&(Z.selected||w()),Z&&_e(H)&&b.value&&jo(Z,g.value,v,w,m,!1,oe);const p=q(te);if(z=p,T=mp(a.value,d.value,p,h,_),T.length){const[x,P]=No({id:_,dragItems:T,findNode:h});N({event:te.sourceEvent,node:x,nodes:P})}},pe=(te,oe)=>{var Z;te.sourceEvent.type==="touchmove"&&te.sourceEvent.touches.length>1||(s.value===0&&X(te,oe),z=q(te),B=((Z=t.value)==null?void 0:Z.getBoundingClientRect())||null,V=dt(te.sourceEvent,B))},ue=(te,oe)=>{const Z=q(te);if(!ne&&U&&u.value&&(ne=!0,Y()),!U){const p=Z.xSnapped-(z.x??0),x=Z.ySnapped-(z.y??0);Math.sqrt(p*p+x*x)>s.value&&X(te,oe)}(z.x!==Z.xSnapped||z.y!==Z.ySnapped)&&T.length&&U&&(G=te.sourceEvent,V=dt(te.sourceEvent,B),ae(Z))},he=te=>{if(!A.value&&!g.value&&(O==null||O(te.sourceEvent)),A.value=!1,ne=!1,U=!1,z={x:void 0,y:void 0},cancelAnimationFrame(de),T.length){I(T,!1,!1);const[oe,Z]=No({id:_,dragItems:T,findNode:h});D({event:te.sourceEvent,node:oe,nodes:Z})}};return ye([()=>_e(M),$],([te,oe],Z,p)=>{if(oe){const x=He(oe);te||(k=pf().on("start",P=>pe(P,oe)).on("drag",P=>ue(P,oe)).on("end",P=>he(P)).filter(P=>{const E=P.target,F=_e(K);return!P.button&&(!i.value||!pa(E,`.${i.value}`,oe)&&(!F||pa(E,F,oe)))}),x.call(k)),p(()=>{x.on(".drag",null),k&&(k.on("start",null),k.on("drag",null),k.on("end",null))})}}),A}function Pp(){return{doubleClick:J(),click:J(),mouseEnter:J(),mouseMove:J(),mouseLeave:J(),contextMenu:J(),updateStart:J(),update:J(),updateEnd:J()}}function Tp(e,t){const n=Pp();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function $p(){const{viewport:e,snapGrid:t,snapToGrid:n}=Ne();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,r={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function bn(){return!0}function rs({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:r}){const{vueFlowRef:s,connectionMode:l,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:h,autoPanSpeed:g,findNode:m,panBy:b,startConnection:w,updateConnection:v,endConnection:I,emits:y,viewport:N,edges:R,nodes:D,isValidConnection:O}=Ne();let $=null,M=!1,_=null,H=null;function K(T){var k;const B=_e(n)==="target",z=vi(T),V=sa(T.target);if(z&&T.button===0||!z){let G=function(P){oe=dt(P,he);const{handle:E,validHandleResult:F}=Ap(P,V,Fn(oe,N.value,!1,[1,1]),u.value,p,re=>ya(P,re,l.value,_e(t),_e(e),B?"target":"source",ne,V,R.value,D.value,m));if(q=E,Z||(x(),Z=!0),$=F.connection,M=F.isValid,_=F.handleDomNode,!(M&&q&&(H!=null&&H.endHandle)&&F.endHandle&&H.endHandle.type===F.endHandle.type&&H.endHandle.nodeId===F.endHandle.nodeId&&H.endHandle.handleId===F.endHandle.handleId)){if(v(q&&M?Zr({x:q.x,y:q.y},N.value):oe,F.endHandle,Np(!!q,M)),H=F,!q&&!M&&!_)return Mo(te);$&&$.source!==$.target&&_&&(Mo(te),te=_,_.classList.add("connecting","vue-flow__handle-connecting"),_.classList.toggle("valid",M),_.classList.toggle("vue-flow__handle-valid",M))}},U=function(P){(q||_)&&$&&M&&(a?a(P,$):y.connect($)),y.connectEnd(P),i&&(r==null||r(P)),Mo(te),cancelAnimationFrame(ae),I(P),Z=!1,M=!1,$=null,_=null,V.removeEventListener("mousemove",G),V.removeEventListener("mouseup",U),V.removeEventListener("touchmove",G),V.removeEventListener("touchend",U)};const de=m(_e(t));let ne=_e(o)||O.value||bn;!ne&&de&&(ne=(B?de.isValidSourcePos:de.isValidTargetPos)||bn);let q,ae=0;const{x:Y,y:X}=dt(T),pe=V==null?void 0:V.elementFromPoint(Y,X),ue=gi(_e(i),pe),he=(k=s.value)==null?void 0:k.getBoundingClientRect();if(!he||!ue)return;let te,oe=dt(T,he),Z=!1;const p=Ep({nodes:D.value,nodeId:_e(t),handleId:_e(e),handleType:ue}),x=()=>{if(!h.value)return;const[P,E]=jr(oe,he,g.value);b({x:P,y:E}),ae=requestAnimationFrame(x)};w({nodeId:_e(t),handleId:_e(e),type:ue,position:(pe==null?void 0:pe.getAttribute("data-handlepos"))||se.Top},{x:Y-he.left,y:X-he.top}),y.connectStart({event:T,nodeId:_e(t),handleId:_e(e),handleType:ue}),V.addEventListener("mousemove",G),V.addEventListener("mouseup",U),V.addEventListener("touchmove",G),V.addEventListener("touchend",U)}}function A(T){if(!c.value)return;const k=_e(n)==="target";if(!d.value)y.clickConnectStart({event:T,nodeId:_e(t),handleId:_e(e)}),w({nodeId:_e(t),type:_e(n),handleId:_e(e)},void 0,!0);else{let B=_e(o)||O.value||bn;const z=m(_e(t));if(!B&&z&&(B=(k?z.isValidSourcePos:z.isValidTargetPos)||bn),z&&(typeof z.connectable>"u"?f.value:z.connectable)===!1)return;const V=sa(T.target),{connection:G,isValid:U}=ya(T,{nodeId:_e(t),id:_e(e),type:_e(n)},l.value,d.value.nodeId,d.value.handleId||null,d.value.type,B,V,R.value,D.value,m),de=G.source===G.target;U&&!de&&y.connect(G),y.clickConnectEnd(T),I(T,!0)}}return{handlePointerDown:K,handleClick:A}}function Rp(){return zt(os,"")}function ss(e){const t=e??Rp()??"",n=zt(is,ie(null)),{findNode:o,edges:i,emits:a}=Ne(),r=o(t);return r||a.error(new ke(Ie.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:ee(()=>o(r.parentNode)),connectedEdges:ee(()=>Qr([r],i.value))}}function Op(){return{doubleClick:J(),click:J(),mouseEnter:J(),mouseMove:J(),mouseLeave:J(),contextMenu:J(),dragStart:J(),drag:J(),dragStop:J()}}function Bp(e,t){const n=Op();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function ls(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:r,emits:s}=Ne();return(l,u=!1)=>{const c=a.value?i.value[0]:5,d=a.value?i.value[1]:5,f=u?4:1,h=l.x*c*f,g=l.y*d*f,m=[];for(const b of e.value)if(b.draggable||r&&typeof b.draggable>"u"){const w={x:b.computedPosition.x+h,y:b.computedPosition.y+g},{computedPosition:v}=pi(b,w,s.error,t.value,b.parentNode?o(b.parentNode):void 0);m.push({id:b.id,position:v,from:b.position,distance:{x:l.x,y:l.y},dimensions:b.dimensions})}n(m,!0,!1)}}const Do=.1;function rt(){return to("Viewport not initialized yet."),Promise.resolve(!1)}const zp={zoomIn:rt,zoomOut:rt,zoomTo:rt,fitView:rt,setCenter:rt,fitBounds:rt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:rt,setTransform:rt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Lp(e){function t(o,i){return new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Co(e.d3Selection,i,()=>{a(!0)}),o):a(!1)})}function n(o,i,a,r){return new Promise(s=>{const{x:l,y:u}=Gr({x:-o,y:-i},e.translateExtent),c=Bt.translate(-l,-u).scale(a);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Co(e.d3Selection,r,()=>{s(!0)}),c):s(!1)})}return ee(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,a)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Co(e.d3Selection,a==null?void 0:a.duration,()=>{r(!0)}),i):r(!1)}),setViewport:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),setTransform:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Do,includeHiddenNodes:!1,duration:0})=>{var a,r;const s=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((a=i.nodes)!=null&&a.length)||(r=i.nodes)!=null&&r.length&&i.nodes.includes(f.id))&&s.push(f);if(!s.length)return Promise.resolve(!1);const l=Wr(s),{x:u,y:c,zoom:d}=la(l,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Do,i.offset);return n(u,c,d,i==null?void 0:i.duration)},setCenter:(i,a,r)=>{const s=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,l=e.dimensions.width/2-i*s,u=e.dimensions.height/2-a*s;return n(l,u,s,r==null?void 0:r.duration)},fitBounds:(i,a={padding:Do})=>{const{x:r,y:s,zoom:l}=la(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,a.padding);return n(r,s,l,a==null?void 0:a.duration)},project:i=>Fn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x-a,y:i.y-r};return Fn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),s={x:i.x+a,y:i.y+r};return Zr(s,e.viewport)}return{x:0,y:0}}}:zp)}function Co(e,t=0,n){return e.transition().duration(t).on("end",n)}function Vp(e,t,n){const o=$a(!0);return o.run(()=>{const i=()=>{o.run(()=>{let m,b,w=!!(n.nodes.value.length||n.edges.value.length);m=Mt([e.modelValue,()=>{var v,I;return(I=(v=e.modelValue)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(b==null||b.pause(),n.setElements(v),!b&&!w&&v.length?w=!0:b==null||b.resume())}),b=Mt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([v,I])=>{var y;(y=e.modelValue)!=null&&y.value&&Array.isArray(e.modelValue.value)&&(m==null||m.pause(),e.modelValue.value=[...v,...I],Ve(()=>{m==null||m.resume()}))},{immediate:w}),Sn(()=>{m==null||m.stop(),b==null||b.stop()})})},a=()=>{o.run(()=>{let m,b,w=!!n.nodes.value.length;m=Mt([e.nodes,()=>{var v,I;return(I=(v=e.nodes)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(b==null||b.pause(),n.setNodes(v),!b&&!w&&v.length?w=!0:b==null||b.resume())}),b=Mt([n.nodes,()=>n.nodes.value.length],([v])=>{var I;(I=e.nodes)!=null&&I.value&&Array.isArray(e.nodes.value)&&(m==null||m.pause(),e.nodes.value=[...v],Ve(()=>{m==null||m.resume()}))},{immediate:w}),Sn(()=>{m==null||m.stop(),b==null||b.stop()})})},r=()=>{o.run(()=>{let m,b,w=!!n.edges.value.length;m=Mt([e.edges,()=>{var v,I;return(I=(v=e.edges)==null?void 0:v.value)==null?void 0:I.length}],([v])=>{v&&Array.isArray(v)&&(b==null||b.pause(),n.setEdges(v),!b&&!w&&v.length?w=!0:b==null||b.resume())}),b=Mt([n.edges,()=>n.edges.value.length],([v])=>{var I;(I=e.edges)!=null&&I.value&&Array.isArray(e.edges.value)&&(m==null||m.pause(),e.edges.value=[...v],Ve(()=>{m==null||m.resume()}))},{immediate:w}),Sn(()=>{m==null||m.stop(),b==null||b.stop()})})},s=()=>{o.run(()=>{ye(()=>t.maxZoom,()=>{t.maxZoom&&Ce(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{ye(()=>t.minZoom,()=>{t.minZoom&&Ce(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ye(()=>t.translateExtent,()=>{t.translateExtent&&Ce(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ye(()=>t.nodeExtent,()=>{t.nodeExtent&&Ce(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ye(()=>t.applyDefault,()=>{Ce(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const m=async b=>{let w=b;typeof t.autoConnect=="function"&&(w=await t.autoConnect(b)),w!==!1&&n.addEdges([w])};ye(()=>t.autoConnect,()=>{Ce(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ye(n.autoConnect,(b,w,v)=>{b?n.onConnect(m):n.hooks.value.connect.off(m),v(()=>{n.hooks.value.connect.off(m)})},{immediate:!0})})},h=()=>{const m=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const b of Object.keys(t)){const w=b;if(!m.includes(w)){const v=Me(()=>t[w]),I=n[w];Le(I)&&o.run(()=>{ye(v,y=>{Ce(y)&&(I.value=y)},{immediate:!0})})}}};(()=>{i(),a(),r(),l(),s(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function Hp(){return{edgesChange:J(),nodesChange:J(),nodeDoubleClick:J(),nodeClick:J(),nodeMouseEnter:J(),nodeMouseMove:J(),nodeMouseLeave:J(),nodeContextMenu:J(),nodeDragStart:J(),nodeDrag:J(),nodeDragStop:J(),nodesInitialized:J(),miniMapNodeClick:J(),miniMapNodeDoubleClick:J(),miniMapNodeMouseEnter:J(),miniMapNodeMouseMove:J(),miniMapNodeMouseLeave:J(),connect:J(),connectStart:J(),connectEnd:J(),clickConnectStart:J(),clickConnectEnd:J(),paneReady:J(),init:J(),move:J(),moveStart:J(),moveEnd:J(),selectionDragStart:J(),selectionDrag:J(),selectionDragStop:J(),selectionContextMenu:J(),selectionStart:J(),selectionEnd:J(),viewportChangeStart:J(),viewportChange:J(),viewportChangeEnd:J(),paneScroll:J(),paneClick:J(),paneContextMenu:J(),paneMouseEnter:J(),paneMouseMove:J(),paneMouseLeave:J(),edgeContextMenu:J(),edgeMouseEnter:J(),edgeMouseMove:J(),edgeMouseLeave:J(),edgeDoubleClick:J(),edgeClick:J(),edgeUpdateStart:J(),edgeUpdate:J(),edgeUpdateEnd:J(),updateNodeInternals:J(),error:J(e=>to(e.message))}}function Fp(e,t){As(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.fns.add(i),Wn(()=>{o.off(i)})}})}function us(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:hi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Xt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:vt.Bezier,style:{}},connectionMode:At.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Yn()?"Meta":"Control",zoomActivationKeyCode:Yn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Hp(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Gp=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Yp(e,t,n){const o=Lp(e),i=p=>{const x=p??[];e.hooks.updateNodeInternals.trigger(x)},a=p=>fp(p,e.nodes,e.edges),r=p=>dp(p,e.nodes,e.edges),s=p=>Qr(p,e.edges),l=({id:p,type:x,nodeId:P})=>{var E;return Array.from(((E=e.connectionLookup.get(`${P}-${x}-${p??null}`))==null?void 0:E.values())??[])},u=p=>{if(p)return t.value.get(p)},c=p=>{if(p)return n.value.get(p)},d=(p,x,P)=>{var E,F;const re=[];for(const L of p){const fe={id:L.id,type:"position",dragging:P,from:L.from};if(x&&(fe.position=L.position,L.parentNode)){const ge=u(L.parentNode);fe.position={x:fe.position.x-(((E=ge==null?void 0:ge.computedPosition)==null?void 0:E.x)??0),y:fe.position.y-(((F=ge==null?void 0:ge.computedPosition)==null?void 0:F.y)??0)}}re.push(fe)}re!=null&&re.length&&e.hooks.nodesChange.trigger(re)},f=p=>{if(!e.vueFlowRef)return;const x=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!x)return;const P=window.getComputedStyle(x),{m22:E}=new window.DOMMatrixReadOnly(P.transform),F=[];for(let re=0;re<p.length;++re){const L=p[re],fe=u(L.id);if(fe){const ge=eo(L.nodeElement);if(!!(ge.width&&ge.height&&(fe.dimensions.width!==ge.width||fe.dimensions.height!==ge.height||L.forceUpdate))){const Se=L.nodeElement.getBoundingClientRect();fe.dimensions=ge,fe.handleBounds.source=_a(".source",L.nodeElement,Se,E),fe.handleBounds.target=_a(".target",L.nodeElement,Se,E),F.push({id:fe.id,type:"dimensions",dimensions:ge})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),F.length&&e.hooks.nodesChange.trigger(F)},h=(p,x)=>{const P=new Set,E=new Set;for(const L of p)bt(L)?P.add(L.id):ft(L)&&E.add(L.id);const F=ut(t.value,P,!0),re=ut(n.value,E);if(e.multiSelectionActive){for(const L of P)F.push(st(L,x));for(const L of E)re.push(st(L,x))}F.length&&e.hooks.nodesChange.trigger(F),re.length&&e.hooks.edgesChange.trigger(re)},g=p=>{if(e.multiSelectionActive){const x=p.map(P=>st(P.id,!0));e.hooks.nodesChange.trigger(x);return}e.hooks.nodesChange.trigger(ut(t.value,new Set(p.map(x=>x.id)),!0)),e.hooks.edgesChange.trigger(ut(n.value))},m=p=>{if(e.multiSelectionActive){const x=p.map(P=>st(P.id,!0));e.hooks.edgesChange.trigger(x);return}e.hooks.edgesChange.trigger(ut(n.value,new Set(p.map(x=>x.id)))),e.hooks.nodesChange.trigger(ut(t.value,new Set,!0))},b=p=>{h(p,!0)},w=p=>{const P=(p||e.nodes).map(E=>(E.selected=!1,st(E.id,!1)));e.hooks.nodesChange.trigger(P)},v=p=>{const P=(p||e.edges).map(E=>(E.selected=!1,st(E.id,!1)));e.hooks.edgesChange.trigger(P)},I=p=>{if(!p||!p.length)return h([],!1);const x=p.reduce((P,E)=>{const F=st(E.id,!1);return bt(E)?P.nodes.push(F):P.edges.push(F),P},{nodes:[],edges:[]});x.nodes.length&&e.hooks.nodesChange.trigger(x.nodes),x.edges.length&&e.hooks.edgesChange.trigger(x.edges)},y=p=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([p,e.maxZoom]),e.minZoom=p},N=p=>{var x;(x=e.d3Zoom)==null||x.scaleExtent([e.minZoom,p]),e.maxZoom=p},R=p=>{var x;(x=e.d3Zoom)==null||x.translateExtent(p),e.translateExtent=p},D=p=>{e.nodeExtent=p,i()},O=p=>{var x;(x=e.d3Zoom)==null||x.clickDistance(p)},$=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},M=p=>{const x=p instanceof Function?p(e.nodes):p;!e.initialized&&!x.length||(e.nodes=ba(x,u,e.hooks.error.trigger))},_=p=>{const x=p instanceof Function?p(e.edges):p;if(!e.initialized&&!x.length)return;const P=Sa(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);wa(e.connectionLookup,P),e.edges=P},H=p=>{const x=p instanceof Function?p([...e.nodes,...e.edges]):p;!e.initialized&&!x.length||(M(x.filter(bt)),_(x.filter(ft)))},K=p=>{let x=p instanceof Function?p(e.nodes):p;x=Array.isArray(x)?x:[x];const P=ba(x,u,e.hooks.error.trigger),E=[];for(const F of P)E.push(da(F));E.length&&e.hooks.nodesChange.trigger(E)},A=p=>{let x=p instanceof Function?p(e.edges):p;x=Array.isArray(x)?x:[x];const P=Sa(x,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),E=[];for(const F of P)E.push(da(F));E.length&&e.hooks.edgesChange.trigger(E)},T=(p,x=!0,P=!1)=>{const E=p instanceof Function?p(e.nodes):p,F=Array.isArray(E)?E:[E],re=[],L=[];function fe(we){const Se=s(we);for(const Ae of Se)(!Ce(Ae.deletable)||Ae.deletable)&&L.push(ha(Ae.id,Ae.source,Ae.target,Ae.sourceHandle,Ae.targetHandle))}function ge(we){const Se=[];for(const Ae of e.nodes)Ae.parentNode===we&&Se.push(Ae);if(Se.length){for(const Ae of Se)re.push(fa(Ae.id));x&&fe(Se);for(const Ae of Se)ge(Ae.id)}}for(const we of F){const Se=typeof we=="string"?u(we):we;Se&&(Ce(Se.deletable)&&!Se.deletable||(re.push(fa(Se.id)),x&&fe([Se]),P&&ge(Se.id)))}L.length&&e.hooks.edgesChange.trigger(L),re.length&&e.hooks.nodesChange.trigger(re)},k=p=>{const x=p instanceof Function?p(e.edges):p,P=Array.isArray(x)?x:[x],E=[];for(const F of P){const re=typeof F=="string"?c(F):F;re&&(Ce(re.deletable)&&!re.deletable||E.push(ha(typeof F=="string"?F:F.id,re.source,re.target,re.sourceHandle,re.targetHandle)))}e.hooks.edgesChange.trigger(E)},B=(p,x,P=!0)=>Cp(p,x,e.edges,c,P,e.hooks.error.trigger),z=(p,x,P={replace:!1})=>{const E=c(p);if(!E)return;const F=typeof x=="function"?x(E):x;E.data=P.replace?F:{...E.data,...F}},V=p=>ca(p,e.nodes),G=p=>{const x=ca(p,e.edges);return wa(e.connectionLookup,x),x},U=(p,x,P={replace:!1})=>{const E=u(p);if(!E)return;const F=typeof x=="function"?x(E):x;P.replace?e.nodes.splice(e.nodes.indexOf(E),1,F):Object.assign(E,F)},de=(p,x,P={replace:!1})=>{const E=u(p);if(!E)return;const F=typeof x=="function"?x(E):x;E.data=P.replace?F:{...E.data,...F}},ne=(p,x,P=!1)=>{P?e.connectionClickStartHandle=p:e.connectionStartHandle=p,e.connectionEndHandle=null,e.connectionStatus=null,x&&(e.connectionPosition=x)},q=(p,x=null,P=null)=>{e.connectionStartHandle&&(e.connectionPosition=p,e.connectionEndHandle=x,e.connectionStatus=P)},ae=(p,x)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,x?e.connectionClickStartHandle=null:e.connectionStartHandle=null},Y=p=>{const x=up(p),P=x?null:Ut(p)?p:u(p.id);return!x&&!P?[null,null,x]:[x?p:Qo(P),P,x]},X=(p,x=!0,P=e.nodes)=>{const[E,F,re]=Y(p);if(!E)return[];const L=[];for(const fe of P||e.nodes){if(!re&&(fe.id===F.id||!fe.computedPosition))continue;const ge=Qo(fe),we=Jo(ge,E);(x&&we>0||we>=Number(E.width)*Number(E.height))&&L.push(fe)}return L},pe=(p,x,P=!0)=>{const[E]=Y(p);if(!E)return!1;const F=Jo(E,x);return P&&F>0||F>=Number(E.width)*Number(E.height)},ue=p=>{const{viewport:x,dimensions:P,d3Zoom:E,d3Selection:F,translateExtent:re}=e;if(!E||!F||!p.x&&!p.y)return!1;const L=Bt.translate(x.x+p.x,x.y+p.y).scale(x.zoom),fe=[[0,0],[P.width,P.height]],ge=E.constrain()(L,fe,re),we=e.viewport.x!==ge.x||e.viewport.y!==ge.y||e.viewport.zoom!==ge.k;return E.transform(F,ge),we},he=p=>{const x=p instanceof Function?p(e):p,P=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ce(x.defaultEdgeOptions)&&(e.defaultEdgeOptions=x.defaultEdgeOptions);const E=x.modelValue||x.nodes||x.edges?[]:void 0;E&&(x.modelValue&&E.push(...x.modelValue),x.nodes&&E.push(...x.nodes),x.edges&&E.push(...x.edges),H(E));const F=()=>{Ce(x.maxZoom)&&N(x.maxZoom),Ce(x.minZoom)&&y(x.minZoom),Ce(x.translateExtent)&&R(x.translateExtent)};for(const re of Object.keys(x)){const L=re,fe=x[L];![...Gp,...P].includes(L)&&Ce(fe)&&(e[L]=fe)}Vo(()=>e.d3Zoom).not.toBeNull().then(F),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:H,setNodes:M,setEdges:_,addNodes:K,addEdges:A,removeNodes:T,removeEdges:k,findNode:u,findEdge:c,updateEdge:B,updateEdgeData:z,updateNode:U,updateNodeData:de,applyEdgeChanges:G,applyNodeChanges:V,addSelectedElements:b,addSelectedNodes:g,addSelectedEdges:m,setMinZoom:y,setMaxZoom:N,setTranslateExtent:R,setNodeExtent:D,setPaneClickDistance:O,removeSelectedElements:I,removeSelectedNodes:w,removeSelectedEdges:v,startConnection:ne,updateConnection:q,endConnection:ae,setInteractive:$,setState:he,getIntersectingNodes:X,getIncomers:a,getOutgoers:r,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:pe,panBy:ue,fitView:p=>o.value.fitView(p),zoomIn:p=>o.value.zoomIn(p),zoomOut:p=>o.value.zoomOut(p),zoomTo:(p,x)=>o.value.zoomTo(p,x),setViewport:(p,x)=>o.value.setViewport(p,x),setTransform:(p,x)=>o.value.setTransform(p,x),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(p,x,P)=>o.value.setCenter(p,x,P),fitBounds:(p,x)=>o.value.fitBounds(p,x),project:p=>o.value.project(p),screenToFlowCoordinate:p=>o.value.screenToFlowCoordinate(p),flowToScreenCoordinate:p=>o.value.flowToScreenCoordinate(p),toObject:()=>{const p=[],x=[];for(const P of e.nodes){const{computedPosition:E,handleBounds:F,selected:re,dimensions:L,isParent:fe,resizing:ge,dragging:we,events:Se,...Ae}=P;p.push(Ae)}for(const P of e.edges){const{selected:E,sourceNode:F,targetNode:re,events:L,...fe}=P;x.push(fe)}return JSON.parse(JSON.stringify({nodes:p,edges:x,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:p=>new Promise(x=>{const{nodes:P,edges:E,position:F,zoom:re,viewport:L}=p;if(P&&M(P),E&&_(E),L!=null&&L.x&&(L!=null&&L.y)||F){const fe=(L==null?void 0:L.x)||F[0],ge=(L==null?void 0:L.y)||F[1],we=(L==null?void 0:L.zoom)||re||e.viewport.zoom;return Vo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:fe,y:ge,zoom:we}).then(()=>{x(!0)})})}else x(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const p=us();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const x=Bt.translate(p.defaultViewport.x??0,p.defaultViewport.y??0).scale(Et(p.defaultViewport.zoom??1,p.minZoom,p.maxZoom)),P=e.viewportRef.getBoundingClientRect(),E=[[0,0],[P.width,P.height]],F=e.d3Zoom.constrain()(x,E,p.translateExtent);e.d3Zoom.transform(e.d3Selection,F)}he(p)},$destroy:()=>{}}}const Up=["data-id","data-handleid","data-nodeid","data-handlepos"],Xp={name:"Handle",compatConfig:{MODE:3}},tn=ve({...Xp,props:{id:{default:null},type:{},position:{default:()=>se.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Oa(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Me(()=>n.type??"source"),i=Me(()=>n.isValidConnection??null),{connectionStartHandle:a,connectionClickStartHandle:r,connectionEndHandle:s,vueFlowRef:l,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Ne(),{id:f,node:h,nodeEl:g,connectedEdges:m}=ss(),b=ie(),w=Me(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),v=Me(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),I=Me(()=>{var M,_,H,K,A,T;return((M=a.value)==null?void 0:M.nodeId)===f&&((_=a.value)==null?void 0:_.handleId)===e.id&&((H=a.value)==null?void 0:H.type)===o.value||((K=s.value)==null?void 0:K.nodeId)===f&&((A=s.value)==null?void 0:A.handleId)===e.id&&((T=s.value)==null?void 0:T.type)===o.value}),y=Me(()=>{var M,_,H;return((M=r.value)==null?void 0:M.nodeId)===f&&((_=r.value)==null?void 0:_.handleId)===e.id&&((H=r.value)==null?void 0:H.type)===o.value}),{handlePointerDown:N,handleClick:R}=rs({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),D=ee(()=>typeof e.connectable=="string"&&e.connectable==="single"?!m.value.some(M=>{const _=M[`${o.value}Handle`];return M[o.value]!==f?!1:_?_===e.id:!0}):typeof e.connectable=="number"?m.value.filter(M=>{const _=M[`${o.value}Handle`];return M[o.value]!==f?!1:_?_===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(h,m.value):Ce(e.connectable)?e.connectable:u.value);ze(()=>{var M;if(!h.dimensions.width||!h.dimensions.height)return;const _=(M=h.handleBounds[o.value])==null?void 0:M.find(z=>z.id===e.id);if(!l.value||_)return;const H=l.value.querySelector(".vue-flow__transformationpane");if(!g.value||!b.value||!H||!e.id)return;const K=g.value.getBoundingClientRect(),A=b.value.getBoundingClientRect(),T=window.getComputedStyle(H),{m22:k}=new window.DOMMatrixReadOnly(T.transform),B={id:e.id,position:e.position,x:(A.left-K.left)/k,y:(A.top-K.top)/k,...eo(b.value)};h.handleBounds[o.value]=[...h.handleBounds[o.value]??[],B]}),ti(()=>{const M=h.handleBounds[o.value];M&&(h.handleBounds[o.value]=M.filter(_=>_.id!==e.id))});function O(M){const _=vi(M);D.value&&w.value&&(_&&M.button===0||!_)&&N(M)}function $(M){!f||!r.value&&!w.value||D.value&&R(M)}return t({handleClick:R,handlePointerDown:N,onClick:$,onPointerDown:O}),(M,_)=>(Q(),le("div",{ref_key:"handle",ref:b,"data-id":`${S(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":S(f),"data-handlepos":M.position,class:Ye(["vue-flow__handle",[`vue-flow__handle-${M.position}`,`vue-flow__handle-${e.id}`,S(c),S(d),o.value,{connectable:D.value,connecting:y.value,connectablestart:w.value,connectableend:v.value,connectionindicator:D.value&&(w.value&&!I.value||v.value&&I.value)}]]),onMousedown:O,onTouchstartPassive:O,onClick:$},[wt(M.$slots,"default",{id:M.id})],42,Up))}}),oo=function({sourcePosition:e=se.Bottom,targetPosition:t=se.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a,data:r}){const s=r.label||n;return[xe(tn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof s!="string"&&s?xe(s):xe("div",{innerHTML:s}),xe(tn,{type:"source",position:e,connectable:o,isValidConnection:a})]};oo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];oo.inheritAttrs=!1;oo.compatConfig={MODE:3};const Zp=oo,io=function({targetPosition:e=se.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const a=i.label||t;return[xe(tn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof a!="string"&&a?xe(a):xe("div",{innerHTML:a})]};io.props=["targetPosition","label","isValidTargetPos","connectable","data"];io.inheritAttrs=!1;io.compatConfig={MODE:3};const Kp=io,ao=function({sourcePosition:e=se.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const a=i.label||t;return[typeof a!="string"&&a?xe(a):xe("div",{innerHTML:a}),xe(tn,{type:"source",position:e,connectable:n,isValidConnection:o})]};ao.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ao.inheritAttrs=!1;ao.compatConfig={MODE:3};const Wp=ao,qp=["transform"],Qp=["width","height","x","y","rx","ry"],Jp=["y"],jp={name:"EdgeText",compatConfig:{MODE:3}},ev=ve({...jp,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ie({x:0,y:0,width:0,height:0}),n=ie(null),o=ee(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ze(i),ye([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,r)=>(Q(),le("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(Q(),le("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:Qe(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,Qp)):Ee("",!0),C("text",Cs(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[wt(a.$slots,"default",{},()=>[typeof a.label!="string"?(Q(),Pe(Ds(a.label),{key:0})):(Q(),le(Te,{key:1},[Xn(j(a.label),1)],64))])],16,Jp)],8,qp))}}),tv=["id","d","marker-end","marker-start"],nv=["d","stroke-width"],ov={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ro=ve({...ov,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Oa(e,["interactionWidth","labelShowBg"]),o=ie(null),i=ie(null),a=ie(null),r=Ms();return t({pathEl:o,interactionEl:i,labelEl:a}),(s,l)=>(Q(),le(Te,null,[C("path",{id:s.id,ref_key:"pathEl",ref:o,d:s.path,style:Qe(n.style),class:Ye(["vue-flow__edge-path",S(r).class]),"marker-end":s.markerEnd,"marker-start":s.markerStart},null,14,tv),s.interactionWidth?(Q(),le("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,nv)):Ee("",!0),s.label&&s.labelX&&s.labelY?(Q(),Pe(ev,{key:1,ref_key:"labelEl",ref:a,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Ee("",!0)],64))}});function cs({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,r=Math.abs(o-t)/2,s=o<t?o+r:o-r;return[a,s,i,r]}function ds({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:r,targetControlY:s}){const l=e*.125+i*.375+r*.375+n*.125,u=t*.125+a*.375+s*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function wn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Aa({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let r,s;switch(e){case se.Left:r=t-wn(t-o,a),s=n;break;case se.Right:r=t+wn(o-t,a),s=n;break;case se.Top:r=t,s=n-wn(n-i,a);break;case se.Bottom:r=t,s=n+wn(i-n,a);break}return[r,s]}function fs(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top,curvature:s=.25}=e,[l,u]=Aa({pos:o,x1:t,y1:n,x2:i,y2:a,c:s}),[c,d]=Aa({pos:r,x1:i,y1:a,x2:t,y2:n,c:s}),[f,h,g,m]=ds({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${i},${a}`,f,h,g,m]}function Ea({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,r;switch(e){case se.Left:case se.Right:a=.5*(t+o),r=n;break;case se.Top:case se.Bottom:a=t,r=.5*(n+i);break}return[a,r]}function hs(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top}=e,[s,l]=Ea({pos:o,x1:t,y1:n,x2:i,y2:a}),[u,c]=Ea({pos:r,x1:i,y1:a,x2:t,y2:n}),[d,f,h,g]=ds({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${s},${l} ${u},${c} ${i},${a}`,d,f,h,g]}const Na={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}};function iv({source:e,sourcePosition:t=se.Bottom,target:n}){return t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ma(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function av({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:o=se.Top,center:i,offset:a}){const r=Na[t],s=Na[o],l={x:e.x+r.x*a,y:e.y+r.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},c=iv({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,g,m;const b={x:0,y:0},w={x:0,y:0},[v,I,y,N]=cs({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*s[d]===-1){g=i.x??v,m=i.y??I;const D=[{x:g,y:l.y},{x:g,y:u.y}],O=[{x:l.x,y:m},{x:u.x,y:m}];r[d]===f?h=d==="x"?D:O:h=d==="x"?O:D}else{const D=[{x:l.x,y:u.y}],O=[{x:u.x,y:l.y}];if(d==="x"?h=r.x===f?O:D:h=r.y===f?D:O,t===o){const K=Math.abs(e[d]-n[d]);if(K<=a){const A=Math.min(a-1,a-K);r[d]===f?b[d]=(l[d]>e[d]?-1:1)*A:w[d]=(u[d]>n[d]?-1:1)*A}}if(t!==o){const K=d==="x"?"y":"x",A=r[d]===s[K],T=l[K]>u[K],k=l[K]<u[K];(r[d]===1&&(!A&&T||A&&k)||r[d]!==1&&(!A&&k||A&&T))&&(h=d==="x"?D:O)}const $={x:l.x+b.x,y:l.y+b.y},M={x:u.x+w.x,y:u.y+w.y},_=Math.max(Math.abs($.x-h[0].x),Math.abs(M.x-h[0].x)),H=Math.max(Math.abs($.y-h[0].y),Math.abs(M.y-h[0].y));_>=H?(g=($.x+M.x)/2,m=h[0].y):(g=h[0].x,m=($.y+M.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+w.x,y:u.y+w.y},n],g,m,y,N]}function rv(e,t,n,o){const i=Math.min(Ma(e,t)/2,Ma(t,n)/2,o),{x:a,y:r}=t;if(e.x===a&&a===n.x||e.y===r&&r===n.y)return`L${a} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*u},${r}Q ${a},${r} ${a},${r+i*c}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${r+i*l}Q ${a},${r} ${a+i*s},${r}`}function ei(e){const{sourceX:t,sourceY:n,sourcePosition:o=se.Bottom,targetX:i,targetY:a,targetPosition:r=se.Top,borderRadius:s=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,g,m]=av({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:a},targetPosition:r,center:{x:l,y:u},offset:c});return[d.reduce((w,v,I)=>{let y;return I>0&&I<d.length-1?y=rv(d[I-1],v,d[I+1],s):y=`${I===0?"M":"L"}${v.x} ${v.y}`,w+=y,w},""),f,h,g,m]}function sv(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[a,r,s,l]=cs({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,a,r,s,l]}const lv=ve({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=sv(e);return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),uv=lv,cv=ve({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ei({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),ps=cv,dv=ve({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>xe(ps,{...e,...t,borderRadius:0})}}),fv=dv,hv=ve({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=fs({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),pv=hv,vv=ve({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=hs({...e,sourcePosition:e.sourcePosition??se.Bottom,targetPosition:e.targetPosition??se.Top});return xe(ro,{path:n,labelX:o,labelY:i,...t,...e})}}}),gv=vv,mv={input:Wp,default:Zp,output:Kp},yv={default:pv,straight:uv,step:fv,smoothstep:ps,simplebezier:gv};function _v(e,t,n){const o=ee(()=>m=>t.value.get(m)),i=ee(()=>m=>n.value.get(m)),a=ee(()=>{const m={...yv,...e.edgeTypes},b=Object.keys(m);for(const w of e.edges)w.type&&!b.includes(w.type)&&(m[w.type]=w.type);return m}),r=ee(()=>{const m={...mv,...e.nodeTypes},b=Object.keys(m);for(const w of e.nodes)w.type&&!b.includes(w.type)&&(m[w.type]=w.type);return m}),s=ee(()=>e.onlyRenderVisibleElements?qr(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=ee(()=>{if(e.onlyRenderVisibleElements){const m=[];for(const b of e.edges){const w=t.value.get(b.source),v=t.value.get(b.target);wp({sourcePos:w.computedPosition||{x:0,y:0},targetPos:v.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:v.dimensions.width,targetHeight:v.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&m.push(b)}return m}return e.edges}),u=ee(()=>[...s.value,...l.value]),c=ee(()=>{const m=[];for(const b of e.nodes)b.selected&&m.push(b);return m}),d=ee(()=>{const m=[];for(const b of e.edges)b.selected&&m.push(b);return m}),f=ee(()=>[...c.value,...d.value]),h=ee(()=>{const m=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&m.push(b);return m}),g=ee(()=>s.value.length>0&&h.value.length===s.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:a,getNodeTypes:r,getEdges:l,getNodes:s,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:g}}class gt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=nn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??gt.instance;return gt.instance=o??new gt,n&&(n.config.globalProperties.$vueFlowStorage=gt.instance),gt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=us(),i=mt(o),a={};for(const[f,h]of Object.entries(i.hooks)){const g=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;a[g]=h.on}const r={};for(const[f,h]of Object.entries(i.hooks))r[f]=h.trigger;const s=ee(()=>{const f=new Map;for(const h of i.nodes)f.set(h.id,h);return f}),l=ee(()=>{const f=new Map;for(const h of i.edges)f.set(h.id,h);return f}),u=_v(i,s,l),c=Yp(i,s,l);c.setState({...i,...n});const d={...a,...u,...c,...Sc(i),nodeLookup:s,edgeLookup:l,emits:r,id:t,vueFlowVersion:"1.41.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ne(e){const t=gt.getInstance(),n=Ra(),o=typeof e=="object",i=o?e:{id:e},a=i.id,r=a??(n==null?void 0:n.vueFlowId);let s;if(n){const l=zt(xa,null);typeof l<"u"&&l!==null&&(!r||l.id===r)&&(s=l)}if(s||r&&(s=t.get(r)),!s||r&&s.id!==r){const l=a??t.getId(),u=t.create(l,i);s=u,(n??$a(!0)).run(()=>{ye(u.applyDefault,(d,f,h)=>{const g=b=>{u.applyNodeChanges(b)},m=b=>{u.applyEdgeChanges(b)};d?(u.onNodesChange(g),u.onEdgesChange(m)):(u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(m)),h(()=>{u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(m)})},{immediate:!0}),Wn(()=>{if(s){const d=t.get(s.id);d?d.$destroy():to(`No store instance found for id ${s.id} in storage.`)}})})}else o&&s.setState(i);if(n&&(Pt(xa,s),n.vueFlowId=s.id),o){const l=nn();(l==null?void 0:l.type.name)!=="VueFlow"&&s.emits.error(new ke(Ie.USEVUEFLOW_OPTIONS))}return s}function bv(e){const{emits:t,dimensions:n}=Ne();let o;ze(()=>{const i=e.value,a=()=>{if(!i)return;const r=eo(i);(r.width===0||r.height===0)&&t.error(new ke(Ie.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};a(),window.addEventListener("resize",a),i&&(o=new ResizeObserver(()=>a()),o.observe(i)),Ba(()=>{window.removeEventListener("resize",a),o&&i&&o.unobserve(i)})})}const wv={name:"UserSelection",compatConfig:{MODE:3}},Sv=ve({...wv,props:{userSelectionRect:{}},setup(e){return(t,n)=>(Q(),le("div",{class:"vue-flow__selection vue-flow__container",style:Qe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),xv=["tabIndex"],Av={name:"NodesSelection",compatConfig:{MODE:3}},Ev=ve({...Av,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:r}=Ne(),s=ls(),l=ie(null),u=as({el:l,onStart(g){t.selectionDragStart(g)},onDrag(g){t.selectionDrag(g)},onStop(g){t.selectionDragStop(g)}});ze(()=>{var g;a.value||(g=l.value)==null||g.focus({preventScroll:!0})});const c=ee(()=>Wr(o.value)),d=ee(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(g){t.selectionContextMenu({event:g,nodes:o.value})}function h(g){a||kt[g.key]&&s({x:kt[g.key].x,y:kt[g.key].y},g.shiftKey)}return(g,m)=>!S(r)&&c.value.width&&c.value.height?(Q(),le("div",{key:0,class:Ye(["vue-flow__nodesselection vue-flow__container",S(i)]),style:Qe({transform:`translate(${S(n).x}px,${S(n).y}px) scale(${S(n).zoom})`})},[C("div",{ref_key:"el",ref:l,class:Ye([{dragging:S(u)},"vue-flow__nodesselection-rect"]),style:Qe(d.value),tabIndex:S(a)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,xv)],6)):Ee("",!0)}});function Nv(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Mv={name:"Pane",compatConfig:{MODE:3}},Dv=ve({...Mv,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:a,removeSelectedElements:r,panOnDrag:s,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:g,selectionMode:m,deleteKeyCode:b,multiSelectionKeyCode:w,multiSelectionActive:v,edgeLookup:I,nodeLookup:y}=Ne(),N=ie(null),R=ie(0),D=ie(0),O=ie(),$=ie(new Map),M=Me(()=>u.value&&(e.isSelecting||a.value));let _=!1,H=!1;const K=Zt(b,{actInsideInputWithModifier:!1}),A=Zt(w);ye(K,ne=>{ne&&(h(f.value),g(d.value),c.value=!1)}),ye(A,ne=>{v.value=ne});function T(ne,q){return ae=>{ae.target===q&&(ne==null||ne(ae))}}function k(){a.value=!1,l.value=null,R.value=0,D.value=0}function B(ne){if(_){_=!1;return}i.paneClick(ne),r(),c.value=!1}function z(ne){var q;if(Array.isArray(s.value)&&((q=s.value)!=null&&q.includes(2))){ne.preventDefault();return}i.paneContextMenu(ne)}function V(ne){i.paneScroll(ne)}function G(ne){var q,ae,Y,X,pe;if(O.value=(q=t.value)==null?void 0:q.getBoundingClientRect(),!u.value||!e.isSelecting||ne.button!==0||ne.target!==N.value||!O.value)return;(Y=(ae=ne.target)==null?void 0:ae.setPointerCapture)==null||Y.call(ae,ne.pointerId);const{x:ue,y:he}=Nv(ne,O.value);H=!0,_=!1,$.value=new Map;for(const[te,oe]of I.value)$.value.set(oe.source,((X=$.value.get(oe.source))==null?void 0:X.add(te))||new Set([te])),$.value.set(oe.target,((pe=$.value.get(oe.target))==null?void 0:pe.add(te))||new Set([te]));r(),l.value={width:0,height:0,startX:ue,startY:he,x:ue,y:he},i.selectionStart(ne)}function U(ne){if(!O.value||!l.value)return;_=!0;const{x:q,y:ae}=dt(ne,O.value),{startX:Y=0,startY:X=0}=l.value,pe={startX:Y,startY:X,x:q<Y?q:Y,y:ae<X?ae:X,width:Math.abs(q-Y),height:Math.abs(ae-X)},ue=qr(n.value,pe,o.value,m.value===hi.Partial,!0),he=new Set,te=new Set;for(const oe of ue){te.add(oe.id);const Z=$.value.get(oe.id);if(Z)for(const p of Z)he.add(p)}if(R.value!==te.size){R.value=te.size;const oe=ut(y.value,te,!0);i.nodesChange(oe)}if(D.value!==he.size){D.value=he.size;const oe=ut(I.value,he);i.edgesChange(oe)}l.value=pe,a.value=!0,c.value=!1}function de(ne){var q;ne.button!==0||!H||((q=ne.target)==null||q.releasePointerCapture(ne.pointerId),!a.value&&l.value&&ne.target===N.value&&B(ne),R.value>0&&(c.value=!0),k(),i.selectionEnd(ne),e.selectionKeyPressed&&(_=!1),H=!1)}return(ne,q)=>(Q(),le("div",{ref_key:"container",ref:N,class:Ye(["vue-flow__pane vue-flow__container",{selection:ne.isSelecting}]),onClick:q[0]||(q[0]=ae=>M.value?void 0:T(B,N.value)(ae)),onContextmenu:q[1]||(q[1]=ae=>T(z,N.value)(ae)),onWheelPassive:q[2]||(q[2]=ae=>T(V,N.value)(ae)),onPointerenter:q[3]||(q[3]=ae=>M.value?void 0:S(i).paneMouseEnter(ae)),onPointerdown:q[4]||(q[4]=ae=>M.value?G(ae):S(i).paneMouseMove(ae)),onPointermove:q[5]||(q[5]=ae=>M.value?U(ae):S(i).paneMouseMove(ae)),onPointerup:q[6]||(q[6]=ae=>M.value?de(ae):void 0),onPointerleave:q[7]||(q[7]=ae=>S(i).paneMouseLeave(ae))},[wt(ne.$slots,"default"),S(a)&&S(l)?(Q(),Pe(Sv,{key:0,"user-selection-rect":S(l)},null,8,["user-selection-rect"])):Ee("",!0),S(c)&&S(f).length?(Q(),Pe(Ev,{key:1})):Ee("",!0)],34))}}),Cv={name:"Transform",compatConfig:{MODE:3}},Iv=ve({...Cv,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Ne(),i=ee(()=>n.value?!o.value:!1),a=ee(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(r,s)=>(Q(),le("div",{class:"vue-flow__transformationpane vue-flow__container",style:Qe({transform:a.value,opacity:i.value?0:void 0})},[wt(r.$slots,"default")],4))}}),kv={name:"Viewport",compatConfig:{MODE:3}},Pv=ve({...kv,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:r,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:g,preventScrolling:m,noWheelClassName:b,noPanClassName:w,emits:v,connectionStartHandle:I,userSelectionActive:y,paneDragging:N,d3Zoom:R,d3Selection:D,d3ZoomHandler:O,viewport:$,viewportRef:M,paneClickDistance:_}=Ne();bv(M);const H=ie(!1),K=ie(!1);let A=null,T=!1,k=0,B={x:0,y:0,zoom:0};const z=Zt(s),V=Zt(r),G=Zt(a),U=Me(()=>!V.value&&(z.value||d.value)),de=Me(()=>z.value||l.value),ne=Me(()=>V.value||r.value===!0&&U.value!==!0);ze(()=>{if(!M.value){to("Viewport element is missing");return}const ue=M.value,he=ue.getBoundingClientRect(),te=ip().clickDistance(_.value).scaleExtent([t.value,n.value]).translateExtent(i.value),oe=He(ue).call(te),Z=oe.on("wheel.zoom"),p=Bt.translate(o.value.x??0,o.value.y??0).scale(Et(o.value.zoom??1,t.value,n.value)),x=[[0,0],[he.width,he.height]],P=te.constrain()(p,x,i.value);te.transform(oe,P),te.wheelDelta(ae),R.value=te,D.value=oe,O.value=Z,$.value={x:P.x,y:P.y,zoom:P.k},te.on("start",E=>{var F;if(!E.sourceEvent)return null;k=E.sourceEvent.button,H.value=!0;const re=X(E.transform);((F=E.sourceEvent)==null?void 0:F.type)==="mousedown"&&(N.value=!0),B=re,v.viewportChangeStart(re),v.moveStart({event:E,flowTransform:re})}),te.on("end",E=>{if(!E.sourceEvent)return null;if(H.value=!1,N.value=!1,q(U.value,k??0)&&!T&&v.paneContextMenu(E.sourceEvent),T=!1,Y(B,E.transform)){const F=X(E.transform);B=F,v.viewportChangeEnd(F),v.moveEnd({event:E,flowTransform:F})}}),te.filter(E=>{var F,re,L;const fe=G.value||g.value,ge=h.value&&E.ctrlKey,we=E.button;if((U.value===!0||Array.isArray(U.value)&&U.value.includes(1))&&we===1&&E.type==="mousedown"&&((F=E.target)!=null&&F.closest(".vue-flow__node")||(re=E.target)!=null&&re.closest(".vue-flow__edge")))return!0;if(!U.value&&!fe&&!de.value&&!f.value&&!h.value||y.value||!f.value&&E.type==="dblclick"||pe(E,b.value)&&E.type==="wheel"||pe(E,w.value)&&(E.type!=="wheel"||de.value&&E.type==="wheel"&&!G.value)||!h.value&&E.ctrlKey&&E.type==="wheel"||!fe&&!de.value&&!ge&&E.type==="wheel")return!1;if(!h&&E.type==="touchstart"&&((L=E.touches)==null?void 0:L.length)>1)return E.preventDefault(),!1;if(!U.value&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(U.value)&&!U.value.includes(we)&&(E.type==="mousedown"||E.type==="touchstart"))return!1;const Se=Array.isArray(U.value)&&U.value.includes(we)||!we||we<=1;return(!E.ctrlKey||E.type==="wheel")&&Se}),ye([y,U],()=>{y.value&&!H.value?te.on("zoom",null):y.value||te.on("zoom",E=>{$.value={x:E.transform.x,y:E.transform.y,zoom:E.transform.k};const F=X(E.transform);T=q(U.value,k??0),v.viewportChange(F),v.move({event:E,flowTransform:F})})},{immediate:!0}),ye([y,de,u,G,h,m,b],()=>{de.value&&!G.value&&!y.value?oe.on("wheel.zoom",E=>{if(pe(E,b.value))return!1;const F=G.value||g.value,re=h.value&&E.ctrlKey;if(!(!m.value||de.value||F||re))return!1;E.preventDefault(),E.stopImmediatePropagation();const fe=oe.property("__zoom").k||1,ge=Yn();if(E.ctrlKey&&h.value&&ge){const vs=Xe(E),gs=ae(E),ms=fe*2**gs;te.scaleTo(oe,ms,vs,E);return}const we=E.deltaMode===1?20:1;let Se=u.value===Xt.Vertical?0:E.deltaX*we,Ae=u.value===Xt.Horizontal?0:E.deltaY*we;!ge&&E.shiftKey&&u.value!==Xt.Vertical&&!Se&&Ae&&(Se=Ae,Ae=0),te.translateBy(oe,-(Se/fe)*c.value,-(Ae/fe)*c.value);const Nt=X(oe.property("__zoom"));A&&clearTimeout(A),K.value?(v.move({event:E,flowTransform:Nt}),v.viewportChange(Nt),A=setTimeout(()=>{v.moveEnd({event:E,flowTransform:Nt}),v.viewportChangeEnd(Nt),K.value=!1},150)):(K.value=!0,v.moveStart({event:E,flowTransform:Nt}),v.viewportChangeStart(Nt))},{passive:!1}):typeof Z<"u"&&oe.on("wheel.zoom",function(E,F){const re=!m.value&&E.type==="wheel"&&!E.ctrlKey,L=G.value||g.value,fe=h.value&&E.ctrlKey;if(!L&&!l.value&&!fe&&E.type==="wheel"||re||pe(E,b.value))return null;E.preventDefault(),Z.call(this,E,F)},{passive:!1})},{immediate:!0})});function q(ue,he){return he===2&&Array.isArray(ue)&&ue.includes(2)}function ae(ue){const he=ue.ctrlKey&&Yn()?10:1;return-ue.deltaY*(ue.deltaMode===1?.05:ue.deltaMode?1:.002)*he}function Y(ue,he){return ue.x!==he.x&&!Number.isNaN(he.x)||ue.y!==he.y&&!Number.isNaN(he.y)||ue.zoom!==he.k&&!Number.isNaN(he.k)}function X(ue){return{x:ue.x,y:ue.y,zoom:ue.k}}function pe(ue,he){return ue.target.closest(`.${he}`)}return(ue,he)=>(Q(),le("div",{ref_key:"viewportRef",ref:M,class:"vue-flow__viewport vue-flow__container"},[W(Dv,{"is-selecting":ne.value,"selection-key-pressed":S(V),class:Ye({connecting:!!S(I),dragging:S(N),draggable:S(d)===!0||Array.isArray(S(d))&&S(d).includes(0)})},{default:ce(()=>[W(Iv,null,{default:ce(()=>[wt(ue.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Tv=["id"],$v=["id"],Rv=["id"],Ov={name:"A11yDescriptions",compatConfig:{MODE:3}},Bv=ve({...Ov,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ne();return(i,a)=>(Q(),le(Te,null,[C("div",{id:`${S(Vr)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+j(S(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Tv),C("div",{id:`${S(Hr)}-${S(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,$v),S(n)?Ee("",!0):(Q(),le("div",{key:0,id:`${S(lp)}-${S(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},j(S(o)),9,Rv))],64))}});function zv(){const e=Ne();ye(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Lv(e,t,n){return n===se.Left?e-t:n===se.Right?e+t:e}function Vv(e,t,n){return n===se.Top?e-t:n===se.Bottom?e+t:e}const mi=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=se.Top,type:i}){return xe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Lv(t,e,o),cy:Vv(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};mi.props=["radius","centerX","centerY","position","type"];mi.compatConfig={MODE:3};const Da=mi,Hv=ve({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:r,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:g,elementsSelectable:m,edgesUpdatable:b,edgesFocusable:w}=Ne(),v=ee(()=>c(e.id)),I=Tp(v.value,a),y=zt(no),N=nn(),R=ie(!1),D=ie(!1),O=ie(""),$=ie(null),M=ie("source"),_=ie(null),H=Me(()=>typeof v.value.selectable>"u"?m.value:v.value.selectable),K=Me(()=>typeof v.value.updatable>"u"?b.value:v.value.updatable),A=Me(()=>typeof v.value.focusable>"u"?w.value:v.value.focusable);Pt(Ip,e.id),Pt(kp,_);const T=ee(()=>v.value.class instanceof Function?v.value.class(v.value):v.value.class),k=ee(()=>v.value.style instanceof Function?v.value.style(v.value):v.value.style),B=ee(()=>{const Z=v.value.type||"default",p=y==null?void 0:y[`edge-${Z}`];if(p)return p;let x=v.value.template??l.value[Z];if(typeof x=="string"&&N){const P=Object.keys(N.appContext.components);P&&P.includes(Z)&&(x=be(Z,!1))}return x&&typeof x!="string"?x:(a.error(new ke(Ie.EDGE_TYPE_MISSING,x)),!1)}),{handlePointerDown:z}=rs({nodeId:O,handleId:$,type:M,isValidConnection:f,edgeUpdaterType:M,onEdgeUpdate:U,onEdgeUpdateEnd:de});return()=>{const Z=d(v.value.source),p=d(v.value.target),x="pathOptions"in v.value?v.value.pathOptions:{};if(!Z&&!p)return a.error(new ke(Ie.EDGE_SOURCE_TARGET_MISSING,v.value.id,v.value.source,v.value.target)),null;if(!Z)return a.error(new ke(Ie.EDGE_SOURCE_MISSING,v.value.id,v.value.source)),null;if(!p)return a.error(new ke(Ie.EDGE_TARGET_MISSING,v.value.id,v.value.target)),null;if(!v.value||v.value.hidden||Z.hidden||p.hidden)return null;let P;o.value===At.Strict?P=Z.handleBounds.source:P=[...Z.handleBounds.source||[],...Z.handleBounds.target||[]];const E=va(P,v.value.sourceHandle);let F;o.value===At.Strict?F=p.handleBounds.target:F=[...p.handleBounds.target||[],...p.handleBounds.source||[]];const re=va(F,v.value.targetHandle),L=(E==null?void 0:E.position)||se.Bottom,fe=(re==null?void 0:re.position)||se.Top,{x:ge,y:we}=Gn(Z,E,L),{x:Se,y:Ae}=Gn(p,re,fe);return v.value.sourceX=ge,v.value.sourceY=we,v.value.targetX=Se,v.value.targetY=Ae,xe("g",{ref:_,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${B.value===!1?"default":v.value.type||"default"}`,s.value,T.value,{updating:R.value,selected:v.value.selected,animated:v.value.animated,inactive:!H.value}],onClick:q,onContextmenu:ae,onDblclick:Y,onMouseenter:X,onMousemove:pe,onMouseleave:ue,onKeyDown:A.value?oe:void 0,tabIndex:A.value?0:void 0,"aria-label":v.value.ariaLabel===null?void 0:v.value.ariaLabel||`Edge from ${v.value.source} to ${v.value.target}`,"aria-describedby":A.value?`${Hr}-${t}`:void 0,role:A.value?"button":"img"},[D.value?null:xe(B.value===!1?l.value.default:B.value,{id:e.id,sourceNode:Z,targetNode:p,source:v.value.source,target:v.value.target,type:v.value.type,updatable:K.value,selected:v.value.selected,animated:v.value.animated,label:v.value.label,labelStyle:v.value.labelStyle,labelShowBg:v.value.labelShowBg,labelBgStyle:v.value.labelBgStyle,labelBgPadding:v.value.labelBgPadding,labelBgBorderRadius:v.value.labelBgBorderRadius,data:v.value.data,events:{...v.value.events,...I.on},style:k.value,markerStart:`url('#${en(v.value.markerStart,t)}')`,markerEnd:`url('#${en(v.value.markerEnd,t)}')`,sourcePosition:L,targetPosition:fe,sourceX:ge,sourceY:we,targetX:Se,targetY:Ae,sourceHandleId:v.value.sourceHandle,targetHandleId:v.value.targetHandle,interactionWidth:v.value.interactionWidth,...x}),[K.value==="source"||K.value===!0?[xe("g",{onMousedown:he,onMouseenter:V,onMouseout:G},xe(Da,{position:L,centerX:ge,centerY:we,radius:i.value,type:"source","data-type":"source"}))]:null,K.value==="target"||K.value===!0?[xe("g",{onMousedown:te,onMouseenter:V,onMouseout:G},xe(Da,{position:fe,centerX:Se,centerY:Ae,radius:i.value,type:"target","data-type":"target"}))]:null]])};function V(){R.value=!0}function G(){R.value=!1}function U(Z,p){I.emit.update({event:Z,edge:v.value,connection:p})}function de(Z){I.emit.updateEnd({event:Z,edge:v.value}),D.value=!1}function ne(Z,p){Z.button===0&&(D.value=!0,O.value=p?v.value.target:v.value.source,$.value=(p?v.value.targetHandle:v.value.sourceHandle)??"",M.value=p?"target":"source",I.emit.updateStart({event:Z,edge:v.value}),z(Z))}function q(Z){var p;const x={event:Z,edge:v.value};H.value&&(r.value=!1,v.value.selected&&h.value?(u([v.value]),(p=_.value)==null||p.blur()):n([v.value])),I.emit.click(x)}function ae(Z){I.emit.contextMenu({event:Z,edge:v.value})}function Y(Z){I.emit.doubleClick({event:Z,edge:v.value})}function X(Z){I.emit.mouseEnter({event:Z,edge:v.value})}function pe(Z){I.emit.mouseMove({event:Z,edge:v.value})}function ue(Z){I.emit.mouseLeave({event:Z,edge:v.value})}function he(Z){ne(Z,!0)}function te(Z){ne(Z,!1)}function oe(Z){var p;!g.value&&Fr.includes(Z.key)&&H.value&&(Z.key==="Escape"?((p=_.value)==null||p.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Fv=Hv,Gv={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top},Yv=ve({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:a,connectionLineType:r,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=Ne(),f=(e=zt(no))==null?void 0:e["connection-line"],h=ee(()=>{var v;return d((v=o.value)==null?void 0:v.nodeId)}),g=ee(()=>{var v;return d((v=i.value)==null?void 0:v.nodeId)??null}),m=ee(()=>({x:(a.value.x-c.value.x)/c.value.zoom,y:(a.value.y-c.value.y)/c.value.zoom})),b=ee(()=>l.value.markerStart?`url(#${en(l.value.markerStart,t)})`:""),w=ee(()=>l.value.markerEnd?`url(#${en(l.value.markerEnd,t)})`:"");return()=>{var v,I,y,N;if(!h.value||!o.value)return null;const R=o.value.handleId,D=o.value.type,O=h.value.handleBounds;let $=O==null?void 0:O[D];if(n.value===At.Loose&&($=$||(O==null?void 0:O[D==="source"?"target":"source"])),!$)return null;const M=(R?$.find(V=>V.id===R):$[0])??null,_=(M==null?void 0:M.position)||se.Top,{x:H,y:K}=Gn(h.value,M,_);let A=null;g.value&&((v=i.value)!=null&&v.handleId)&&(n.value===At.Strict?A=((I=g.value.handleBounds[D==="source"?"target":"source"])==null?void 0:I.find(V=>{var G;return V.id===((G=i.value)==null?void 0:G.handleId)}))||null:A=((y=[...g.value.handleBounds.source||[],...g.value.handleBounds.target||[]])==null?void 0:y.find(V=>{var G;return V.id===((G=i.value)==null?void 0:G.handleId)}))||null);const T=((N=i.value)==null?void 0:N.position)??(_?Gv[_]:null);if(!_||!T)return null;const k=r.value??l.value.type??vt.Bezier;let B="";const z={sourceX:H,sourceY:K,sourcePosition:_,targetX:m.value.x,targetY:m.value.y,targetPosition:T};return k===vt.Bezier?[B]=fs(z):k===vt.Step?[B]=ei({...z,borderRadius:0}):k===vt.SmoothStep?[B]=ei(z):k===vt.SimpleBezier?[B]=hs(z):B=`M${H},${K} ${m.value.x},${m.value.y}`,xe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},xe("g",{class:"vue-flow__connection"},f?xe(f,{sourceX:H,sourceY:K,sourcePosition:_,targetX:m.value.x,targetY:m.value.y,targetPosition:T,sourceNode:h.value,sourceHandle:M,targetNode:g.value,targetHandle:A,markerEnd:w.value,markerStart:b.value,connectionStatus:u.value}):xe("path",{d:B,class:[l.value.class,u,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":w.value,"marker-start":b.value})))}}}),Uv=Yv,Xv=["id","markerWidth","markerHeight","markerUnits","orient"],Zv={name:"MarkerType",compatConfig:{MODE:3}},Kv=ve({...Zv,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(Q(),le("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===S(Wo).ArrowClosed?(Q(),le("polyline",{key:0,style:Qe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Ee("",!0),t.type===S(Wo).Arrow?(Q(),le("polyline",{key:1,style:Qe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Ee("",!0)],8,Xv))}}),Wv={class:"vue-flow__marker vue-flow__container"},qv={name:"MarkerDefinitions",compatConfig:{MODE:3}},Qv=ve({...qv,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Ne(),a=ee(()=>{const r=new Set,s=[],l=u=>{if(u){const c=en(u,t);r.has(c)||(typeof u=="object"?s.push({...u,id:c,color:u.color||i.value}):s.push({id:c,color:i.value,type:u}),r.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return s.sort((u,c)=>u.id.localeCompare(c.id))});return(r,s)=>(Q(),le("svg",Wv,[C("defs",null,[(Q(!0),le(Te,null,ot(a.value,l=>(Q(),Pe(Kv,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Jv={name:"Edges",compatConfig:{MODE:3}},jv=ve({...Jv,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Ne();return(i,a)=>(Q(),le(Te,null,[W(Qv),(Q(!0),le(Te,null,ot(S(n),r=>(Q(),le("svg",{key:r.id,class:"vue-flow__edges vue-flow__container",style:Qe({zIndex:S(Sp)(r,S(t),S(o))})},[W(S(Fv),{id:r.id},null,8,["id"])],4))),128)),W(S(Uv))],64))}}),eg=ve({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:r,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:g,ariaLiveMessage:m,snapToGrid:b,snapGrid:w,nodeDragThreshold:v,nodesDraggable:I,elementsSelectable:y,nodesConnectable:N,nodesFocusable:R}=Ne(),D=ie(null);Pt(is,D),Pt(os,e.id);const O=zt(no),$=nn(),M=ls(),{node:_,parentNode:H}=ss(e.id),K=Me(()=>typeof _.draggable>"u"?I.value:_.draggable),A=Me(()=>typeof _.selectable>"u"?y.value:_.selectable),T=Me(()=>typeof _.connectable>"u"?N.value:_.connectable),k=Me(()=>typeof _.focusable>"u"?R.value:_.focusable),B=Me(()=>!!_.dimensions.width&&!!_.dimensions.height),z=ee(()=>{const p=_.type||"default",x=O==null?void 0:O[`node-${p}`];if(x)return x;let P=_.template||d.value[p];if(typeof P=="string"&&$){const E=Object.keys($.appContext.components);E&&E.includes(p)&&(P=be(p,!1))}return P&&typeof P!="string"?P:(r.error(new ke(Ie.NODE_TYPE_MISSING,P)),!1)}),{emit:V,on:G}=Bp(_,r),U=as({id:e.id,el:D,disabled:()=>!K.value,selectable:A,dragHandle:()=>_.dragHandle,onStart(p){V.dragStart(p)},onDrag(p){V.drag(p)},onStop(p){V.dragStop(p)},onClick(p){oe(p)}}),de=ee(()=>_.class instanceof Function?_.class(_):_.class),ne=ee(()=>{const p=(_.style instanceof Function?_.style(_):_.style)||{},x=_.width instanceof Function?_.width(_):_.width,P=_.height instanceof Function?_.height(_):_.height;return!p.width&&x&&(p.width=typeof x=="string"?x:`${x}px`),!p.height&&P&&(p.height=typeof P=="string"?P:`${P}px`),p}),q=Me(()=>Number(_.zIndex??ne.value.zIndex??0));return c(p=>{(p.includes(e.id)||!p.length)&&Y()}),ze(()=>{ye(()=>_.hidden,(p=!1,x,P)=>{!p&&D.value&&(e.resizeObserver.observe(D.value),P(()=>{D.value&&e.resizeObserver.unobserve(D.value)}))},{immediate:!0,flush:"post"})}),ye([()=>_.type,()=>_.sourcePosition,()=>_.targetPosition],()=>{Ve(()=>{u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])})}),ye([()=>_.position.x,()=>_.position.y,()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.x},()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.y},()=>{var p;return(p=H.value)==null?void 0:p.computedPosition.z},q,()=>_.selected,()=>_.dimensions.height,()=>_.dimensions.width,()=>{var p;return(p=H.value)==null?void 0:p.dimensions.height},()=>{var p;return(p=H.value)==null?void 0:p.dimensions.width}],([p,x,P,E,F,re])=>{const L={x:p,y:x,z:re+(h.value&&_.selected?1e3:0)};typeof P<"u"&&typeof E<"u"?_.computedPosition=gp({x:P,y:E,z:F},L):_.computedPosition=L},{flush:"post",immediate:!0}),ye([()=>_.extent,f],([p,x],[P,E])=>{(p!==P||x!==E)&&ae()}),_.extent==="parent"||typeof _.extent=="object"&&"range"in _.extent&&_.extent.range==="parent"?Vo(()=>B).toBe(!0).then(ae):ae(),()=>_.hidden?null:xe("div",{ref:D,"data-id":_.id,class:["vue-flow__node",`vue-flow__node-${z.value===!1?"default":_.type||"default"}`,{[n.value]:K.value,dragging:U==null?void 0:U.value,draggable:K.value,selected:_.selected,selectable:A.value,parent:_.isParent},de.value],style:{visibility:B.value?"visible":"hidden",zIndex:_.computedPosition.z??q.value,transform:`translate(${_.computedPosition.x}px,${_.computedPosition.y}px)`,pointerEvents:A.value||K.value?"all":"none",...ne.value},tabIndex:k.value?0:void 0,role:k.value?"button":void 0,"aria-describedby":g.value?void 0:`${Vr}-${t}`,"aria-label":_.ariaLabel,onMouseenter:X,onMousemove:pe,onMouseleave:ue,onContextmenu:he,onClick:oe,onDblclick:te,onKeydown:Z},[xe(z.value===!1?d.value.default:z.value,{id:_.id,type:_.type,data:_.data,events:{..._.events,...G},selected:_.selected,resizing:_.resizing,dragging:U.value,connectable:T.value,position:_.computedPosition,dimensions:_.dimensions,isValidTargetPos:_.isValidTargetPos,isValidSourcePos:_.isValidSourcePos,parent:_.parentNode,parentNodeId:_.parentNode,zIndex:_.computedPosition.z??q.value,targetPosition:_.targetPosition,sourcePosition:_.sourcePosition,label:_.label,dragHandle:_.dragHandle,onUpdateNodeInternals:Y})]);function ae(){const p=_.computedPosition;b.value&&(p.x=w.value[0]*Math.round(p.x/w.value[0]),p.y=w.value[1]*Math.round(p.y/w.value[1]));const{computedPosition:x,position:P}=pi(_,p,r.error,f.value,H.value);(_.computedPosition.x!==x.x||_.computedPosition.y!==x.y)&&(_.computedPosition={..._.computedPosition,...x}),(_.position.x!==P.x||_.position.y!==P.y)&&(_.position=P)}function Y(){D.value&&u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])}function X(p){U!=null&&U.value||V.mouseEnter({event:p,node:_})}function pe(p){U!=null&&U.value||V.mouseMove({event:p,node:_})}function ue(p){U!=null&&U.value||V.mouseLeave({event:p,node:_})}function he(p){return V.contextMenu({event:p,node:_})}function te(p){return V.doubleClick({event:p,node:_})}function oe(p){A.value&&(!o.value||!K.value||v.value>0)&&jo(_,a.value,l,s,i,!1,D.value),V.click({event:p,node:_})}function Z(p){if(!(qo(p)||g.value))if(Fr.includes(p.key)&&A.value){const x=p.key==="Escape";jo(_,a.value,l,s,i,x,D.value)}else K.value&&_.selected&&kt[p.key]&&(m.value=`Moved selected node ${p.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.position.x}, y: ${~~_.position.y}`,M({x:kt[p.key].x,y:kt[p.key].y},p.shiftKey))}}}),tg=eg;function ng(e={includeHiddenNodes:!1}){const{nodes:t}=Ne();return ee(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const og={class:"vue-flow__nodes vue-flow__container"},ig={name:"Nodes",compatConfig:{MODE:3}},ag=ve({...ig,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Ne(),i=ng(),a=ie();return ye(i,r=>{r&&Ve(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),ze(()=>{a.value=new ResizeObserver(r=>{const s=r.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));Ve(()=>n(s))})}),Ba(()=>{var r;return(r=a.value)==null?void 0:r.disconnect()}),(r,s)=>(Q(),le("div",og,[a.value?(Q(!0),le(Te,{key:0},ot(S(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&Es(d,f))return d;const h=(Q(),Pe(S(tg),{id:l.id,key:l.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return h.memo=f,h},s,0),128)):Ee("",!0)]))}});function rg(){const{emits:e}=Ne();ze(()=>{if(ns()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new ke(Ie.MISSING_STYLES))}})}const sg=C("div",{class:"vue-flow__edge-labels"},null,-1),lg={name:"VueFlow",compatConfig:{MODE:3}},ug=ve({...lg,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=ws(),a=bo(o,"modelValue",n),r=bo(o,"nodes",n),s=bo(o,"edges",n),l=Ne(o),u=Vp({modelValue:a,nodes:r,edges:s},o,l);return Fp(n,l.hooks),zv(),rg(),Pt(no,i),ti(()=>{u()}),t(l),(c,d)=>(Q(),le("div",{ref:S(l).vueFlowRef,class:"vue-flow"},[W(Pv,null,{default:ce(()=>[W(jv),sg,W(ag),wt(c.$slots,"zoom-pane")]),_:3}),wt(c.$slots,"default"),W(Bv)],512))}}),cg={class:"background-circle"},dg=["width","height"],fg=["fill","d","stroke-width","stroke"],hg=["r"],pg=ve({__name:"BackgroundCircle",emits:["showPopover"],setup(e,{emit:t}){const n=t,o=Un(),{SVGSideLength:i}=ur(),a=i/2,r=ee(()=>{const{theme:d}=o.state;return d==="dark"?"#469cf71a":"#E7F7FF"}),s=ee(()=>{const d=Kn,f=on,h=a;return`M ${h} ${h-f}
A ${f} ${f} 0 0 1 ${h+f} ${h}
A ${f} ${f} 0 0 1 ${h} ${h+f}
A ${f} ${f} 0 0 1 ${h-f} ${h}
A ${f} ${f} 0 0 1 ${h} ${h-f}
M ${h} ${h-d}
A ${d} ${d} 0 0 0 ${h-d} ${h}
A ${d} ${d} 0 0 0 ${h} ${h+d}
A ${d} ${d} 0 0 0 ${h+d} ${h}
A ${d} ${d} 0 0 0 ${h} ${h-d}`}),l=ie(!1),u=()=>{l.value=!0,n("showPopover")},c=()=>{l.value=!1};return(d,f)=>(Q(),le("div",cg,[(Q(),le("svg",{width:S(i),height:S(i)},[kn(C("path",{class:"background-ring",onClick:u,fill:S(r),d:S(s),"stroke-width":S(sr),stroke:S(l)?"rgba(0, 177, 115, 0.35)":void 0},null,8,fg),[[S(ko),c]]),C("circle",{r:S(Nn),fill:"#f0eeff",cx:a,cy:a},null,8,hg)],8,dg))]))}}),vg={class:"core-node"},gg=["width","height"],mg=["id"],yg=["stop-color"],_g=["stop-color"],bg={key:0},wg=["points","fill"],Sg=["points","fill"],xg=ve({__name:"CoreNode",props:{height:{type:Number,default:20},isSelected:{type:Boolean,required:!0},status:{type:String,default:Ze.Running},nodesNum:{type:Number,default:1}},emits:["select"],setup(e,{emit:t}){const{INNER_SIDE_MULTIPLES:n,coreNodeHeight:o,coreNodeWidth:i,setCoreNodeHeight:a}=rr(),r=e,s=t,l=Io(),u=ee(()=>r.status===Ze.Running?["#055fe7","#2c83f5"]:["#dcdcdc","#cdcdcd"]),c=(f=1)=>{const h=o.value/2*f,g=i.value/2,m=o.value/2,b=2*Math.PI/6,w=[];for(let v=0;v<6;v++){const I=$e(h*Math.sin(v*b)+g,3),y=$e(h*Math.cos(v*b)+m,3);w.push(`${I},${y}`)}return w.join(" ")},d=()=>{s("select")};return ye(()=>r.height,f=>a(f)),a(r.height),(f,h)=>(Q(),le("div",vg,[W(S(tn)),(Q(),le("svg",{width:S(i),height:S(o),overflow:"visible"},[C("defs",null,[C("linearGradient",{id:S(l),x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[C("stop",{offset:"0%","stop-color":S(u)[0]},null,8,yg),C("stop",{offset:"100%","stop-color":S(u)[1]},null,8,_g)],8,mg)]),C("g",null,[e.isSelected?(Q(),le("g",bg,[C("polygon",{points:c(S(n)),fill:`url(#${S(l)})`,opacity:"0.6"},null,8,wg)])):Ee("",!0),C("polygon",{points:c(),fill:`url(#${S(l)})`,onMouseenter:d},null,40,Sg)])],8,gg))]))}}),Ag={class:"popover-hd"},Eg={class:"popover-bd"},Ng={class:"list-hd"},Mg={class:"list-bd"},Dg={class:"node-name"},Cg={key:0,class:"tip placeholder"},Ig=ve({__name:"NodeListPopover",props:{nodes:{type:Array,default:()=>[]}},setup(e){const t=e,{tl:n}=ht("Base"),o=ie(""),i=ee(()=>t.nodes.reduce((a,r)=>(r.node.indexOf(o.value)>-1&&a[r.role].push(r),a),{core:[],replicant:[]}));return(a,r)=>{const s=be("el-input"),l=be("el-card");return Q(),Pe(l,{class:"node-list-popover with-border"},{default:ce(()=>[C("div",Ag,[W(s,{modelValue:S(o),"onUpdate:modelValue":r[0]||(r[0]=u=>Le(o)?o.value=u:null),"prefix-icon":S(Is)},null,8,["modelValue","prefix-icon"])]),C("div",Eg,[(Q(!0),le(Te,null,ot(S(i),(u,c)=>(Q(),le("div",{class:"list-block",key:c},[C("div",Ng,j(("startCase"in a?a.startCase:S(ct.startCase))(c)),1),C("div",Mg,[C("ul",null,[(Q(!0),le(Te,null,ot(u,d=>(Q(),le("li",{class:"node-item",key:d.node},[C("i",{class:Ye(["node-status-dot",`is-${d.node_status}`])},null,2),C("p",Dg,j(d.node),1)]))),128))]),u.length===0?(Q(),le("p",Cg,j(S(n)("noData")),1)):Ee("",!0)])]))),128))])]),_:1})}}}),kg={class:"content"},Pg={class:"count-item"},Tg={class:"count-item"},$g=ve({__name:"NodesCountCard",props:{nodesCountData:{type:Object,required:!0}},setup(e){const{t}=ht("Dashboard");return(n,o)=>{const i=be("el-card");return Q(),Pe(i,{class:"nodes-count-card"},{default:ce(()=>[C("div",kg,[C("div",Pg,[o[0]||(o[0]=C("i",{class:"node-status-dot is-running"},null,-1)),C("span",null,j(S(t)("Dashboard.node",{n:e.nodesCountData[S(Ze).Running]})),1)]),C("div",Tg,[o[1]||(o[1]=C("i",{class:"node-status-dot is-stopped"},null,-1)),C("span",null,j(S(t)("Dashboard.node",{n:e.nodesCountData[S(Ze).Stopped]})),1)])])]),_:1})}}}),Rg=["width","height"],Og=["cx","cy","r","fill"],Bg={key:0},zg=["cx","cy","r","fill"],Lg=["cx","cy","r","fill"],Vg=ve({__name:"RepNode",props:{isSelected:{type:Boolean,required:!0},status:{type:String,default:Ze.Running}},emits:["select"],setup(e,{emit:t}){const{nonactivatedRadius:n,activatedInnerRadius:o,activatedOuterRadius:i}=lr(),a=e,r=t,s=ee(()=>a.status===Ze.Running),l=ee(()=>s.value?"#1890ff":"#bac1cd"),u=ee(()=>s.value?"#469cf7":"#bac1cd"),c=()=>{r("select")};return(d,f)=>(Q(),le("svg",{width:S(n)*2,height:S(n)*2,overflow:"visible"},[C("circle",{cx:S(n),cy:S(n),r:S(n),fill:S(l),onMouseenter:c},null,40,Og),e.isSelected?(Q(),le("g",Bg,[C("circle",{cx:S(n),cy:S(n),r:S(i),fill:S(u),opacity:"0.35"},null,8,zg),C("circle",{cx:S(n),cy:S(n),r:S(o),fill:S(u)},null,8,Lg)])):Ee("",!0)],8,Rg))}}),Hg={class:"nodes-graph"},Fg=ve({name:"NodesGraph",inheritAttrs:!1}),Gg=ve({...Fg,props:{modelValue:{type:String},nodes:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){ks(O=>({"2aa0fbb8":b,"0ac7dfd1":y}));const n=e,o=t,{FlowInstance:i,showBackgroundCircle:a,flowEleWidth:r,backgroundCirclePosition:s,coreNodeHeight:l,countCoreNodeHeight:u,generateFlowData:c}=hc(n),d=ee(()=>a.value?[{type:"background",id:"background-circle",position:s.value,selectable:!1,zIndex:-1}]:[]),f=ee(()=>n.nodes.reduce((O,{node_status:$,role:M})=>(M!=="core"&&O[$]++,O),{[Ze.Running]:0,[Ze.Stopped]:0})),h=ee(()=>f.value[Ze.Running]+f.value[Ze.Stopped]>20),g=ie([...d.value]);Ne("nodes-graph"),ye(()=>n.nodes,async()=>{u(),g.value=[...d.value,...c(n.nodes)]}),ze(async()=>{await Ve(),g.value=[...d.value,...c(n.nodes)]});const m=O=>{o("update:modelValue",O)},b=`${r.value/2+on+16}px`,w=ie(!1),v=()=>{w.value=!0},I=()=>{w.value=!1},y=`${r.value/2+Kn}px`,N=ie(!1),R=()=>{N.value=!0,v()},D=()=>{N.value=!1};return(O,$)=>(Q(),le("div",Hg,[W(S(ug),{ref_key:"FlowInstance",ref:i,id:"nodes-graph",modelValue:S(g),"onUpdate:modelValue":$[0]||($[0]=M=>Le(g)?g.value=M:null),"delete-key-code":null,"nodes-draggable":!1,"nodes-connectable":!1,"zoom-on-scroll":!1,"zoom-on-double-click":!1,"zoom-on-pinch":!1,"pan-on-drag":!1,"min-zoom":1,"max-zoom":1},{"node-background":ce(()=>[W(pg,{onShowPopover:v})]),"node-core":ce(M=>[W(xg,{height:S(l),"nodes-num":e.nodes.length,status:M.data.node_status,"is-selected":e.modelValue===M.id,onSelect:_=>m(M.id)},null,8,["height","nodes-num","status","is-selected","onSelect"])]),"node-replicant":ce(M=>[W(Vg,{status:M.data.node_status,"is-selected":e.modelValue===M.id,onSelect:_=>m(M.id)},null,8,["status","is-selected","onSelect"])]),_:1},8,["modelValue"]),S(w)?kn((Q(),Pe(Ig,{key:0,nodes:e.nodes,class:Ye({"is-more-down":S(h)})},null,8,["nodes","class"])),[[S(ko),I]]):Ee("",!0),S(h)?kn((Q(),Pe($g,{key:1,class:Ye(["nodes-count-popover",{"is-active":S(N)}]),"nodes-count-data":S(f),onClick:R},null,8,["class","nodes-count-data"])),[[S(ko),D]]):Ee("",!0)]))}}),Yg={class:"graph-wrapper"},Ug={class:"nodes-graph-container"},Xg={class:"node-count"},Zg={class:"cluster-name"},Kg={key:0},Wg={class:"node-detail"},qg={key:0,class:"node-info"},Qg={class:"node-card-header"},Jg={class:"node-title"},jg={class:"node-card-body"},em={class:"node-item"},tm={class:"node-item-label"},nm={class:"node-item-content"},om={class:"node-item"},im={class:"node-item-label"},am={class:"node-item-content"},rm={class:"node-item"},sm={class:"node-item-label"},lm={class:"node-item-content"},um={class:"node-item"},cm={class:"node-item-label"},dm={class:"node-item-content"},fm={class:"node-item"},hm={class:"node-item-label"},pm={class:"node-item-content"},vm={class:"node-item"},gm={class:"node-item-label"},mm={class:"node-item-content"},ym={class:"node-item"},_m={class:"node-item-label"},bm={class:"node-item-content"},wm={class:"node-item"},Sm={class:"node-item-label"},xm={class:"node-item-content"},Am={class:"node-item"},Em={class:"node-item-label"},Nm={class:"node-item-content"},Mm={key:0,class:"node-item"},Dm={class:"node-item-label"},Cm={class:"node-item-content"},Im=ve({name:"NodesGraph"}),km=ve({...Im,setup(e){const{edition:t}=Bl(),{locale:n}=Pa(),o=2e3,{nodes:i,loadData:a,clusterName:r}=zl({loadByDefault:!1,hideProgress:!0,timeout:25e3});let s=!1;const l=ie([]),u=ie(void 0),c=ie(""),d=ie(!0),f=ee(()=>!c.value||i.value.length===0||l.value.length===0?{node:{},stats:{}}:b(c.value)),{transMsNumToSimpleStr:h}=Ll(),{syncPolling:g}=oi(),m=async()=>{try{l.value=await Pl()}catch(D){return Promise.reject(D)}},b=D=>{const O=i.value.find(({node:M})=>M===D)||{},$=l.value.find(({node:M})=>M===D)||{};return{node:O,stats:$}},{tl:w}=ht("Dashboard"),v=ee(()=>Ts(f.value.node.memory_used,f.value.node.memory_total)),I=/(?<version>\d\.\d+\.\d+)/,y=D=>{var $,M;if(!D)return"";const O=D.match(I);return O&&(($=O.groups)!=null&&$.version)?(M=O.groups)==null?void 0:M.version:""},N=D=>` https://www.emqx.com/${n.value==="zh"?"zh":"en"}/changelogs/${$s?"enterprise":"broker"}/${D}`;return ee(()=>{var D,O;return N(y((O=(D=f.value)==null?void 0:D.node)==null?void 0:O.version))}),g(async()=>{try{return await Promise.all([a(),m()]),s||(c.value=i.value[0].node,s=!0),d.value=!1,Promise.resolve()}catch{return d.value=!1,Promise.reject()}},o),(D,O)=>{const $=Ol,M=be("el-col"),_=be("el-tooltip"),H=be("el-progress"),K=be("el-row"),A=Ps("loading");return Q(),le("div",Yg,[kn((Q(),le("div",{class:"graph-entity",ref_key:"graph",ref:u},[C("div",Ug,[C("span",Xg,[O[1]||(O[1]=C("img",{src:dc,width:"12",height:"12",alt:"node"},null,-1)),C("span",Zg,[W($,{content:S(r)},null,8,["content"])]),S(r)?(Q(),le("span",Kg," - ")):Ee("",!0),Xn(" "+j(D.$t("Dashboard.node",{n:S(i).length})),1)]),S(d)?Ee("",!0):(Q(),Pe(Gg,{key:0,modelValue:S(c),"onUpdate:modelValue":O[0]||(O[0]=T=>Le(c)?c.value=T:null),nodes:S(i)},null,8,["modelValue","nodes"]))]),C("div",Wg,[S(f)?(Q(),le("div",qg,[C("div",Qg,[C("div",Jg,j(S(w)("nodeData")),1)]),C("div",jg,[W(K,{gutter:26},{default:ce(()=>[W(M,{span:14},{default:ce(()=>[C("div",em,[C("label",tm,j(S(w)("nodeName"))+": ",1),C("span",nm,j(S(f).node.node),1)]),C("div",om,[C("label",im,j(S(w)("uptime"))+": ",1),C("span",am,j(S(h)(S(f).node.uptime)),1)]),C("div",rm,[C("label",sm,j(S(w)("currentConnection"))+": ",1),C("span",lm,j(S(f).stats["connections.count"]),1)]),C("div",um,[C("label",cm,j(S(w)("Subscription"))+": ",1),C("span",dm,j(S(f).stats["subscriptions.count"]),1)]),C("div",fm,[C("label",hm,j(S(w)("topics"))+": ",1),C("span",pm,j(S(f).stats["topics.count"]),1)])]),_:1}),W(M,{span:10},{default:ce(()=>{var T,k,B,z,V,G;return[C("div",vm,[C("label",gm,j(S(w)("nodeRole"))+": ",1),C("span",mm,j(S(f).node.role),1)]),C("div",ym,[C("label",_m,j(S(w)("version"))+": ",1),C("span",bm,j(S(f).node.version)+" ("+j(D.$t(S(t).title))+") ",1)]),C("div",wm,[C("label",Sm,j(S(w)("maxFds"))+": ",1),C("span",xm,j(S(f).node.max_fds),1)]),C("div",Am,[C("label",Em,j(S(w)("osCpuLoad"))+": ",1),C("span",Nm,[W(_,{class:"box-item",effect:"dark",content:"load1/load5/load15",placement:"top"},{default:ce(()=>[C("span",null,j(S(f).node.load1+"/"+S(f).node.load5+"/"+S(f).node.load15),1)]),_:1})])]),[0,"0"].includes((k=(T=S(f))==null?void 0:T.node)==null?void 0:k.memory_total)?Ee("",!0):(Q(),le("div",Mm,[C("span",Dm,j(S(w)("memory"))+": ",1),C("span",Cm,[W(_,{class:"box-item",effect:"dark",content:`${(z=(B=S(f))==null?void 0:B.node)==null?void 0:z.memory_used}/${(G=(V=S(f))==null?void 0:V.node)==null?void 0:G.memory_total}`,placement:"top"},{default:ce(()=>[W(H,{"stroke-width":14,format:()=>"",percentage:S(v)},null,8,["percentage"])]),_:1},8,["content"])])]))]}),_:1})]),_:1})])])):Ee("",!0)])])),[[A,S(d),void 0,{lock:!0}]])])}}}),Pm=Rs(km,[["__scopeId","data-v-32c4c554"]]),Tm={class:"overview app-wrapper"},$m={class:"rate-item"},Rm={class:"rate-label"},Om={class:"unit"},Bm={class:"line-wrapper"},zm={class:"rate-item"},Lm={class:"rate-label"},Vm={class:"unit"},Hm={class:"line-wrapper"},Fm={class:"rate-item"},Gm={class:"rate-label"},Ym={class:"unit"},Um={class:"line-wrapper"},Xm={class:"rate-item"},Zm={class:"rate-label"},Km={class:"unit"},Wm={class:"line-wrapper"},qm={class:"count-item"},Qm={class:"count-item-hd"},Jm={class:"info-label"},jm={class:"num"},ey={class:"count-item"},ty={class:"count-item-hd"},ny={class:"info-label"},oy={class:"num"},iy={class:"count-item"},ay={class:"count-item-hd"},ry={class:"info-label"},sy={class:"num"},ly={class:"count-item-hd"},uy={class:"info-label"},cy={class:"num"},dy={class:"count-item"},fy={class:"count-item-hd"},hy={class:"info-label"},py={class:"num"},vy={class:"count-item-hd"},gy={class:"info-label"},my={class:"num"},yy={class:"count-item"},_y={class:"count-item-hd"},by={class:"info-label"},wy={class:"num"},Sy=ve({name:"Overview"}),zy=ve({...Sy,setup(e){const{tl:n}=ht("Dashboard"),o=h=>({x:new Array(h).fill(void 0),y:new Array(h).fill(void 0)}),i=mt({received_msg_rate:o(32),sent_msg_rate:o(32),received_bytes_rate:o(32),sent_bytes_rate:o(32)}),a=ie({node:0,received_msg_rate:0,sent_msg_rate:0,received_bytes_rate:0,sent_bytes_rate:0,subscriptions:0,connections:0,topics:0,live_connections:0}),r=ee(()=>!ct.isUndefined(a.value.sessions_hist_hwmark)),s=ie("msg"),l=h=>h===void 0?0:Bs(h),{syncPolling:u}=oi(),c=async()=>{const h=await Tl();h&&(a.value=h,f(h))},d=()=>ka().format("HH:mm:ss"),f=(h={})=>{["received_msg_rate","sent_msg_rate","received_bytes_rate","sent_bytes_rate"].forEach(g=>{i[g]=i[g]||{x:[],y:[]};const m=h[g]||0;i[g].x.push(d()),i[g].y.push(m),i[g].x.length>=16&&(i[g].x.shift(),i[g].y.shift())})};return u(c,2e3),(h,g)=>{const m=be("el-card"),b=be("el-col"),w=Ca,v=be("el-tooltip"),I=be("router-link"),y=be("el-row");return Q(),le("div",Tm,[W(y,{class:"block",gutter:16},{default:ce(()=>[W(b,{span:S(r)?7:8},{default:ce(()=>[W(m,{class:"rate-card"},{default:ce(()=>[S(s)==="msg"?(Q(),le(Te,{key:0},[C("div",$m,[C("div",null,[C("label",Rm,j(h.$t("Dashboard.currentMessageInRate")),1),C("span",Om,j(h.$t("Dashboard.strip",{n:S(a).received_msg_rate}))+"/"+j(h.$t("Dashboard.second")),1)]),C("div",Bm,[W(hn,{value:S(i).received_msg_rate,type:"bar",color:"#3D7FF9"},null,8,["value"])])]),C("div",zm,[C("div",null,[C("label",Lm,j(h.$t("Dashboard.currentMessageOutRate")),1),C("span",Vm,j(h.$t("Dashboard.strip",{n:S(a).sent_msg_rate}))+"/"+j(h.$t("Dashboard.second")),1)]),C("div",Hm,[W(hn,{value:S(i).sent_msg_rate,type:"bar",color:"#5D4EFF"},null,8,["value"])])])],64)):(Q(),le(Te,{key:1},[C("div",Fm,[C("div",null,[C("label",Gm,j(h.$t("Dashboard.currentMessageInRate")),1),C("span",null,j(l(S(a).received_bytes_rate)),1),C("span",Ym,j(h.$t("Dashboard.byte"))+"/"+j(h.$t("Dashboard.second")),1)]),C("div",Um,[W(hn,{value:S(i).received_bytes_rate,type:"bar",color:"#3D7FF9"},null,8,["value"])])]),C("div",Xm,[C("div",null,[C("label",Zm,j(h.$t("Dashboard.currentMessageOutRate")),1),C("span",null,j(l(S(a).sent_bytes_rate)),1),C("span",Km,j(h.$t("Dashboard.byte"))+"/"+j(h.$t("Dashboard.second")),1)]),C("div",Wm,[W(hn,{value:S(i).sent_bytes_rate,type:"bar",color:"#5D4EFF"},null,8,["value"])])])],64))]),_:1})]),_:1},8,["span"]),W(b,{span:S(r)?13:10},{default:ce(()=>[W(m,{class:"main-info-item"},{default:ce(()=>[C("div",qm,[C("div",Qm,[g[0]||(g[0]=C("img",{src:Ql,width:"16",height:"16",alt:"clients"},null,-1)),C("p",Jm,j(h.$t("Dashboard.allConnections")),1)]),C("div",jm,j(l(S(a).connections)),1)]),C("div",ey,[C("div",ty,[g[1]||(g[1]=C("img",{src:Mi,width:"16",height:"16",alt:"clients"},null,-1)),C("p",ny,j(h.$t("Dashboard.liveConnections")),1)]),C("div",oy,j(l(S(a).live_connections)),1)]),S(r)?(Q(),Pe(v,{key:0,placement:"top"},{content:ce(()=>{var N,R,D,O;return[W(w,{content:S(n)("histPeakSessionsDesc",{current_value:((D=(R=(N=S(a).sessions_hist_hwmark)==null?void 0:N.current_value)==null?void 0:R.toString)==null?void 0:D.call(R))??"0",time:("dateFormat"in h?h.dateFormat:S(Os))(((O=S(a).sessions_hist_hwmark)==null?void 0:O.peak_time)??"")})},null,8,["content"])]}),default:ce(()=>{var N;return[C("div",iy,[C("div",ay,[g[2]||(g[2]=C("img",{src:Mi,width:"16",height:"16",alt:"historic peak sessions"},null,-1)),C("p",ry,j(h.$t("Dashboard.histPeakSessions")),1)]),C("div",sy,[C("span",null,j(l(((N=S(a).sessions_hist_hwmark)==null?void 0:N.peak_value)??0)),1)])])]}),_:1})):Ee("",!0)]),_:1}),W(m,{class:Ye(["main-info-item",{"with-three-items":S(r)}])},{default:ce(()=>[W(I,{class:"count-item",to:{name:"subscription"}},{default:ce(()=>[C("div",ly,[g[3]||(g[3]=C("img",{src:Jl,width:"16",height:"16",alt:"subs"},null,-1)),C("p",uy,j(h.$t("Dashboard.subscriptionNumber")),1)]),C("div",cy,j(l(S(a).subscriptions)),1)]),_:1}),C("div",dy,[C("div",fy,[g[4]||(g[4]=C("img",{src:jl,width:"16",height:"16",alt:"subs"},null,-1)),C("p",hy,j(h.$t("Dashboard.shareSubscription")),1)]),C("div",py,j(l(S(a).shared_subscriptions)),1)])]),_:1},8,["class"])]),_:1},8,["span"]),W(b,{span:S(r)?4:6},{default:ce(()=>[W(m,{class:"main-info-item"},{default:ce(()=>[W(I,{class:"count-item",to:{name:"topics"}},{default:ce(()=>[C("div",vy,[g[5]||(g[5]=C("img",{src:eu,width:"16",height:"16",alt:"topics"},null,-1)),C("p",gy,j(h.$t("Dashboard.topics")),1)]),C("div",my,j(l(S(a).topics)),1)]),_:1})]),_:1}),W(m,{class:"main-info-item"},{default:ce(()=>[C("div",yy,[C("div",_y,[g[6]||(g[6]=C("img",{src:tu,width:"16",height:"16",alt:"topics"},null,-1)),C("p",by,j(h.$t("Dashboard.retained")),1)]),C("div",wy,j(l(S(a).retained_msg_count)),1)])]),_:1})]),_:1},8,["span"])]),_:1}),W(m,{class:"cluster-card block allow-overflow"},{default:ce(()=>[W(Pm)]),_:1}),W(cc)])}}});export{zy as default};
