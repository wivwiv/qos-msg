import{_ as ve,a as nt}from"./CommonOverflowTooltip.vue_vue_type_style_index_0_lang-qVzbqlOC.js";import{aD as te,M as Z,q as K,aE as lt,a1 as Qe,d as ie,r as h,o as r,m as v,w as l,b as t,u as e,aF as Me,e as O,t as C,a as S,c as M,g as V,aG as st,j as $,W as ot,y as ee,x as W,k as ae,aH as at,F as E,J as it,au as rt,aI as ct,aJ as ut,N as dt,aw as Fe,z as pt,aK as be,p as oe,n as mt,aL as _t,V as ft,i as bt,s as vt,aM as qe,E as Be,a5 as gt}from"./index-Dp_94g6t.js";import{_ as yt}from"./InfoTooltip-CtXDYqOe.js";import{_ as ht}from"./DetailHeader.vue_vue_type_style_index_0_lang-B2doPzV1.js";import{_ as wt}from"./TextEasyCopy.vue_vue_type_style_index_0_lang-DjH3of4s.js";import"./http-DdqGSA6b.js";import{a as kt,g as Ct,b as Vt,d as Tt,u as St}from"./gateway-B2o0ZjJS.js";import{_ as It,w as $t}from"./CheckIcon.vue_vue_type_style_index_0_lang-BuOFsLdJ.js";import{u as Mt}from"./useCopy-xLykWTHO.js";import{u as qt}from"./useDurationStr-BcUh8ux3.js";import{_ as Bt}from"./PayloadDialog.vue_vue_type_style_index_0_lang-B1EegPIb.js";import{_ as Lt}from"./KeyAndValueEditor.vue_vue_type_style_index_0_lang-BS3yU87G.js";import{u as Ot}from"./usePaginationRemember-BBiMlW9V.js";import{_ as Pt}from"./useBridgeTypeValue-BhHkY53V.js";import"./arrow-left-B1ek5uAF.js";import"./check-NEZYo7gf.js";import"./close-ebScOGTJ.js";import"./Monaco.vue_vue_type_style_index_0_lang-C5FqW0sc.js";import"./useRule-DGtnoBQH.js";const Ae=()=>({noLocalOpts:[{value:0,label:"False"},{value:1,label:"True"}],retainAsPublishedOpts:[{value:0,label:"False"},{value:1,label:"True"}],retainHandlingOpts:[0,1,2]});function Dt(o){return te.delete(`/clients/${encodeURIComponent(o)}`)}async function Rt(o){return te.get(`/clients/${encodeURIComponent(o)}`,{errorsHandleCustom:[404]})}function Et(o){return te.get(`/clients/${encodeURIComponent(o)}/subscriptions`)}function Ut(o,f){if(f!=null)return te.post(`/clients/${encodeURIComponent(o)}/unsubscribe`,{topic:f})}function Qt(o,f){const p=Z.pick(f,["qos","topic","nl","rap","rh"]);return te.post(`/clients/${encodeURIComponent(o)}/subscribe`,p)}function Ft(o,f){return te.get(`/clients/${encodeURIComponent(o)}/mqueue_messages`,{params:f})}function At(o,f){return te.get(`/clients/${encodeURIComponent(o)}/inflight_messages`,{params:f})}const Ge=()=>{const{tl:o}=K("Clients"),f={connection:["node","clientid","username","proto_type","listener","ip_address","keepalive","clean_start","is_bridge","client_attrs","connected_at","disconnected_at"],session:["expiry_interval","created_at","heap_size","subscriptions","mqueue","inflight","awaiting_rel"]},p=w=>String(w).replace(/((_|\.)[a-z])/g,a=>a.substring(1).toUpperCase());return{clientFields:f,snake2pascal:p,getBaseLabel:w=>o(p(w))}},Gt=()=>{const{transSecondNumToSimpleStr:o}=qt(),{tl:f}=K("Clients");return{getSessionInfoItemValue:(u,w)=>{switch(w){case"subscriptions":return u.subscriptions_cnt+"/"+u.subscriptions_max;case"mqueue":return u.durable&&u.mqueue_max===void 0?"-":u.mqueue_len+"/"+u.mqueue_max;case"inflight":return u.inflight_cnt+"/"+u.inflight_max;case"awaiting_rel":return u.awaiting_rel_cnt+"/"+u.awaiting_rel_max;case"created_at":return Qe(u[w]).format("YYYY-MM-DD HH:mm:ss");case"heap_size":return`${u.heap_size} bytes`;case"expiry_interval":return u.expiry_interval===lt?f("neverExpire"):o(u.expiry_interval);default:return u[w]??""}}}},Ht=()=>{const{tl:o}=K("Clients"),f=c=>c&&Qe(c).format("YYYY-MM-DD HH:mm:ss"),p=new Map([["connected",c=>c.connected?o("connected"):o("disconnected")],["connected_at",c=>f(c.connected_at)],["disconnected_at",c=>f(c.disconnected_at)],["ip_address",c=>`${c.ip_address}:${c.port}`]]),{clientFields:u}=Ge(),w=u.session,{getSessionInfoItemValue:a}=Gt();return{getSimpleClientInfoValue:(c,g)=>p.has(g)?p.get(g)(c):w.includes(g)?a(c,g):c[g]??""}},zt={key:0},Nt={key:1},Wt={key:2,class:"space-between vertical-align-center"},jt={class:"keep-spaces"},Yt={key:3},Kt={class:"keep-spaces"},Ve=ie({__name:"ClientInfoItem",props:{client:{},field:{}},setup(o){const{t:f,tl:p}=K("Clients"),u={3:"v3.1",4:"v3.1.1",5:"v5.0"},{copyText:w}=Mt(),{getSimpleClientInfoValue:a}=Ht();return(m,c)=>{const g=It,d=h("el-tag"),U=h("el-button");return m.field==="connected"?(r(),v(d,{key:0,type:"info"},{default:l(()=>[t(g,{status:m.client.connected?e(Me).Check:e(Me).Close,size:"small"},null,8,["status"]),O(" "+C(m.client.connected?e(p)("connected"):e(p)("disconnected")),1)]),_:1})):m.field==="proto_type"?(r(),v(d,{key:1,type:"info"},{default:l(()=>[S("span",null,C(m.client.proto_name),1),c[1]||(c[1]=O(" Â  ")),m.client.proto_name==="MQTT"&&m.client.proto_ver!==void 0?(r(),M("span",zt,C(u[m.client.proto_ver]),1)):(r(),M("span",Nt,C(m.client.proto_ver),1))]),_:1})):m.field=="clientid"?(r(),M("span",Wt,[S("span",jt,C(m.client[m.field]),1),t(U,{class:"btn-copy",size:"small",onClick:c[0]||(c[0]=j=>e(w)(m.client.clientid))},{default:l(()=>[O(C(e(f)("Base.copy")),1)]),_:1})])):(r(),M("span",Yt,[S("span",Kt,C(e(a)(m.client,m.field)),1)]))}}}),xt={class:"dialog-align-footer"},Jt={inheritAttrs:!1},Xt=ie({...Jt,__name:"CreateSubscribe",props:{visible:{type:Boolean,required:!0},clientId:{type:String,default:""},gateway:{type:String,required:!1,default:""},isMQTTVersion5:{type:Boolean,required:!1,default:!1}},emits:["create:subs","update:visible"],setup(o,{emit:f}){const{tl:p}=K("Clients"),u=o,w=f,a=V({clientid:u.clientId,qos:st.QoS0,topic:"",nl:0,rap:0,rh:0}),m={clientid:{required:!0,message:p("pleaseEnter")},topic:{required:!0,message:p("pleaseEnter")},subid:{required:!0,message:p("pleaseEnter")}},c=V(!1),g=V(),d=$(()=>u.visible),{noLocalOpts:U,retainAsPublishedOpts:j,retainHandlingOpts:q}=Ae(),Q=()=>{a.value.clientid=u.clientId},F=()=>u.isMQTTVersion5?Z.omit(a.value,"clientid"):Z.pick(a.value,["qos","topic"]),x=()=>u.clientId||a.value.clientid,ne=()=>Qt(x(),F()),_=()=>{const y=Z.pick(a.value,["topic","qos"]);return a.value.subid&&u.gateway&&u.gateway==="stomp"&&(y.sub_props={subid:a.value.subid}),kt(u.gateway,x(),y)},R=async()=>{try{await g.value.validate();const y=u.gateway?_:ne;c.value=!0,await y(),w("create:subs"),J()}catch{}finally{c.value=!1}},J=()=>{w("update:visible",!1),g.value.resetFields()};return(y,k)=>{const A=h("el-input"),I=h("el-form-item"),H=h("el-option"),z=h("el-select"),B=h("el-form"),Y=h("el-button"),i=h("el-dialog");return r(),v(i,ot(y.$attrs,{title:y.$t("Clients.addASubscription"),width:"400px",modelValue:e(d),"onUpdate:modelValue":k[7]||(k[7]=s=>ee(d)?d.value=s:null),onClose:J,onOpen:Q}),{footer:l(()=>[S("div",xt,[t(Y,{onClick:J},{default:l(()=>[O(C(y.$t("Base.cancel")),1)]),_:1}),t(Y,{type:"primary",disabled:!y.$hasPermission("post"),onClick:R,loading:e(c)},{default:l(()=>[O(C(y.$t("Base.add")),1)]),_:1},8,["disabled","loading"])])]),default:l(()=>[t(B,{ref_key:"FormCom",ref:g,model:e(a),rules:m,"label-position":"top","require-asterisk-position":"right"},{default:l(()=>[o.clientId?W("",!0):(r(),v(I,{key:0,prop:"clientid",label:y.$t("Base.clientid")},{default:l(()=>[t(A,{modelValue:e(a).clientid,"onUpdate:modelValue":k[0]||(k[0]=s=>e(a).clientid=s),placeholder:y.$t("Base.clientid")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),t(I,{prop:"topic",label:y.$t("Base.topic")},{default:l(()=>[t(A,{modelValue:e(a).topic,"onUpdate:modelValue":k[1]||(k[1]=s=>e(a).topic=s),placeholder:"Topic"},null,8,["modelValue"])]),_:1},8,["label"]),o.gateway&&o.gateway==="stomp"?(r(),v(I,{key:1,prop:"subid",label:`${y.$t("Tools.Subscription")} ID`},{default:l(()=>[t(A,{modelValue:e(a).subid,"onUpdate:modelValue":k[2]||(k[2]=s=>e(a).subid=s)},null,8,["modelValue"])]),_:1},8,["label"])):W("",!0),t(I,{prop:"qos",label:"QoS"},{default:l(()=>[t(z,{modelValue:e(a).qos,"onUpdate:modelValue":k[3]||(k[3]=s=>e(a).qos=s),modelModifiers:{number:!0}},{default:l(()=>[(r(!0),M(E,null,ae("QoSOptions"in y?y.QoSOptions:e(at),s=>(r(),v(H,{key:s,value:s},null,8,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o.isMQTTVersion5?(r(),M(E,{key:2},[t(I,{prop:"nl",label:e(p)("noLocal")},{default:l(()=>[t(z,{modelValue:e(a).nl,"onUpdate:modelValue":k[4]||(k[4]=s=>e(a).nl=s)},{default:l(()=>[(r(!0),M(E,null,ae(e(U),({value:s,label:L})=>(r(),v(H,{label:L,value:s,key:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(I,{prop:"rap",label:e(p)("retainAsPublished")},{default:l(()=>[t(z,{modelValue:e(a).rap,"onUpdate:modelValue":k[5]||(k[5]=s=>e(a).rap=s)},{default:l(()=>[(r(!0),M(E,null,ae(e(j),({value:s,label:L})=>(r(),v(H,{label:L,value:s,key:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(I,{prop:"rh",label:e(p)("retainHandling")},{default:l(()=>[t(z,{modelValue:e(a).rh,"onUpdate:modelValue":k[6]||(k[6]=s=>e(a).rh=s)},{default:l(()=>[(r(!0),M(E,null,ae(e(q),s=>(r(),v(H,{label:s,value:s,key:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])],64)):W("",!0)]),_:1},8,["model"])]),_:1},16,["title","modelValue"])}}}),Zt={class:"dialog-hd"},en={class:"table-container"};function tn(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Object]"&&!ut(o)}const Le=410,nn=50,Oe=60,ln=200,Pe=1020,De=180,Re=100,Ee=180,Ue=240,sn=ie({__name:"MessageListDialog",props:{modelValue:{type:Boolean},clientId:{},type:{}},emits:["update:modelValue"],setup(o,{emit:f}){const p=Le-nn,u=o,w=f,{t:a,tl:m}=K("Clients"),c=$({get:()=>u.modelValue,set:i=>{w("update:modelValue",i)}});it(c,i=>{i?y():(k(),q.value=[])});const g=$(()=>u.type==="mqueue"),d=$(()=>g.value?m("msgQueueMsgList"):m("inflightMsgList")),U=V(!1),j=V(),q=V([]),Q=$(()=>q.value.length),F=V(0),x=$(()=>Q.value*Oe-F.value<=p),ne=(Pe-De-Re-Ee-Ue)/2,_=[{title:m("msgId"),key:"msgid",dataKey:"msgid",width:Ue,cellRenderer:({rowData:i})=>!g.value||i.mqueue_priority===0||Z.isUndefined(i.mqueue_priority)?t(ve,{content:i.msgid},null):t(E,null,[t("span",null,[i.msgid]),t(h("el-tag"),{type:"info","disable-transitions":!0},{default:()=>[m("priority"),O(": "),i.mqueue_priority]})])},{title:a("Base.topic"),key:"topic",dataKey:"topic",width:ne,cellRenderer:({rowData:i})=>t(ve,{content:i.topic},null)},{title:"QoS",key:"qos",dataKey:"qos",width:Re},{title:a("Base.clientid"),key:"from_clientid",dataKey:"from_clientid",width:ne,cellRenderer:({rowData:i})=>t(ve,{content:i.from_clientid},null)},{title:a("Extension.publishTime"),key:"publish_at",dataKey:"publish_at",width:De,cellRenderer:({rowData:i})=>i.publish_at&&rt(i.publish_at)},{title:"Payload",width:Ee,cellRenderer:({rowData:i})=>{let s;return t(ct,{onClick:()=>B(i)},tn(s=a("Extension.openPayload"))?s:{default:()=>[s]})}}];let R="none";const J=(i,s)=>{if(i==="none")return[];const L=[...s],G=L.findIndex(X=>X._id===i);return G>-1?L.slice(G):L},y=async()=>{try{U.value=!0;const i=g.value?Ft:At,{data:s=[],meta:L}=await i(u.clientId,{limit:ln,position:R}),G=s.map(P=>{const{inserted_at:le,mqueue_priority:ge}=P,ye=g.value?`${le}_${ge}`:le;return{...P,_id:ye}});q.value.push(...G);const X=q.value.length;if(await dt(800),q.value=J(L.start,q.value),q.value.length<X){const P=q.value.findIndex(le=>le.msgid===G[0].msgid);P>-1&&j.value.scrollToRow(P)}R=L.position}catch{}finally{U.value=!1}},k=()=>{R="none"},A=()=>{k(),q.value=[],y()},I=V(!1),H=V(""),z=V(""),B=({topic:i,payload:s})=>{z.value=i,H.value=s,I.value=!0},Y=Z.debounce(async i=>{!Z.isUndefined(i==null?void 0:i.scrollTop)&&i.scrollTop>0&&(F.value=i.scrollTop,Q.value&&x.value&&y())},300);return(i,s)=>{const L=Fe,G=h("el-table-v2"),X=Bt,ce=h("el-dialog");return r(),v(ce,{modelValue:e(c),"onUpdate:modelValue":s[1]||(s[1]=P=>ee(c)?c.value=P:null),class:"message-list-dialog",width:1060,title:e(d),"destroy-on-close":""},{default:l(()=>[S("div",Zt,[t(L,{onClick:A})]),S("div",en,[t(G,{ref_key:"TableRef",ref:j,columns:_,data:e(q),width:Pe,height:Le,"row-height":Oe,"scrollbar-always-on":"",onScroll:e(Y)},null,8,["data","onScroll"])]),t(X,{modelValue:e(I),"onUpdate:modelValue":s[0]||(s[0]=P=>ee(I)?I.value=P:null),"raw-payload":e(H),topic:e(z)},null,8,["modelValue","raw-payload","topic"])]),_:1},8,["modelValue","title"])}}}),on=ie({__name:"ClientAttrsDialog",props:{modelValue:{type:Boolean,required:!0},value:{type:Object}},emits:["update:modelValue","save"],setup(o,{emit:f}){const p=o,u=f,{tl:w}=K("Clients"),a=$({get:()=>p.modelValue,set:m=>{u("update:modelValue",m)}});return(m,c)=>{const g=Lt,d=h("el-dialog");return r(),v(d,{modelValue:e(a),"onUpdate:modelValue":c[0]||(c[0]=U=>ee(a)?a.value=U:null),width:"480px",class:"common-dialog client-attrs-dialog","destroy-on-close":"",title:e(w)("clientAttrs"),"close-on-click-modal":!1},{default:l(()=>[t(g,{readonly:"","model-value":o.value},null,8,["model-value"])]),_:1},8,["modelValue","title"])}}}),an={class:"block-header"},rn={class:"vertical-align-center header-content"},cn={class:"actions"},un={class:"stats-tip"},dn={class:"section-header"},pn={key:1,class:"client-does-not-exist"},mn=ie({name:"ClientDetails"}),On=ie({...mn,props:{gateway:{type:String,required:!1,default:""},clientid:{type:String,required:!1,default:""}},emits:["refreshGateway"],setup(o,{emit:f}){const p=o,u=f,w=$(()=>!!p.gateway),a=V(!1),m=V(!0),c=V(!0),g=V(!0),d=V({}),{clientFields:U,snake2pascal:j,getBaseLabel:q}=Ge(),Q={MQTT:{...U,bytes:["recv_oct","send_oct"],packets:["recv_cnt","send_cnt","recv_pkt","send_pkt"],messages:["recv_msg","recv_msg.qos0","recv_msg.qos1","recv_msg.qos2","recv_msg.dropped","recv_msg.dropped.await_pubrel_timeout","send_msg","send_msg.qos0","send_msg.qos1","send_msg.qos2","send_msg.dropped","send_msg.dropped.expired","send_msg.dropped.queue_full","send_msg.dropped.too_large"]},LWM2M:{connection:["node","endpoint_name","lifetime","clientid","username","proto_type","ip_address","connected_at","disconnected_at"],session:["subscriptions","heap_size","reductions"],bytes:["recv_oct","send_oct"],packets:["recv_cnt","send_cnt","recv_pkt"],messages:["send_lw_pkt"]},OCPP:{connection:["node","clientid","username","proto_type","ip_address","keepalive","connected_at","disconnected_at"],session:["subscriptions","heap_size","reductions"],bytes:["recv_oct","send_oct"],packets:["recv_cnt","send_cnt","recv_pkt","send_pkt"],messages:[]},others:{connection:["node","clientid","username","proto_type","ip_address","keepalive","connected_at","disconnected_at"],session:["subscriptions","heap_size","reductions"],bytes:["recv_oct","send_oct"],packets:["recv_cnt","send_cnt","recv_pkt","send_pkt"],messages:[]}},F=V([]),x=bt(),ne=vt(),{tl:_}=K("Clients"),{t:R}=pt(),{noLocalOpts:J,retainAsPublishedOpts:y}=Ae(),{getBackRoute:k}=Ot("clients"),A=V(!1),I=V("mqueue"),H=$(()=>x.query.from==="slow-sub"),z=$(()=>{const n=H.value?"slow-sub":"subscription";return k({name:n})}),B=$(()=>x.params.clientId||p.clientid),Y=$(()=>String(d.value.proto_name).toUpperCase()),i=$(()=>{const n=Object.keys(Q);return Y.value==="MQISDP"?Q.MQTT:Array.prototype.includes.call(n,Y.value)?Q[Y.value]:p.gateway===be.OCPP?Q.OCPP:Q.others}),s=$(()=>d.value.proto_name==="MQTT"&&d.value.proto_ver===5),L=[be.CoAP,be.MQTT_SN,be.STOMP],G=$(()=>!w.value||w.value&&L.includes(p.gateway)),X=async()=>{if(d.value===null)return;let n=_("willDisconnectTheConnection"),T=_("successfulDisconnection");d.value.connected||(n=_("willCleanSession"),T=_("successfulCleanSession")),Be.confirm(n,{confirmButtonText:R("Base.confirm"),cancelButtonText:R("Base.cancel"),confirmButtonClass:"confirm-danger",type:"warning"}).then(()=>p.gateway?ce():d.value===null?void 0:Dt(d.value.clientid)).then(()=>{d.value!==null&&(p.gateway||ne.push({name:"clients"}),d.value.connected=!1,gt.success(T))}).catch(()=>{})},ce=async()=>d.value===null?void 0:await Tt(p.gateway,d.value.clientid)?(u("refreshGateway"),Promise.resolve()):Promise.reject(),P=async()=>{if(p.gateway)return le();m.value=!0;const n=await Rt(B.value).catch(T=>{T.response.status===404&&(g.value=!1)});n?(g.value=!0,d.value=n):d.value={},m.value=!1},le=async()=>{m.value=!0;const n=await Ct(p.gateway,B.value).catch(()=>{m.value=!1});n?d.value=n:d.value={},m.value=!1},ge=()=>{a.value=!0},ye=()=>{ue()},ue=async()=>{if(p.gateway)return He();c.value=!0;const n=await Et(B.value).catch(()=>{c.value=!1});n?F.value=n:F.value=[],c.value=!1},He=async()=>{c.value=!0;const n=await Vt(p.gateway,B.value).catch(()=>{c.value=!1});n?F.value=n:F.value=[],c.value=!1},he=n=>{if(n==="clean_start")return d.value.proto_ver===5?"Clean Start":_("cleanSession");if(p.gateway){if(n==="recv_cnt")return _("recvSocketCnt");if(n==="send_cnt")return _("sendSocketCnt")}else{if(n==="recv_pkt")return _(j(n),{proto:" MQTT "});if(n==="send_pkt")return _(j(n),{proto:" MQTT "})}return q(n)},ze=n=>_(`${n}Desc`),we=n=>n.map(T=>{const N=he(T),ke=d.value[T];return{label:N,value:ke}}),Ne=n=>{const T=_("unsubscribeTitle");let N=n.topic;d.value.mountpoint&&(N=N.replace(d.value.mountpoint,"")),Be.confirm(T,{confirmButtonText:R("Base.confirm"),cancelButtonText:R("Base.cancel"),confirmButtonClass:"confirm-danger",type:"warning"}).then(async()=>p.gateway?(n.clientid||(n.clientid=B.value),We(n.clientid,N)):Ut(n.clientid,N)).then(()=>{ue()}).catch(()=>{})},We=async(n,T)=>await St(p.gateway,n,T)?Promise.resolve():Promise.reject(),Te=n=>["mqueue","inflight"].includes(n),je=n=>Te(n)||["reductions"].includes(n),Ye=n=>{I.value=n,A.value=!0},de=V(!1),Ke=()=>{de.value=!0};return P(),ue(),(n,T)=>{const N=nt,ke=wt,pe=h("el-tooltip"),xe=ht,Se=Fe,me=h("el-button"),Ce=h("el-descriptions-item"),Ie=h("el-descriptions"),re=h("el-card"),_e=h("el-col"),Je=yt,$e=h("el-row"),D=h("el-table-column"),fe=h("el-table"),Xe=_t,Ze=ve,et=h("el-icon"),se=ft("loading");return r(),M(E,null,[S("div",{class:mt(["client-details app-wrapper",{"in-drawer":!!o.gateway}])},[S("div",an,[t(xe,{item:{name:e(B),route:e(z),backFunc:o.gateway?()=>{u("refreshGateway")}:void 0}},{content:l(()=>[t(pe,{content:e(B)},{default:l(()=>[S("p",rn,[t(ke,{content:e(B)},{default:l(()=>[t(N,null,{default:l(()=>[O(C(e(B)),1)]),_:1})]),_:1},8,["content"])])]),_:1},8,["content"])]),_:1},8,["item"]),S("div",cn,[t(pe,{content:n.$t("Base.refresh"),placement:"top"},{default:l(()=>[t(Se,{class:"icon-button","no-text":"",onClick:P})]),_:1},8,["content"]),t(pe,{content:e(d).connected?e(_)("kickOut"):e(_)("cleanSession"),placement:"top"},{default:l(()=>[e(g)?(r(),v(me,{key:0,class:"icon-button",type:"danger",icon:e(Pt),disabled:!n.$hasPermission("delete"),plain:"",onClick:X},null,8,["icon","disabled"])):W("",!0)]),_:1},8,["content"])])]),e(g)?(r(),M(E,{key:0},[t($e,{gutter:26,class:"client-row block"},{default:l(()=>[t(_e,{span:12},{default:l(()=>[oe((r(),v(re,{class:"top-border client-info"},{default:l(()=>[t(Ie,{title:e(_)("connectionInfo"),border:"",column:1,size:"large"},{default:l(()=>[t(Ce,{label:e(_)("connectedStatus")},{default:l(()=>[t(Ve,{client:e(d),field:"connected"},null,8,["client"])]),_:1},8,["label"]),(r(!0),M(E,null,ae(e(i).connection,b=>(r(),v(Ce,{key:b,label:he(b)},{default:l(()=>[b!=="client_attrs"?(r(),v(Ve,{key:0,client:e(d),field:b},null,8,["client","field"])):(r(),v(me,{key:1,type:"primary",size:"small",plain:"",onClick:Ke},{default:l(()=>[O(C(e(R)("Base.view")),1)]),_:1}))]),_:2},1032,["label"]))),128))]),_:1},8,["title"])]),_:1})),[[se,e(m)]])]),_:1}),t(_e,{span:12},{default:l(()=>[oe((r(),v(re,{class:"top-border client-session"},{default:l(()=>[S("span",un,"("+C(n.$t("Base.current"))+" / "+C(n.$t("Base.max"))+")",1),t(Ie,{title:e(_)("sessionInfo"),border:"",column:1,size:"large"},{default:l(()=>[(r(!0),M(E,null,ae(e(i).session,b=>(r(),v(Ce,{key:b,label:he(b)},{default:l(()=>[S("div",null,[t(Ve,{client:e(d),field:b},null,8,["client","field"]),Te(b)?(r(),v(pe,{key:0,disabled:!e(d).durable,content:e(_)("cannotViewMsg"),"show-after":500,placement:"top"},{default:l(()=>[t(me,{class:"btn-view-msg",type:"primary",plain:!e(d).durable,disabled:e(d).durable,size:"small",onClick:tt=>Ye(b)},{default:l(()=>[O(C(e(_)("viewMsg")),1)]),_:2},1032,["plain","disabled","onClick"])]),_:2},1032,["disabled","content"])):W("",!0),je(b)?(r(),v(Je,{key:1,class:"client-info-tips",content:ze(b)},null,8,["content"])):W("",!0)])]),_:2},1032,["label"]))),128))]),_:1},8,["title"])]),_:1})),[[se,e(m)]])]),_:1})]),_:1}),S("h2",null,C(n.$t("components.metrics")),1),t($e,{class:"block client-metrics",gutter:26},{default:l(()=>[t(_e,{span:12},{default:l(()=>[oe((r(),v(re,{class:"top-border table-card bytes"},{default:l(()=>[t(fe,{data:we(e(i).bytes)},{default:l(()=>[t(D,{prop:"label","min-width":"140",label:e(_)("bytes")},null,8,["label"]),t(D,{prop:"value",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])]),_:1})),[[se,e(m)]]),oe((r(),v(re,{class:"top-border table-card packets"},{default:l(()=>[t(fe,{data:we(e(i).packets)},{default:l(()=>[t(D,{prop:"label","min-width":"140",label:e(_)("packets")},null,8,["label"]),t(D,{prop:"value",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])]),_:1})),[[se,e(m)]])]),_:1}),t(_e,{span:12},{default:l(()=>[oe((r(),v(re,{class:"top-border table-card client messages"},{default:l(()=>[t(fe,{data:we(e(i).messages)},{default:l(()=>[t(D,{prop:"label","min-width":"140",label:e(_)("messages")},null,8,["label"]),t(D,{prop:"value",sortable:"","class-name":"sortable-without-header-text"})]),_:1},8,["data"])]),_:1})),[[se,e(m)]])]),_:1})]),_:1}),S("div",dn,[S("div",null,C(e(_)("currentSubscription")),1),S("div",null,[t(Se,{onClick:ye}),e(G)?(r(),v(Xe,{key:0,onClick:ge},{default:l(()=>[O(C(e(_)("addASubscription")),1)]),_:1})):W("",!0)])]),oe((r(),v(fe,{class:"subs",data:e(F),key:"topic"},{default:l(()=>[t(D,{prop:"topic",label:n.$t("Base.topic")},{default:l(({row:b})=>[t(Ze,{content:b.topic},null,8,["content"])]),_:1},8,["label"]),t(D,{prop:"qos","min-width":"110px",label:"QoS"}),e(s)?(r(),M(E,{key:0},[t(D,{prop:"nl",label:e(_)("noLocal")},{default:l(({row:b})=>[O(C(("getLabelFromValueInOptionList"in n?n.getLabelFromValueInOptionList:e(qe))(b.nl,e(J))),1)]),_:1},8,["label"]),t(D,{prop:"rap",label:e(_)("retainAsPublished")},{default:l(({row:b})=>[O(C(("getLabelFromValueInOptionList"in n?n.getLabelFromValueInOptionList:e(qe))(b.rap,e(y))),1)]),_:1},8,["label"]),t(D,{prop:"rh",label:e(_)("retainHandling")},null,8,["label"])],64)):W("",!0),e(G)?(r(),v(D,{key:1,label:n.$t("Base.operation")},{default:l(({row:b})=>[t(me,{disabled:!n.$hasPermission("delete"),plain:"",size:"small",onClick:tt=>Ne(b)},{default:l(()=>[O(C(n.$t("Clients.unsubscribe")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["label"])):W("",!0)]),_:1},8,["data"])),[[se,e(c),void 0,{lock:!0}]]),t(Xt,{visible:e(a),"onUpdate:visible":T[0]||(T[0]=b=>ee(a)?a.value=b:null),"client-id":e(d).clientid,gateway:o.gateway,"is-MQTT-Version5":e(s),"onCreate:subs":ue},null,8,["visible","client-id","gateway","is-MQTT-Version5"])],64)):(r(),M("div",pn,[t(et,null,{default:l(()=>[t(e($t))]),_:1}),S("span",null,C(e(_)("clientDoesNotExist")),1)]))],2),t(sn,{modelValue:e(A),"onUpdate:modelValue":T[1]||(T[1]=b=>ee(A)?A.value=b:null),"client-id":e(B),type:e(I)},null,8,["modelValue","client-id","type"]),t(on,{modelValue:e(de),"onUpdate:modelValue":T[2]||(T[2]=b=>ee(de)?de.value=b:null),value:e(d).client_attrs},null,8,["modelValue","value"])],64)}}});export{On as default};
