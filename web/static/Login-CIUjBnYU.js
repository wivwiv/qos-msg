import{g as F,d as Gt,z as Jt,A as Te,j as Me,T as Xt,c as j,u as c,m as te,x as J,w as E,r as O,h as Kt,s as Ht,i as jt,U as Wt,V as Zt,o as N,b as y,a as b,t as I,e as $,W as rt,K as ke,X as Ue,p as Ie,v as st,Y as it,y as at,Z as xt,$ as $t,G as en,H as tn,N as nn}from"./index-Dp_94g6t.js";import{c as on}from"./common-7tZUksOK.js";import{u as rn,c as sn}from"./useSSO-Se20iWK9.js";import{M as an,L as ln}from"./http-DdqGSA6b.js";import{u as un}from"./useEditionConfigs-BX9wkpw0.js";import{u as cn}from"./useDocLink-Ksjh4w9I.js";import{u as dn}from"./useFormRules-Dd-VLxGD.js";import{u as fn}from"./useCopy-xLykWTHO.js";import{u as gn}from"./useDataNotSaveConfirm-CX0RqJFS.js";import{c as hn}from"./copy-document-DOc9hYqD.js";import{a as mn}from"./arrow-left-B1ek5uAF.js";const lt=""+new URL("img-change-default-pwd-2FIm2oG3.png",import.meta.url).href,pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABTVBMVEUAAAD/mgDy8vPMztLu7/D/mQD7+/z29vf/mQDT1dextLqipq2YmJ/8/Pz/mgC2ur6doKibn6eZnqXp6uvX2dvO0dTCxcnAw8eztryPk6Ds7e7Z293/mQD/mgD/mgCusrigpav+/v75+fn/mgDc3uD/mgD/mQC7vsO5u8H/mgD/mgCrrrSorLOkqK6gp63/mwCgo6yfpamdo6n/nQCYmKGQm5uTmp//pwDj5efg4ePe4OLU1tr/mgDFx8zEx8v/mQC9v8S1uL2ytrqoq7H/mgD/nACboqj/mwCeoqb/mwCWnaT/ogD/mwDz9PXl5+nMz9PHys7/mQC5vMG4u8C1uL7/mgCtsbeorrP/mQClqrGfo6r/mgD/nQCSmKL/mQD/nADa29/Jy8//mQD/mQD/mwCjqa3/mwD/nAD/mwCen6fw8fL/mwD/nQD/////mQDzqEs2AAAAbXRSTlMA/v3n/fv+/vDtrnAP/s+9Sjcr+/Hq2NS1CPzz5NTDpmT+/vj19d/LxL6qlo1+amReWVQ7HRcUBfn49+/q3dvbzbiyh3psUU1BKCMfE/766ODJxsG7sZ6Qh4BcQS8ZGQr04p6XjHpzWlVF/aM0/zbBhgAAA2NJREFUWMPskttr4lAQxgcjBjWSmHiJzYNRhApeULHiBcUqFBG2ShWlgrB92IcuzP//ul8mx6zgdp/74A9xvjOcuZyZ0J07d65Z7SbDmO5M23L65botCsku3JSt9NJ1LZj+QXP0mFc4rOnCIM8XtOD2mDnzSUIOvjwJJ8giUTnGioczKZo4/fByTgY2iXMddkEB/QpkwhC9h2xTSkK9mgOzIkU7XkxLv0V4l0R+VPadA9Kik8xxauO4yRKwG1uDbkDHGkycWS8ReER9ZpOAUWUuBM1Vn+hrmmgPZibdAg9B4bMoDd874fST/kOP+bfkCcs+ZTjWVd3UYQ0y0dILfU0H74Tpo+9csM9gFpi6H77ug8iqYN6pfzzi82gW68eujwRqYAncemPekyYrOWNFDRIXUsxaJbrGQoBQVQlS0C2pmg60JvvI9AmY6AHE5hZFdBGnJ6f50QOrBCuIOQ0SwTfQxW3ZR5KE7NsrByTKpFg7zLuByGdJAEbM42DwHjSG0KMaMwIUL6bkaEKqqJqIKIEUZHvH/AitIXaNc5auSBdRQuk880xJeGPGZevHCfMyHMhH83b/ca4YJHjR8wwMAe2CEvqeVtEFNIbwgMz7mwSs1olCFfk4bPQiywJbZixuKBrJ8JMrfmNAISazo+QCUSN/YLm4BXLibDBQT9OgVK4p61qqlV4+12RPIaUaKzLzEf59WU2GwYHUVyHjBAX+i9MnxWrMQtIKhjc5R2X1rMisjq33RJ6GfOEVnoiWuS24FoFyvaT6OnU6NoXYnU60QytV0LTNRisb9G340x4dszgIBFEAnlcsbOUvUBtR0MYihY1gYwiSNCkEQTGQhCRwx/v/5SVRL2IwZwjX+ZXDzPB21t1u5CMG1Uk+YpFJJe8JA8PzrHzVZSDsWiZbbxUbOP1uIIKpp9gowtHaAcmvthaAtxSZTLLYiIQeCPIorSV4hWQpU0RHfes2ydVjq8s7Za/ktV1qKV4hNYh+3Qcbyirq0fsdvLbNXYimIX0Xlx04SbCsBi8vfFOha8gjWYODtFEO9kFp07MMIzG124624lJE9tQyVPvg33Rz6hihPMtsxZcQp3L3DX/kj4p4PIbaLqR18GVUtTfBJ3Dss0wWhYGl8Zg17XQt79tl5Tm8lJnMZrP/9gN9cjmnHeg8dAAAAABJRU5ErkJggg==",wn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABKVBMVEUAAAAwbuYvbuYvbeYzcekvbeYvbuY2dfAvbuYvbeYvbeYwbuYvbeYvbuYwbuYxcOc4fecvbuYwbuYvb+c0dO4vbeYvbucwbucxb+cwbuYwbucxcOpGhP8wbuYwbuYvb+Yxb+Y6dOgwbuUwbeYwbeYvcewxdusvbeX///8yb+VIfuj9/f77/P74+v6wyPU8dubu8/zl7fvh6vuRsfFfjuv1+P3p7/zx9f3d5/rK2fiGqvBEfOc3c+Y1ceXz9v2rxPSBpu9wmu1tmexjkutNguk5dObU4fnF1/fB1Pekv/OduvKZuPJ7o+53oO5bi+pBeufa5fq70PaowvShvfOWtfKKrfBrl+xnlOxWiepAeefQ3vnN3PjI2Pi2zPaOr/BShenX4/p1nu1ViOlIoDlRAAAAJ3RSTlMAovfrJryMEvLYsaWehE88Ct52YQ7DbFhJmH8vBuN5ZjMWz8mmGxp3A+YPAAADWUlEQVRYw+3XaVfTQBQGYBWKoFaWAor7ft8mTdJ9X6A7XdgXkU39/z/CmSZlJsk4op88Hp/DYUpz7iV9J7k5vfPf32/x1evZP69+8XqZmMjin5Uvrb8kz9rT3y9ffTVDkndPfq/8fnSeAhZiL25d/nHuHim8XF+6VfnsBitXm1lZ/XX53ThJtkoVf4vofW35mwfk18Mm+c3Pffr5xt2loAZOKeje+s8arFHIEb5T2Iq6/imFbWNHFaZ6O0IfwGleFVAaX1PIY2WDZffg7s0GJOBKDabvVb11TlX/1jtpM0PM5z1IrCHf3Frf8j7QmqrBY/fYJjAkOub/PWcfA92jCxPAnkGdC1htbyNUl/UcubJF9Gx+4qMqtYEeUWWbtcsfFVFqk2dRt4m1SzD7Dv8gwBfiawpMRruRS+IOyALIT3JrAUXiyvyUpIv8gWJ4iaM2mGSTvWqyTmzpTN6RL4mZcIMVmmqbSKUBNKo0AursjPhfJfZDQnhSittoCGyedQEUv50DyByagHlMRcCgG7FQAzHB9lCvUbUPSWI8ieGKbmyE5gBNdYB9tsQbor7eIiID6EsTLtggRlPX0/0qARhufgGwRVwBRRKCg+URTZ0CY34GrTxwQLRbYHFWiOnCIiE46Rfkq2B8NrosgDlkjSwwXwfZeBc5EqKBOS6O7AB5E678iTOAp5BDkoSIcpjUrk+ukvBYYEz+IgfP/la7Nh1s/gZR4qppuM4b5dYZ2XAZZDQzdgoT5gG53vgaRIhzUvnDVmUbOCHuEi53LJ4DZef0INkjl3+0viehknBvwbMEYDfrQMPLNq2ZrBGSHABltmSApMN/5xyiThGBR0QsOI4EJ4nEiOKpSZ8aW44p3mdbGddNZt8jqZUAMltAmpeM2er0gKRBsuDzfnWBJCMTKEwv4S4rBqwsCaq5PDtPEp4d6t+MOO3u2GDSn0kWUU5lmeGN9YS7XDgkW1Y+o6Mk6yNvwWUVsO1/vD4P1oaDrOTSldpJ5tAelE+r7WQ6rgxQE6Tt2/UhjrQBhoPMIleVE0HCCAeoCzJrDki2nzN0AQrPbiYj+XWUAeqDFLQBhoPUEQHqgtQQAeqDDAsHqA9SbV4EqBUltZnFW39Pefbww0PurusRtxF7e+e/f9UPA9BFUwjW5FAAAAAASUVORK5CYII=",An="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAilBMVEUAAAAgiuUfiOUqlvkfiOYeiOYeieYhjesgi+ceiOYeieYfiugeiOYeieYgiecmj+oeieYeieYeieYeiecfiecmkew8qv8eieYeieYeieYeieYfieYeieUgiucgjOgjjOoii+oeiOYfieYfieYfiOYfieYgieYfieYeiuYijOkhiu8eieYkiOceiOXYKIGkAAAALXRSTlMAWfgI5838GTTxq0W7ilYU69SZZTsNBPXbs6Z/d0wnIx3gxZ+ThHBrXC0PuCtUci44AAABmklEQVRYw+3V2ZKqMBQF0N2EURQRZ1tbbWe79///3o0ahFwZgv3KeoFTFahD9qGCVqtlZrzCn2ycL/yFb3cAgbdFU/pA0sebPskucLUSvEUsSIbAkO4Fb+h/k3Tkjbx20dzvllIErCk1zzIMKM3uGyENJmjm5PJmKG9nvDmiicmed7YARryLm0Q5/uHDUhYJH/Yw5g34EFwBEfDBNR/pBZWeLCKm5jA0omJ5sprzKYQZh0pymyaXinGUQ+Y/+sick1ECNpWOaicTX1Gvx5Qvqws1PdRaW1S66nV51hp15vqed6nroEbIlIObjU3dCJUmA6YiNRQWNQ4qnZiaQTlTN0SFflyw7kCNPUa5fbZM4KlDzQGlfl2mlsgIh3nWBkX0zIK0z6IoFiixKp043zKJUsyY+491HyZRLvmUFBxReWcU8AKm3DWUkii2Aq921QOvR/GJFz4zfmGHNjNT77VFO46DqWW5peegP2Vmh2YmX9FhHlDr0lQ/PO4ci//7Rj1xOfd+bJaIUMVbLRcDl1W2ouLx8MOAh1arlfcPITJ+CyW+z3EAAAAASUVORK5CYII=",Cn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABklBMVEUAAABFhfj8vAVDh/Q1qVQ4r1j8vgdChfX8vQXrRDZDh/XrQzX8vQXrQzX7vQXrQzX8vgU5q1v/xAnqQzZChvVxrzv8vQX8vQZDhvX8vQbrRDb8vQZChfTqQzVChfVChfVChvX9vgbrRDZDhfftSTT/vgjuRjVHhv/ySTtHiv/yTjv/yRdRj///XlFChvRChvTrQzVChvXrQzXqQzZDhfVChvVDh/RDhvb7vQb9vQb9vgdCh/VEhfb8vgb7vgftRjb7vQdEh/ZGifRHivfwTThKiv/3mRQ1qFTtWi1wrzykXoVDhvRxrjw1qVTtVC+aY5FDhfXqRDX7vQb8vQXrRDX8vQY1qVT8vAb8vQbrRDZDhfX8vAbrRDY9l6zrRDc1qFPrRDaXsiz7vQU2pWQ2qVRDhvVDhvVChvbqQzU0qlU1q1RAj9JEiPVEiPU1qVZEiPfuRTg1qlX/vwXwSTpGi/f/wQhgt0hFifX/wgxChfT7vAXqQzU0qFM5m5KlXoSnXYLtVS7vZifwcSPxcyL0ihn5rgs1U0j0AAAAeXRSTlMAQ/l5eSBL+/uQYPv07cp9YCMc9vXs7OXk4Nzb2cXCuql5eFtbOy0VEhANCwgG7eni0c2toJmQh4J9dGdWVUdDQzYvHhkM+Pf18vHw8Ofl4N7T0b27ube3tbOsqKafmpmWkY6FgH56cG5mUlBPSz48OzAwIyEhIBoVf1+PlQAAAhxJREFUWMPt0+dX2lAYx/EHbA0JICAUUQEVVGS5tdrWrd177733bm9CW+34vyvqk9wkd8S3nnzece75fQ/nJgGfzydWX4jduBANJ6PjtwuDu58P3o8alNHY6u7mE4ZTWB3yvo+FDYZov8f5UM7guOtp/6nL4DnZC3Kr/P0vQuSF+rhgv+mgLKDSk+RltRBTc8mtHz9JkxIQ799T867+ys6tPh/FPSGZmjCQs557oQ6minqOoBbRfqE5Xd/4/WfjuOOhTxE0XBYEJoz1v//0LaHrc1X6aJKgw/x95exRnZKOg6WWxUCeH4hHdLsr7dZhgKAl3n5Gd+mkCmMYSGns/SGdodsqPCXia5jXWYKLgJasgPLava92MvetYPpGLMMlV6CPv0eEMukKdJiryK14fKYb95QRYlFWHPtWc9/2ZfsfhXBvWXmiYMD1WT40r72KDwX3tOVTGBhznLRhYB7QADBoBJXYV5AGifMYeAc2QbwBWaAXA0fABr+Ci7LANAaKYIOvUei7JJDHwBuwuYaXOCvel1IYWLYfzGIgtCgM3MR9ynHwUTcLffz52hRBPcB7EYIPHr9N7EeJVwFTcTqDc3wIlDncH2jY/CBMGXC5hHtPgaI70J5u7k83JAG8AYaBiB480fAUyJaBWejA/y8JZD8D29djngI9ZeBJXJUHRjQQ+XDvjCig5LUayCRevthnenSnxfRMC6yBz7dX/QcRhvPsy9bFmgAAAABJRU5ErkJggg==";var ne={},yn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ft={},V={};let Oe;const vn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];V.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};V.getSymbolTotalCodewords=function(e){return vn[e]};V.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};V.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Oe=e};V.isKanjiModeEnabled=function(){return typeof Oe<"u"};V.toSJIS=function(e){return Oe(e)};var ve={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},t.from=function(o,n){if(t.isValid(o))return o;try{return e(o)}catch{return n}}})(ve);function gt(){this.buffer=[],this.length=0}gt.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let s=0;s<e;s++)this.putBit((t>>>e-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var bn=gt;function ce(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ce.prototype.set=function(t,e,s,o){const n=t*this.size+e;this.data[n]=s,o&&(this.reservedBit[n]=!0)};ce.prototype.get=function(t,e){return this.data[t*this.size+e]};ce.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s};ce.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Bn=ce,ht={};(function(t){const e=V.getSymbolSize;t.getRowColCoords=function(o){if(o===1)return[];const n=Math.floor(o/7)+2,r=e(o),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,a=[r-7];for(let l=1;l<n-1;l++)a[l]=a[l-1]-i;return a.push(6),a.reverse()},t.getPositions=function(o){const n=[],r=t.getRowColCoords(o),i=r.length;for(let a=0;a<i;a++)for(let l=0;l<i;l++)a===0&&l===0||a===0&&l===i-1||a===i-1&&l===0||n.push([r[a],r[l]]);return n}})(ht);var mt={};const En=V.getSymbolSize,ut=7;mt.getPositions=function(e){const s=En(e);return[[0,0],[s-ut,0],[0,s-ut]]};var pt={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const r=n.size;let i=0,a=0,l=0,u=null,g=null;for(let P=0;P<r;P++){a=l=0,u=g=null;for(let p=0;p<r;p++){let h=n.get(P,p);h===u?a++:(a>=5&&(i+=e.N1+(a-5)),u=h,a=1),h=n.get(p,P),h===g?l++:(l>=5&&(i+=e.N1+(l-5)),g=h,l=1)}a>=5&&(i+=e.N1+(a-5)),l>=5&&(i+=e.N1+(l-5))}return i},t.getPenaltyN2=function(n){const r=n.size;let i=0;for(let a=0;a<r-1;a++)for(let l=0;l<r-1;l++){const u=n.get(a,l)+n.get(a,l+1)+n.get(a+1,l)+n.get(a+1,l+1);(u===4||u===0)&&i++}return i*e.N2},t.getPenaltyN3=function(n){const r=n.size;let i=0,a=0,l=0;for(let u=0;u<r;u++){a=l=0;for(let g=0;g<r;g++)a=a<<1&2047|n.get(u,g),g>=10&&(a===1488||a===93)&&i++,l=l<<1&2047|n.get(g,u),g>=10&&(l===1488||l===93)&&i++}return i*e.N3},t.getPenaltyN4=function(n){let r=0;const i=n.data.length;for(let l=0;l<i;l++)r+=n.data[l];return Math.abs(Math.ceil(r*100/i/5)-10)*e.N4};function s(o,n,r){switch(o){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}t.applyMask=function(n,r){const i=r.size;for(let a=0;a<i;a++)for(let l=0;l<i;l++)r.isReserved(l,a)||r.xor(l,a,s(n,l,a))},t.getBestMask=function(n,r){const i=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let u=0;u<i;u++){r(u),t.applyMask(u,n);const g=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(u,n),g<l&&(l=g,a=u)}return a}})(pt);var be={};const W=ve,we=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ae=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];be.getBlocksCount=function(e,s){switch(s){case W.L:return we[(e-1)*4+0];case W.M:return we[(e-1)*4+1];case W.Q:return we[(e-1)*4+2];case W.H:return we[(e-1)*4+3];default:return}};be.getTotalCodewordsCount=function(e,s){switch(s){case W.L:return Ae[(e-1)*4+0];case W.M:return Ae[(e-1)*4+1];case W.Q:return Ae[(e-1)*4+2];case W.H:return Ae[(e-1)*4+3];default:return}};var wt={},Be={};const le=new Uint8Array(512),Ce=new Uint8Array(256);(function(){let e=1;for(let s=0;s<255;s++)le[s]=e,Ce[e]=s,e<<=1,e&256&&(e^=285);for(let s=255;s<512;s++)le[s]=le[s-255]})();Be.log=function(e){if(e<1)throw new Error("log("+e+")");return Ce[e]};Be.exp=function(e){return le[e]};Be.mul=function(e,s){return e===0||s===0?0:le[Ce[e]+Ce[s]]};(function(t){const e=Be;t.mul=function(o,n){const r=new Uint8Array(o.length+n.length-1);for(let i=0;i<o.length;i++)for(let a=0;a<n.length;a++)r[i+a]^=e.mul(o[i],n[a]);return r},t.mod=function(o,n){let r=new Uint8Array(o);for(;r.length-n.length>=0;){const i=r[0];for(let l=0;l<n.length;l++)r[l]^=e.mul(n[l],i);let a=0;for(;a<r.length&&r[a]===0;)a++;r=r.slice(a)}return r},t.generateECPolynomial=function(o){let n=new Uint8Array([1]);for(let r=0;r<o;r++)n=t.mul(n,new Uint8Array([1,e.exp(r)]));return n}})(wt);const At=wt;function qe(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}qe.prototype.initialize=function(e){this.degree=e,this.genPoly=At.generateECPolynomial(this.degree)};qe.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(e.length+this.degree);s.set(e);const o=At.mod(s,this.genPoly),n=this.degree-o.length;if(n>0){const r=new Uint8Array(this.degree);return r.set(o,n),r}return o};var Rn=qe,Ct={},Z={},Ge={};Ge.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var X={};const yt="[0-9]+",Pn="[A-Z $%*+\\-./:]+";let ue="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ue=ue.replace(/u/g,"\\u");const Sn="(?:(?![A-Z0-9 $%*+\\-./:]|"+ue+`)(?:.|[\r
]))+`;X.KANJI=new RegExp(ue,"g");X.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");X.BYTE=new RegExp(Sn,"g");X.NUMERIC=new RegExp(yt,"g");X.ALPHANUMERIC=new RegExp(Pn,"g");const Tn=new RegExp("^"+ue+"$"),Mn=new RegExp("^"+yt+"$"),kn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");X.testKanji=function(e){return Tn.test(e)};X.testNumeric=function(e){return Mn.test(e)};X.testAlphanumeric=function(e){return kn.test(e)};(function(t){const e=Ge,s=X;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(r,i){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!e.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?r.ccBits[0]:i<27?r.ccBits[1]:r.ccBits[2]},t.getBestModeForData=function(r){return s.testNumeric(r)?t.NUMERIC:s.testAlphanumeric(r)?t.ALPHANUMERIC:s.testKanji(r)?t.KANJI:t.BYTE},t.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},t.isValid=function(r){return r&&r.bit&&r.ccBits};function o(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(r,i){if(t.isValid(r))return r;try{return o(r)}catch{return i}}})(Z);(function(t){const e=V,s=be,o=ve,n=Z,r=Ge,i=7973,a=e.getBCHDigit(i);function l(p,h,v){for(let C=1;C<=40;C++)if(h<=t.getCapacity(C,v,p))return C}function u(p,h){return n.getCharCountIndicator(p,h)+4}function g(p,h){let v=0;return p.forEach(function(C){const U=u(C.mode,h);v+=U+C.getBitsLength()}),v}function P(p,h){for(let v=1;v<=40;v++)if(g(p,v)<=t.getCapacity(v,h,n.MIXED))return v}t.from=function(h,v){return r.isValid(h)?parseInt(h,10):v},t.getCapacity=function(h,v,C){if(!r.isValid(h))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=n.BYTE);const U=e.getSymbolTotalCodewords(h),A=s.getTotalCodewordsCount(h,v),B=(U-A)*8;if(C===n.MIXED)return B;const d=B-u(C,h);switch(C){case n.NUMERIC:return Math.floor(d/10*3);case n.ALPHANUMERIC:return Math.floor(d/11*2);case n.KANJI:return Math.floor(d/13);case n.BYTE:default:return Math.floor(d/8)}},t.getBestVersionForData=function(h,v){let C;const U=o.from(v,o.M);if(Array.isArray(h)){if(h.length>1)return P(h,U);if(h.length===0)return 1;C=h[0]}else C=h;return l(C.mode,C.getLength(),U)},t.getEncodedBits=function(h){if(!r.isValid(h)||h<7)throw new Error("Invalid QR Code version");let v=h<<12;for(;e.getBCHDigit(v)-a>=0;)v^=i<<e.getBCHDigit(v)-a;return h<<12|v}})(Ct);var vt={};const Ye=V,bt=1335,Un=21522,ct=Ye.getBCHDigit(bt);vt.getEncodedBits=function(e,s){const o=e.bit<<3|s;let n=o<<10;for(;Ye.getBCHDigit(n)-ct>=0;)n^=bt<<Ye.getBCHDigit(n)-ct;return(o<<10|n)^Un};var Bt={};const In=Z;function oe(t){this.mode=In.NUMERIC,this.data=t.toString()}oe.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};oe.prototype.getLength=function(){return this.data.length};oe.prototype.getBitsLength=function(){return oe.getBitsLength(this.data.length)};oe.prototype.write=function(e){let s,o,n;for(s=0;s+3<=this.data.length;s+=3)o=this.data.substr(s,3),n=parseInt(o,10),e.put(n,10);const r=this.data.length-s;r>0&&(o=this.data.substr(s),n=parseInt(o,10),e.put(n,r*3+1))};var Dn=oe;const _n=Z,De=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function re(t){this.mode=_n.ALPHANUMERIC,this.data=t}re.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};re.prototype.getLength=function(){return this.data.length};re.prototype.getBitsLength=function(){return re.getBitsLength(this.data.length)};re.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let o=De.indexOf(this.data[s])*45;o+=De.indexOf(this.data[s+1]),e.put(o,11)}this.data.length%2&&e.put(De.indexOf(this.data[s]),6)};var Nn=re;const Ln=Z;function se(t){this.mode=Ln.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}se.getBitsLength=function(e){return e*8};se.prototype.getLength=function(){return this.data.length};se.prototype.getBitsLength=function(){return se.getBitsLength(this.data.length)};se.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var Vn=se;const Yn=Z,Qn=V;function ie(t){this.mode=Yn.KANJI,this.data=t}ie.getBitsLength=function(e){return e*13};ie.prototype.getLength=function(){return this.data.length};ie.prototype.getBitsLength=function(){return ie.getBitsLength(this.data.length)};ie.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=Qn.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var Fn=ie,Et={exports:{}};(function(t){var e={single_source_shortest_paths:function(s,o,n){var r={},i={};i[o]=0;var a=e.PriorityQueue.make();a.push(o,0);for(var l,u,g,P,p,h,v,C,U;!a.empty();){l=a.pop(),u=l.value,P=l.cost,p=s[u]||{};for(g in p)p.hasOwnProperty(g)&&(h=p[g],v=P+h,C=i[g],U=typeof i[g]>"u",(U||C>v)&&(i[g]=v,a.push(g,v),r[g]=u))}if(typeof n<"u"&&typeof i[n]>"u"){var A=["Could not find a path from ",o," to ",n,"."].join("");throw new Error(A)}return r},extract_shortest_path_from_predecessor_list:function(s,o){for(var n=[],r=o;r;)n.push(r),s[r],r=s[r];return n.reverse(),n},find_path:function(s,o,n){var r=e.single_source_shortest_paths(s,o,n);return e.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(s){var o=e.PriorityQueue,n={},r;s=s||{};for(r in o)o.hasOwnProperty(r)&&(n[r]=o[r]);return n.queue=[],n.sorter=s.sorter||o.default_sorter,n},default_sorter:function(s,o){return s.cost-o.cost},push:function(s,o){var n={value:s,cost:o};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Et);var zn=Et.exports;(function(t){const e=Z,s=Dn,o=Nn,n=Vn,r=Fn,i=X,a=V,l=zn;function u(A){return unescape(encodeURIComponent(A)).length}function g(A,B,d){const m=[];let R;for(;(R=A.exec(d))!==null;)m.push({data:R[0],index:R.index,mode:B,length:R[0].length});return m}function P(A){const B=g(i.NUMERIC,e.NUMERIC,A),d=g(i.ALPHANUMERIC,e.ALPHANUMERIC,A);let m,R;return a.isKanjiModeEnabled()?(m=g(i.BYTE,e.BYTE,A),R=g(i.KANJI,e.KANJI,A)):(m=g(i.BYTE_KANJI,e.BYTE,A),R=[]),B.concat(d,m,R).sort(function(M,D){return M.index-D.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function p(A,B){switch(B){case e.NUMERIC:return s.getBitsLength(A);case e.ALPHANUMERIC:return o.getBitsLength(A);case e.KANJI:return r.getBitsLength(A);case e.BYTE:return n.getBitsLength(A)}}function h(A){return A.reduce(function(B,d){const m=B.length-1>=0?B[B.length-1]:null;return m&&m.mode===d.mode?(B[B.length-1].data+=d.data,B):(B.push(d),B)},[])}function v(A){const B=[];for(let d=0;d<A.length;d++){const m=A[d];switch(m.mode){case e.NUMERIC:B.push([m,{data:m.data,mode:e.ALPHANUMERIC,length:m.length},{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.ALPHANUMERIC:B.push([m,{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.KANJI:B.push([m,{data:m.data,mode:e.BYTE,length:u(m.data)}]);break;case e.BYTE:B.push([{data:m.data,mode:e.BYTE,length:u(m.data)}])}}return B}function C(A,B){const d={},m={start:{}};let R=["start"];for(let S=0;S<A.length;S++){const M=A[S],D=[];for(let z=0;z<M.length;z++){const L=M[z],K=""+S+z;D.push(K),d[K]={node:L,lastCount:0},m[K]={};for(let x=0;x<R.length;x++){const Y=R[x];d[Y]&&d[Y].node.mode===L.mode?(m[Y][K]=p(d[Y].lastCount+L.length,L.mode)-p(d[Y].lastCount,L.mode),d[Y].lastCount+=L.length):(d[Y]&&(d[Y].lastCount=L.length),m[Y][K]=p(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,B))}}R=D}for(let S=0;S<R.length;S++)m[R[S]].end=0;return{map:m,table:d}}function U(A,B){let d;const m=e.getBestModeForData(A);if(d=e.from(B,m),d!==e.BYTE&&d.bit<m.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(d)+`.
 Suggested mode is: `+e.toString(m));switch(d===e.KANJI&&!a.isKanjiModeEnabled()&&(d=e.BYTE),d){case e.NUMERIC:return new s(A);case e.ALPHANUMERIC:return new o(A);case e.KANJI:return new r(A);case e.BYTE:return new n(A)}}t.fromArray=function(B){return B.reduce(function(d,m){return typeof m=="string"?d.push(U(m,null)):m.data&&d.push(U(m.data,m.mode)),d},[])},t.fromString=function(B,d){const m=P(B,a.isKanjiModeEnabled()),R=v(m),S=C(R,d),M=l.find_path(S.map,"start","end"),D=[];for(let z=1;z<M.length-1;z++)D.push(S.table[M[z]].node);return t.fromArray(h(D))},t.rawSplit=function(B){return t.fromArray(P(B,a.isKanjiModeEnabled()))}})(Bt);const Ee=V,_e=ve,On=bn,qn=Bn,Gn=ht,Jn=mt,Qe=pt,Fe=be,Xn=Rn,ye=Ct,Kn=vt,Hn=Z,Ne=Bt;function jn(t,e){const s=t.size,o=Jn.getPositions(e);for(let n=0;n<o.length;n++){const r=o[n][0],i=o[n][1];for(let a=-1;a<=7;a++)if(!(r+a<=-1||s<=r+a))for(let l=-1;l<=7;l++)i+l<=-1||s<=i+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(r+a,i+l,!0,!0):t.set(r+a,i+l,!1,!0))}}function Wn(t){const e=t.size;for(let s=8;s<e-8;s++){const o=s%2===0;t.set(s,6,o,!0),t.set(6,s,o,!0)}}function Zn(t,e){const s=Gn.getPositions(e);for(let o=0;o<s.length;o++){const n=s[o][0],r=s[o][1];for(let i=-2;i<=2;i++)for(let a=-2;a<=2;a++)i===-2||i===2||a===-2||a===2||i===0&&a===0?t.set(n+i,r+a,!0,!0):t.set(n+i,r+a,!1,!0)}}function xn(t,e){const s=t.size,o=ye.getEncodedBits(e);let n,r,i;for(let a=0;a<18;a++)n=Math.floor(a/3),r=a%3+s-8-3,i=(o>>a&1)===1,t.set(n,r,i,!0),t.set(r,n,i,!0)}function Le(t,e,s){const o=t.size,n=Kn.getEncodedBits(e,s);let r,i;for(r=0;r<15;r++)i=(n>>r&1)===1,r<6?t.set(r,8,i,!0):r<8?t.set(r+1,8,i,!0):t.set(o-15+r,8,i,!0),r<8?t.set(8,o-r-1,i,!0):r<9?t.set(8,15-r-1+1,i,!0):t.set(8,15-r-1,i,!0);t.set(o-8,8,1,!0)}function $n(t,e){const s=t.size;let o=-1,n=s-1,r=7,i=0;for(let a=s-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(n,a-l)){let u=!1;i<e.length&&(u=(e[i]>>>r&1)===1),t.set(n,a-l,u),r--,r===-1&&(i++,r=7)}if(n+=o,n<0||s<=n){n-=o,o=-o;break}}}function eo(t,e,s){const o=new On;s.forEach(function(l){o.put(l.mode.bit,4),o.put(l.getLength(),Hn.getCharCountIndicator(l.mode,t)),l.write(o)});const n=Ee.getSymbolTotalCodewords(t),r=Fe.getTotalCodewordsCount(t,e),i=(n-r)*8;for(o.getLengthInBits()+4<=i&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const a=(i-o.getLengthInBits())/8;for(let l=0;l<a;l++)o.put(l%2?17:236,8);return to(o,t,e)}function to(t,e,s){const o=Ee.getSymbolTotalCodewords(e),n=Fe.getTotalCodewordsCount(e,s),r=o-n,i=Fe.getBlocksCount(e,s),a=o%i,l=i-a,u=Math.floor(o/i),g=Math.floor(r/i),P=g+1,p=u-g,h=new Xn(p);let v=0;const C=new Array(i),U=new Array(i);let A=0;const B=new Uint8Array(t.buffer);for(let M=0;M<i;M++){const D=M<l?g:P;C[M]=B.slice(v,v+D),U[M]=h.encode(C[M]),v+=D,A=Math.max(A,D)}const d=new Uint8Array(o);let m=0,R,S;for(R=0;R<A;R++)for(S=0;S<i;S++)R<C[S].length&&(d[m++]=C[S][R]);for(R=0;R<p;R++)for(S=0;S<i;S++)d[m++]=U[S][R];return d}function no(t,e,s,o){let n;if(Array.isArray(t))n=Ne.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const g=Ne.rawSplit(t);u=ye.getBestVersionForData(g,s)}n=Ne.fromString(t,u||40)}else throw new Error("Invalid data");const r=ye.getBestVersionForData(n,s);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=r;else if(e<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);const i=eo(e,s,n),a=Ee.getSymbolSize(e),l=new qn(a);return jn(l,e),Wn(l),Zn(l,e),Le(l,s,0),e>=7&&xn(l,e),$n(l,i),isNaN(o)&&(o=Qe.getBestMask(l,Le.bind(null,l,s))),Qe.applyMask(o,l),Le(l,s,o),{modules:l,version:e,errorCorrectionLevel:s,maskPattern:o,segments:n}}ft.create=function(e,s){if(typeof e>"u"||e==="")throw new Error("No input text");let o=_e.M,n,r;return typeof s<"u"&&(o=_e.from(s.errorCorrectionLevel,_e.M),n=ye.from(s.version),r=Qe.from(s.maskPattern),s.toSJISFunc&&Ee.setToSJISFunction(s.toSJISFunc)),no(e,n,o,r)};var Rt={},Je={};(function(t){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let o=s.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+s);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(r){return[r,r]}))),o.length===6&&o.push("F","F");const n=parseInt(o.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+o.slice(0,6).join("")}}t.getOptions=function(o){o||(o={}),o.color||(o.color={});const n=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,r=o.width&&o.width>=21?o.width:void 0,i=o.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},t.getScale=function(o,n){return n.width&&n.width>=o+n.margin*2?n.width/(o+n.margin*2):n.scale},t.getImageWidth=function(o,n){const r=t.getScale(o,n);return Math.floor((o+n.margin*2)*r)},t.qrToImageData=function(o,n,r){const i=n.modules.size,a=n.modules.data,l=t.getScale(i,r),u=Math.floor((i+r.margin*2)*l),g=r.margin*l,P=[r.color.light,r.color.dark];for(let p=0;p<u;p++)for(let h=0;h<u;h++){let v=(p*u+h)*4,C=r.color.light;if(p>=g&&h>=g&&p<u-g&&h<u-g){const U=Math.floor((p-g)/l),A=Math.floor((h-g)/l);C=P[a[U*i+A]?1:0]}o[v++]=C.r,o[v++]=C.g,o[v++]=C.b,o[v]=C.a}}})(Je);(function(t){const e=Je;function s(n,r,i){n.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=i,r.width=i,r.style.height=i+"px",r.style.width=i+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(r,i,a){let l=a,u=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(u=o()),l=e.getOptions(l);const g=e.getImageWidth(r.modules.size,l),P=u.getContext("2d"),p=P.createImageData(g,g);return e.qrToImageData(p.data,r,l),s(P,u,g),P.putImageData(p,0,0),u},t.renderToDataURL=function(r,i,a){let l=a;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const u=t.render(r,i,l),g=l.type||"image/png",P=l.rendererOpts||{};return u.toDataURL(g,P.quality)}})(Rt);var Pt={};const oo=Je;function dt(t,e){const s=t.a/255,o=e+'="'+t.hex+'"';return s<1?o+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':o}function Ve(t,e,s){let o=t+e;return typeof s<"u"&&(o+=" "+s),o}function ro(t,e,s){let o="",n=0,r=!1,i=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!r&&(r=!0),t[a]?(i++,a>0&&l>0&&t[a-1]||(o+=r?Ve("M",l+s,.5+u+s):Ve("m",n,0),n=0,r=!1),l+1<e&&t[a+1]||(o+=Ve("h",i),i=0)):n++}return o}Pt.render=function(e,s,o){const n=oo.getOptions(s),r=e.modules.size,i=e.modules.data,a=r+n.margin*2,l=n.color.light.a?"<path "+dt(n.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+dt(n.color.dark,"stroke")+' d="'+ro(i,r,n.margin)+'"/>',g='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+g+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof o=="function"&&o(null,p),p};const so=yn,ze=ft,St=Rt,io=Pt;function Xe(t,e,s,o,n){const r=[].slice.call(arguments,1),i=r.length,a=typeof r[i-1]=="function";if(!a&&!so())throw new Error("Callback required as last argument");if(a){if(i<2)throw new Error("Too few arguments provided");i===2?(n=s,s=e,e=o=void 0):i===3&&(e.getContext&&typeof n>"u"?(n=o,o=void 0):(n=o,o=s,s=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=e,e=o=void 0):i===2&&!e.getContext&&(o=s,s=e,e=void 0),new Promise(function(l,u){try{const g=ze.create(s,o);l(t(g,e,o))}catch(g){u(g)}})}try{const l=ze.create(s,o);n(null,t(l,e,o))}catch(l){n(l)}}ne.create=ze.create;ne.toCanvas=Xe.bind(null,St.render);ne.toDataURL=Xe.bind(null,St.renderToDataURL);ne.toString=Xe.bind(null,function(t,e,s){return io.render(t,s)});const ao=()=>{const t=F(null),e=encodeURIComponent(window.location.hostname),s="admin",o=(r,i=s)=>`otpauth://totp/${e}:${i}?secret=${r}&issuer=${e}`;return{canvasRef:t,displayQRCode:(r,i,a)=>{const l=o(r);!t.value&&!a||(a?ne.toDataURL(l,function(u,g){if(u)throw u;a(g)}):t.value&&ne.toDataURL(t.value,l,function(u){console.error(u)}))}}},lo=ao,uo={class:"login"},co={class:"form-container"},fo={class:"form-hd"},go={class:"title-pwd"},ho={key:0,class:"tip totp-secret-tip"},mo={class:"space-between"},po={class:"tip auth-code-tip"},wo={class:"content"},Ao=["src"],Co={class:"cloud-list"},yo=["href"],vo={key:0,class:"login-wrapper local-login"},bo={class:"form-hd"},Bo={class:"btn-container"},Eo=["href"],Ro={key:1,class:"other-login"},Po={class:"tip"},So={class:"buttons-container vertical-align-center"},To=["action"],Mo=["action"],ko={key:1,class:"login-wrapper ldap-login"},Uo={class:"form-hd"},Io={class:"form-container"},Do={class:"form-hd"},_o={class:"title-pwd"},No={class:"tip default-pwd-tip"},Lo={class:"skip-wrap"},Vo="bad_mfa_token",Wo=Gt({__name:"Login",setup(t){const{t:e}=Jt(),s=Kt(),o=Ht(),n=jt(),{loginTitle:r,loginBgBanner:i}=un(),{docMap:a}=cn(),{samlLoginUrl:l,samlBackend:u,oidcLoginUrl:g,oidcBackend:P,enabledSSOList:p,currentLoginBackend:h,isSSOLoading:v,ldapRecord:C,hasSSOEnabled:U,ldapLogin:A,getEnabledSSO:B}=rn();B();const d=Te({username:"",password:"",mfa_token:""}),m=Te({password:"",passwordRepeat:""}),R=F(!1),S=F(!1),M=F(!1),D=F(!1),z=F(Number.MAX_SAFE_INTEGER),L=Me(()=>z.value<0),K=Me(()=>L.value||D.value),{createRequiredRule:x}=dn(),Y=[...x(e("General.authenticationCode")),{validator(w,f){if(!/^\d{6}$/.test(f))return[new Error(e("General.authenticationCodeError"))]}}],Ke={username:[{required:!0,message:e("Base.unameRequired")}],password:[{required:!0,message:e("Base.passwordRequired")}],mfa_token:Y},Tt=e("General.passwordRequirement1")+e("General.semicolon")+e("General.passwordRequirement2").toLowerCase(),Mt={password:[...x(e("General.password")),{pattern:Xt,message:Tt,trigger:["blur"]},{validator(w,f,k){L.value&&f===d.password?k(e("General.noSameNewPwd")):k()},trigger:["blur"]}],passwordRepeat:[...x(e("General.confirmPassword")),{validator:(w,f)=>f!==m.password?[new Error(e("General.confirmNotMatch"))]:[],trigger:["blur"]}]},Re=F(),He=F(),Pe=F(""),kt=Me(()=>Pe.value==="totp"),H=F(!1),de=F(""),je={pattern:"\\d{6}"},{copyText:Ut}=fn(),{canvasRef:It,displayQRCode:Dt}=lo();gn(()=>H.value,"General.confirmSetupKey");const We=F(),ee=Te({authCode:""}),_t={authCode:Y},Nt=()=>{Pe.value="",H.value=!1},Lt=async(w,f)=>{if(new RegExp(Vo,"i").test(w.error)){tn.error(e("General.userInfoError"));return}Pe.value=w.mechanism??"",H.value=!!w.secret,w.secret&&(de.value=w.secret,await nn(),Dt(de.value,f)),H.value&&(ee.authCode="")},Ze=(w,f)=>{D.value=w.password===xt&&$t.includes(w.username),z.value=f??Number.MAX_SAFE_INTEGER},Vt=()=>{K.value||ge()},{updateBaseInfo:Yt}=Wt(),xe=(w,f)=>Yt(w,f,h.value);let ae;const $e=()=>{ae&&(window.clearTimeout(ae),ae=void 0)},Qt=()=>{ae||(ae=window.setTimeout(()=>{M.value=!1,$e()},10*60*1e3))},fe=async w=>{var me;R.value=!0;const{username:f,password:k}=w,q=w.mfa_token||void 0;try{const G=await on({username:f,password:k,mfa_token:q});return Nt(),Ze(w,G.password_expire_in_seconds),xe(f,G),Vt(),M.value=!1,R.value=!1,$e(),Promise.resolve({username:f,response:G})}catch(G){const{code:Q,message:_}=((me=G==null?void 0:G.response)==null?void 0:me.data)||{};return Q===an&&Lt(_,f),M.value=Q===ln,Qt(),R.value=!1,Promise.reject(G)}},et=async(w=!1)=>{const{username:f,token:k}=w&&s.state.user||d;w&&f&&k?ge():en(),w||fe(d)},ge=()=>{o.replace({path:(n.query.to??"/dashboard").toString()})},he=async()=>{if(await Re.value.validate().catch(()=>!1))switch(h.value){case"local":et();break;case"ldap":A().then(({username:f,response:k})=>{xe(f,k),ge()}).catch(()=>{});break;default:et();break}},tt=async()=>{try{await He.value.validate(),R.value=!0;const{username:w,password:f}=d,{password:k}=m;await sn(w,{new_pwd:k,old_pwd:f}),d.mfa_token="",Ze({username:w,password:k}),d.password=k,s.commit("UPDATE_USER_INFO",{logOut:!0}),fe({username:w,password:k})}catch{}finally{R.value=!1}},nt=()=>{if(H.value){if(ee.authCode.length!==6)return;ot()}else{if(d.mfa_token.length!==6)return;fe(d)}},ot=async()=>{try{await We.value.validate(),fe({...d,mfa_token:ee.authCode})}catch{}};return(w,f)=>{const k=O("el-col"),q=O("el-button"),me=O("el-popover"),G=O("i18n-t"),Q=O("el-input"),_=O("el-form-item"),pe=O("el-form"),Se=O("el-row"),Ft=O("el-alert"),zt=O("el-page-header"),Ot=O("el-tooltip"),qt=Zt("loading");return N(),j("div",uo,[c(H)?(N(),te(Se,{key:0},{default:E(()=>[y(k,{span:12,class:"img-container"},{default:E(()=>f[15]||(f[15]=[b("img",{src:lt,alt:"img-change-default-pwd",width:"328"},null,-1)])),_:1}),y(k,{span:12,class:"col-new-pwd"},{default:E(()=>[b("div",co,[b("div",fo,[b("h5",go,I(w.$t("General.mfa")),1),c(H)?(N(),j("div",ho,[y(G,{keypath:"General.twoFASecretSetupTip",tag:"p"},{key:E(()=>[y(me,{placement:"bottom","popper-class":"is-wider",width:360},{reference:E(()=>[y(q,{type:"primary",link:"",class:"setup-key-btn"},{default:E(()=>[$(I(c(e)("General.setupKey")),1)]),_:1})]),default:E(()=>[b("div",mo,[b("span",null,I(c(de)),1),y(q,{type:"primary",link:"",icon:c(hn),onClick:f[0]||(f[0]=T=>c(Ut)(c(de)))},null,8,["icon"])])]),_:1})]),_:1})])):J("",!0)]),b("div",null,[c(H)?(N(),j("canvas",{key:0,class:"qr-code",width:"180",height:"180",ref_key:"canvasRef",ref:It},null,512)):J("",!0),y(pe,{ref_key:"TwoFAFormCom",ref:We,model:c(ee),rules:_t},{default:E(()=>[b("div",po,I(c(e)("General.verifyCode")),1),y(_,null,{default:E(()=>[y(Q,rt({modelValue:c(ee).authCode,"onUpdate:modelValue":f[1]||(f[1]=T=>c(ee).authCode=T)},je,{onInput:nt}),null,16,["modelValue"])]),_:1}),y(_,null,{default:E(()=>[y(q,{class:"btn-submit",type:"primary",onClick:ot,loading:c(R)},{default:E(()=>[$(I(w.$t("Base.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])]),_:1})]),_:1})):J("",!0),c(K)?(N(),te(Se,{key:2},{default:E(()=>[y(k,{span:12,class:"img-container"},{default:E(()=>f[19]||(f[19]=[b("img",{src:lt,alt:"img-change-default-pwd",width:"328"},null,-1)])),_:1}),y(k,{span:12,class:"col-new-pwd"},{default:E(()=>[b("div",Io,[b("div",Do,[b("h5",_o,I(w.$t("General.changePassword")),1),b("div",No,[b("p",null,I(c(D)?c(e)("Base.defaultPwdTip"):c(e)("Base.expiredPwdTip")),1),b("ul",null,[b("li",null,I(w.$t("General.passwordRequirement1")),1),b("li",null,I(w.$t("General.passwordRequirement2")),1)])])]),y(pe,{ref_key:"PwdFormCom",ref:He,"hide-required-asterisk":"",size:"large",class:"password-form",model:c(m),rules:Mt,onKeyup:ke(tt,["enter"])},{default:E(()=>[y(Q,{class:"username-placeholder",modelValue:c(d).username,"onUpdate:modelValue":f[12]||(f[12]=T=>c(d).username=T),modelModifiers:{trim:!0}},null,8,["modelValue"]),y(_,{prop:"password"},{default:E(()=>[y(Q,{modelValue:c(m).password,"onUpdate:modelValue":f[13]||(f[13]=T=>c(m).password=T),modelModifiers:{trim:!0},autofocus:"","show-password":"",tabindex:"1",type:"password",autocomplete:"new-password",placeholder:c(e)("General.newPassword")},null,8,["modelValue","placeholder"])]),_:1}),y(_,{prop:"passwordRepeat"},{default:E(()=>[y(Q,{modelValue:c(m).passwordRepeat,"onUpdate:modelValue":f[14]||(f[14]=T=>c(m).passwordRepeat=T),"show-password":"",tabindex:"2",type:"password",autocomplete:"new-password",placeholder:c(e)("General.confirmPassword")},null,8,["modelValue","placeholder"])]),_:1}),y(_,null,{default:E(()=>[y(q,{class:"btn-submit",type:"primary",onClick:tt,loading:c(R)},{default:E(()=>[$(I(w.$t("Base.confirm")),1)]),_:1},8,["loading"])]),_:1}),b("div",Lo,[y(Ot,{class:"box-item",effect:"dark",content:w.$t("Base.skipTip")},{default:E(()=>[y(q,{class:"btn-skip",type:"primary",link:"",onClick:ge},{default:E(()=>[$(I(w.$t("Base.skip")),1)]),_:1})]),_:1},8,["content"])])]),_:1},8,["model"])])]),_:1})]),_:1})):(N(),te(Se,{key:1},{default:E(()=>[y(k,{class:"intro",span:8},{default:E(()=>[b("div",wo,[b("img",{class:"dashboard-img",src:c(i),width:"369",alt:"emqx-dashboard"},null,8,Ao),b("div",Co,[b("a",{href:c(a).cloud,target:"_blank",rel:"noopener noreferrer"},f[16]||(f[16]=[b("img",{src:pn,width:"32",height:"32",alt:"aws"},null,-1),b("img",{src:wn,width:"32",height:"32",alt:"kubernetes"},null,-1),b("img",{src:An,width:"32",height:"32",alt:"azure"},null,-1),b("img",{src:Cn,width:"32",height:"32",alt:"gcp"},null,-1)]),8,yo)])])]),_:1}),y(k,{class:"form",span:16},{default:E(()=>[c(h)==="local"?(N(),j("div",vo,[b("div",bo,[b("h1",null,I(c(r)),1)]),c(M)?(N(),te(Ft,{key:0,class:"lock-alert",title:c(e)("General.loginLockedMsg"),type:"error"},null,8,["title"])):J("",!0),y(pe,{ref_key:"FormCom",ref:Re,model:c(d),rules:Ke,"hide-required-asterisk":"",size:"large",onKeyup:ke(he,["enter"])},{default:E(()=>[y(_,{prop:"username"},{default:E(()=>[y(Q,{modelValue:c(d).username,"onUpdate:modelValue":f[2]||(f[2]=T=>c(d).username=T),modelModifiers:{trim:!0},placeholder:w.$t("Base.username"),tabindex:"1",autocomplete:"username"},null,8,["modelValue","placeholder"])]),_:1}),y(_,{prop:"password"},{default:E(()=>[y(Q,{modelValue:c(d).password,"onUpdate:modelValue":f[3]||(f[3]=T=>c(d).password=T),type:"password",placeholder:w.$t("Base.password"),tabindex:"2",autocomplete:"current-password"},null,8,["modelValue","placeholder"])]),_:1}),c(kt)?(N(),te(_,{key:0,class:"small-mg-bt",prop:"mfa_token","label-position":"top"},{default:E(()=>[y(Q,rt({modelValue:c(d).mfa_token,"onUpdate:modelValue":f[4]||(f[4]=T=>c(d).mfa_token=T),tabindex:"3"},je,{placeholder:c(e)("Base.authCode"),onInput:nt}),null,16,["modelValue","placeholder"])]),_:1})):J("",!0),b("div",Bo,[b("a",{target:"_blank",rel:"noopener noreferrer",class:"forgot-btn",href:c(a).resetPassword},I(w.$t("Base.forgetPassword")),9,Eo)]),y(_,null,{default:E(()=>[y(q,{class:"btn-login",type:"primary",onClick:he,loading:c(R)},{default:E(()=>[$(I(w.$t("Base.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),c(U)?(N(),j("div",Ro,[b("p",Po,I(c(e)("Base.otherMethodsLogin")),1),b("div",So,[c(p).includes(c(Ue).ldap)?(N(),te(q,{key:0,link:"",type:"info",onClick:f[5]||(f[5]=T=>h.value="ldap")},{default:E(()=>f[17]||(f[17]=[$(" LDAP ")])),_:1})):J("",!0),c(p).includes(c(Ue).saml)?(N(),j("form",{key:1,action:c(l),method:"post",class:"form-sso",enctype:"multipart/form-data"},[Ie(b("input",{type:"text",name:"backend",id:"backend",required:"","onUpdate:modelValue":f[6]||(f[6]=T=>at(u)?u.value=T:null)},null,512),[[st,!1],[it,c(u)]]),f[18]||(f[18]=b("input",{class:"el-button el-button--info is-link",type:"submit",value:"SAML"},null,-1))],8,To)):J("",!0),c(p).includes(c(Ue).oidc)?Ie((N(),j("form",{key:2,action:c(g),method:"post",class:"form-sso",enctype:"multipart/form-data"},[Ie(b("input",{type:"text",name:"backend",id:"backend",required:"","onUpdate:modelValue":f[7]||(f[7]=T=>at(P)?P.value=T:null)},null,512),[[st,!1],[it,c(P)]]),b("input",{class:"el-button el-button--info is-link",type:"submit",value:"OIDC",onClick:f[8]||(f[8]=T=>S.value=!0)})],8,Mo)),[[qt,c(S)]]):J("",!0)])])):J("",!0)])):c(h)==="ldap"?(N(),j("div",ko,[y(zt,{icon:c(mn),onBack:f[9]||(f[9]=T=>h.value="local")},null,8,["icon"]),b("div",Uo,[b("h1",null,I(w.$t("Base.ldapLogin")),1)]),y(pe,{ref_key:"FormCom",ref:Re,model:c(C),rules:Ke,"hide-required-asterisk":"",size:"large",onKeyup:ke(he,["enter"])},{default:E(()=>[y(_,{prop:"username"},{default:E(()=>[y(Q,{modelValue:c(C).username,"onUpdate:modelValue":f[10]||(f[10]=T=>c(C).username=T),modelModifiers:{trim:!0},placeholder:w.$t("Base.username"),tabindex:"1"},null,8,["modelValue","placeholder"])]),_:1}),y(_,{class:"small-mg-bt",prop:"password"},{default:E(()=>[y(Q,{modelValue:c(C).password,"onUpdate:modelValue":f[11]||(f[11]=T=>c(C).password=T),type:"password",placeholder:w.$t("Base.password"),tabindex:"2"},null,8,["modelValue","placeholder"])]),_:1}),y(_,null,{default:E(()=>[y(q,{class:"btn-login",type:"primary",onClick:he,loading:c(v)},{default:E(()=>[$(I(w.$t("Base.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):J("",!0)]),_:1})]),_:1}))])}}});export{Wo as default};
