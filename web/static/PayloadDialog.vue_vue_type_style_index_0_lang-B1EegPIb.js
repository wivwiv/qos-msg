import{_ as R}from"./Monaco.vue_vue_type_style_index_0_lang-C5FqW0sc.js";import{g,J as S,cp as B,cq as l,cr as U,a5 as W,cs as $,d as A,j as N,q as E,m as w,w as i,u as n,y as V,r as y,V as q,o as _,c as b,b as p,F as M,k as Y,e as z,t as h,x as T,p as G,a as v,a9 as K}from"./index-Dp_94g6t.js";import{u as Q}from"./useCopy-xLykWTHO.js";const X=e=>{try{return Promise.resolve(JSON.stringify(JSON.parse(e),null,2))}catch{return Promise.reject("invalid JSON input: "+e)}},Z=e=>{let o="";for(let t=0;t<e.length;t++)o+=e.charCodeAt(t).toString(16);return Promise.resolve(o)},ee=e=>{try{return Promise.resolve(decodeURIComponent(e.replace(/(..)/g,"%$1")))}catch{return Promise.reject("Invalid hex input: "+e)}},ae=e=>{try{return Promise.resolve($(e))}catch{return Promise.reject("Invalid base64 input: "+e)}},oe=e=>{try{return Promise.resolve(JSON.stringify(JSON.parse(e)))}catch(o){return Promise.reject(o)}},te=async(e,o,t)=>{let a=e;try{if(o!==l.Plaintext)switch(o){case l.Base64:a=await ae(a);break;case l.JSON:a=await oe(a);break;case l.Hex:a=await ee(a);break}return t===l.Plaintext?a:t===l.Base64?U(a):(t===l.JSON&&(a=await X(a)),t===l.Hex&&(a=await Z(a)),a)}catch(u){return W.error(u),a}},le=()=>{const e=g(""),o=g(B[0]),t=B,a=s=>{e.value=s},u=g(""),m=async()=>{const s=await te(e.value||"",l.Base64,o.value);u.value=s};return S(o,m),S(e,m),{payloadForShow:u,payloadShowBy:o,payloadShowByOptions:t,setRawText:a}},ne={class:"topic-text"},se={class:"monaco-container"},re={key:0,class:"payload-dialog-ft"},ce=A({__name:"PayloadDialog",props:{modelValue:{type:Boolean},isLoading:{type:Boolean},rawPayload:{},rawPayloadFormat:{default:l.Base64},topic:{}},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,a=o,u=N({get:()=>t.modelValue,set:r=>{a("update:modelValue",r)}});S(u,r=>{r?x(t.rawPayload):s.value=B[0]});const{payloadForShow:m,payloadShowBy:s,payloadShowByOptions:k,setRawText:x}=le();S(()=>t.rawPayload,r=>{u.value&&x(r)});const{t:P}=E("Clients"),{copyText:J}=Q(),C=N(()=>s.value===l.Hex||s.value===l.Base64);return(r,d)=>{const f=y("el-col"),O=y("el-row"),j=R,D=y("el-option"),H=y("el-select"),I=y("el-button"),F=y("el-dialog"),L=q("loading");return _(),w(F,{modelValue:n(u),"onUpdate:modelValue":d[3]||(d[3]=c=>V(u)?u.value=c:null),class:"payload-dialog",width:"700px",title:n(P)("Extension.view")},{footer:i(()=>[r.rawPayload!==null?(_(),b("div",re,[p(H,{modelValue:n(s),"onUpdate:modelValue":d[1]||(d[1]=c=>V(s)?s.value=c:null)},{default:i(()=>[(_(!0),b(M,null,Y(n(k),c=>(_(),w(D,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),p(I,{onClick:d[2]||(d[2]=c=>n(J)(n(m)))},{default:i(()=>[z(h(n(P)("Base.copy")),1)]),_:1})])):T("",!0)]),default:i(()=>[G((_(),w(O,null,{default:i(()=>[r.topic?(_(),w(f,{key:0,span:24},{default:i(()=>[p(O,null,{default:i(()=>[p(f,{span:2},{default:i(()=>[v("label",null,h(n(P)("Base.topic")),1)]),_:1}),p(f,{span:21},{default:i(()=>[v("p",ne,h(r.topic),1)]),_:1})]),_:1})]),_:1})):T("",!0),p(f,{span:24,class:"margin-bottom-0"},{default:i(()=>[K(r.$slots,"default")]),_:3}),p(f,{span:24},{default:i(()=>[d[4]||(d[4]=v("label",{class:"label-top"},"Payload",-1)),v("div",se,[p(j,{disabled:"",id:"payload",modelValue:n(m),"onUpdate:modelValue":d[0]||(d[0]=c=>V(m)?m.value=c:null),lang:n(C)?"plaintext":"json",jsonWithoutValidate:n(s)!==n(l).JSON},null,8,["modelValue","lang","jsonWithoutValidate"])])]),_:1})]),_:3})),[[L,r.isLoading]])]),_:3},8,["modelValue","title"])}}});export{ce as _};
