import{_ as I}from"./CheckIcon.vue_vue_type_style_index_0_lang-BuOFsLdJ.js";import{d as w,ad as T,j as l,m as L,w as k,u as c,r as N,o,c as S,F as $,k as E,x as A,a as n,a9 as F,p as O,v as R,b as j,n as b,t as i,aR as h,aF as g,f as V,q as W,bm as f,aW as q}from"./index-Dp_94g6t.js";import{u as z,a as G}from"./useActionAndSourceStatus-D5aIU2c4.js";const H={key:0,class:"status-detail"},J={key:0,class:"node-status-list"},K={class:"node-name"},M={class:"extra-content"},P=w({name:"StatusDetailsOfEachNode"}),Q=w({...P,props:{statusData:{type:Object,default:()=>({detail:[]})},isTag:{type:Boolean,default:!1},showStatusDetail:{type:Boolean,default:!0}},setup(s){const a=s,D=T(),r=l(()=>{const{statusData:e}=a;return!(e.details&&Array.isArray(e.details)&&e.details.length>0)||!a.showStatusDetail&&!D["extra-content"]}),d=l(()=>({[h.Success]:g.Check,[h.Warning]:g.Warning,[h.Danger]:g.Close})[a.statusData.statusClass||h.Danger]);return(e,x)=>{const C=I,y=N("el-tooltip");return o(),L(y,{placement:"right","popper-class":"tooltip-node-status-list",disabled:c(r)},{content:k(()=>[s.showStatusDetail?(o(),S("div",H,[Array.isArray(s.statusData.details)?(o(),S("ul",J,[(o(!0),S($,null,E(s.statusData.details,({node:m,statusClass:t,statusLabel:p})=>(o(),S("li",{class:"node-status-item",key:m},[n("span",{class:b(["text-status",t])},i(p),3),n("span",K,i(m),1)]))),128))])):A("",!0)])):A("",!0),n("div",M,[F(e.$slots,"extra-content",{},void 0,!0)])]),default:k(()=>[n("span",{class:b(["node-status",{tag:s.isTag}])},[O(j(C,{status:c(d)},null,8,["status"]),[[R,s.statusData.statusLabel]]),n("span",{class:b(["text-status",s.statusData.statusClass])},i(s.statusData.statusLabel),3)],2)]),_:3},8,["disabled"])}}}),U=V(Q,[["__scopeId","data-v-cd4a9188"]]),X={class:"reason-title"},Y={class:"reason-content"},at=w({__name:"TargetItemStatus",props:{target:{type:Object},type:{type:String},isTag:{type:Boolean,default:!1}},setup(s){const a=s,{tl:D}=W("RuleEngine"),{getStatusLabel:r,getStatusClass:d}=z(),{getActionStatusLabel:e}=G(),x=l(()=>{const{target:t}=a,p=t!=null&&t.node_status&&Array.isArray(t==null?void 0:t.node_status)?t==null?void 0:t.node_status.map(({node:B,status:v})=>({node:B,statusLabel:r(v),statusClass:d(v)})):[];let u="";a.type==="connector"?u=r(t==null?void 0:t.status):u=e(t==null?void 0:t.status);const _=d(t==null?void 0:t.status);return{details:p,statusLabel:u,statusClass:_}}),C=l(()=>{var t;return((t=a.target)==null?void 0:t.status)===f.Inconsistent}),y=[f.Inconsistent,f.Connecting,f.Disconnected],m=l(()=>{const{target:t}=a;return(t==null?void 0:t.status)&&y.includes(t.status)});return(t,p)=>{const u=U;return o(),L(u,{"status-data":c(x),"is-tag":s.isTag,"show-status-detail":c(C)},q({_:2},[c(m)?{name:"extra-content",fn:k(()=>{var _;return[n("p",X,i(c(D)("statusReason")),1),n("p",Y,i((_=s.target)==null?void 0:_.status_reason),1)]}),key:"0"}:void 0]),1032,["status-data","is-tag","show-status-detail"])}}});export{U as _,at as a};
